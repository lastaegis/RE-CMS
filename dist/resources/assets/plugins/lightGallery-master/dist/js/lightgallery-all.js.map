{"version":3,"sources":["../../../../../../../resources/assets/plugins/lightGallery-master/dist/js/lightgallery-all.js"],"names":["root","factory","define","amd","a0","exports","module","require","$","defaults","mode","cssEasing","easing","speed","height","width","addClass","startClass","backdropDuration","hideBarsDelay","useLeft","closable","loop","escKey","keyPress","controls","slideEndAnimatoin","hideControlOnEnd","mousewheel","getCaptionFromTitleOrAlt","appendSubHtmlTo","subHtmlSelectorRelative","preload","showAfterLoad","selector","selectWithin","nextHtml","prevHtml","index","iframeMaxWidth","download","counter","appendCounterTo","swipeThreshold","enableSwipe","enableDrag","dynamic","dynamicEl","galleryId","Plugin","element","options","el","$el","s","extend","constructor","Array","length","modules","lGalleryOn","lgBusy","hideBartimeout","isTouch","document","documentElement","$items","find","children","$slide","$outer","init","prototype","_this","_hash","window","location","hash","indexOf","parseInt","split","hasClass","setTimeout","build","trigger","on","event","preventDefault","er","returnValue","structure","each","fn","lightGallery","key","slide","arrow","closeGallery","removeClass","clearTimeout","list","i","subHtmlCont","template","append","css","setTop","eq","doCss","$inner","prevScrollTop","scrollTop","wH","top","$lGallery","support","transition","style","isVideo","src","html","attr","html5","console","error","youtube","match","vimeo","dailymotion","vk","addHtml","subHtml","subHtmlUrl","$currentEle","first","fL","substring","load","j","loadContent","rec","delay","_hasPoster","_$img","_src","_poster","_srcset","_sizes","_html","getResponsiveSrc","srcItms","rsWidth","rsSrc","__src","splice","push","wWidth","poster","responsive","srcDyItms","srcset","sizes","iframe","_isVideo","prepend","videoClass","picturefill","elements","e","warn","_speed","fromTouch","fromThumb","direction","_prevIndex","_length","_time","downloadUrl","arrowDisable","touchPrev","touchNext","text","goToNextSlide","_loop","goToPrevSlide","keyCode","destroy","removeAttr","setTranslate","xValue","yValue","transform","touchMove","startCoords","endCoords","distance","Math","abs","touchEnd","not","isMoved","manageSwipeClass","originalEvent","targetTouches","pageX","isDraging","target","scrollLeft","_touchNext","_touchPrev","deltaY","mousedown","is","d","off","removeData","remove","data","err","jQuery","autoplay","pause","progressBar","fourceAutoplay","autoplayControls","appendAutoplayControlsTo","Autoplay","core","interval","fromAuto","canceledOnTouch","fourceAutoplayTemp","progress","one","startlAuto","cancelAuto","_$progressBar","_$progress","setInterval","clearInterval","fullScreen","Fullscreen","fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","toggleClass","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement","fullscreen","pager","Pager","pagerList","$pagerCont","$pagerOuter","timeout","thumb","exThumbImage","_$this","prevIndex","thumbnail","animateThumb","currentPagerPosition","thumbWidth","thumbHeight","thumbContHeight","thumbMargin","showThumbByDefault","toogleThumb","pullCaptionUp","enableThumbDrag","enableThumbSwipe","loadYoutubeThumbnail","youtubeThumbSize","loadVimeoThumbnail","vimeoThumbSize","loadDailymotionThumbnail","Thumbnail","$thumbOuter","thumbOuterWidth","thumbTotalWidth","thumbIndex","left","thumbClickable","toogle","thumbkeyPress","thumbList","vimeoErrorThumbSize","$thumb","position","getThumb","thumbImg","vimeoId","$this","vimeoVideoId","getJSON","format","value","animate","tempLeft","videoMaxWidth","youtubePlayerParams","vimeoPlayerParams","dailymotionPlayerParams","vkPlayerParams","videojs","videojsOptions","Video","videoLoaded","loadVideo","get","play","$videoCont","loadOnClick","_loadVideo","$tempImg","youtubePlayer","vimeoPlayer","dailymotionPlayer","html5Player","contentWindow","postMessage","$f","api","$videoSlide","vkPlayer","replace","noposter","video","a","param","getUseLeft","isChrome","navigator","userAgent","scale","zoom","actualSize","enableZoomAfter","useLeftForZoom","Zoom","zoomabletimeout","pageY","zoomIcons","scaleVal","$image","_x","_y","offsetX","prop","offsetY","x","y","parent","callScale","resetZoom","fromIcon","w","nw","naturalWidth","_scale","tapped","zoomDrag","zoomSwipe","allowX","allowY","_$el","distanceX","distanceY","touchendZoom","minY","maxY","minX","maxX","Hash","oldHash","history","replaceState","_idx","title","pathname","search","share","facebook","facebookDropdownText","twitter","twitterDropdownText","googlePlus","googlePlusDropdownText","pinterest","pinterestDropdownText","Share","shareHtml","encodeURIComponent","href"],"mappings":";;;;AAAA;;;AAGA;;;AAGC,WAAUA,IAAV,EAAgBC,OAAhB,EAAyB;AACxB,QAAI,OAAOC,MAAP,KAAkB,UAAlB,IAAgCA,OAAOC,GAA3C,EAAgD;AAC9C;AACAD,eAAO,CAAC,QAAD,CAAP,EAAmB,UAAUE,EAAV,EAAc;AAC/B,mBAAQH,QAAQG,EAAR,CAAR;AACD,SAFD;AAGD,KALD,MAKO,IAAI,QAAOC,OAAP,yCAAOA,OAAP,OAAmB,QAAvB,EAAiC;AACtC;AACA;AACA;AACAC,eAAOD,OAAP,GAAiBJ,QAAQM,QAAQ,QAAR,CAAR,CAAjB;AACD,KALM,MAKA;AACLN,gBAAQD,KAAK,QAAL,CAAR;AACD;AACF,CAdA,aAcO,UAAUQ,CAAV,EAAa;;AAErB,KAAC,YAAW;AACR;;AAEA,YAAIC,WAAW;;AAEXC,kBAAM,UAFK;;AAIX;AACAC,uBAAW,MALA;;AAOX;AACAC,oBAAQ,QARG;AASXC,mBAAO,GATI;AAUXC,oBAAQ,MAVG;AAWXC,mBAAO,MAXI;AAYXC,sBAAU,EAZC;AAaXC,wBAAY,eAbD;AAcXC,8BAAkB,GAdP;AAeXC,2BAAe,IAfJ;;AAiBXC,qBAAS,KAjBE;;AAmBXC,sBAAU,IAnBC;AAoBXC,kBAAM,IApBK;AAqBXC,oBAAQ,IArBG;AAsBXC,sBAAU,IAtBC;AAuBXC,sBAAU,IAvBC;AAwBXC,+BAAmB,IAxBR;AAyBXC,8BAAkB,KAzBP;AA0BXC,wBAAY,IA1BD;;AA4BXC,sCAA0B,IA5Bf;;AA8BX;AACAC,6BAAiB,cA/BN;;AAiCXC,qCAAyB,KAjCd;;AAmCX;;;;;;;;;AASAC,qBAAS,CA5CE;AA6CXC,2BAAe,IA7CJ;AA8CXC,sBAAU,EA9CC;AA+CXC,0BAAc,EA/CH;AAgDXC,sBAAU,EAhDC;AAiDXC,sBAAU,EAjDC;;AAmDX;AACAC,mBAAO,KApDI;;AAsDXC,4BAAgB,MAtDL;;AAwDXC,sBAAU,IAxDC;AAyDXC,qBAAS,IAzDE;AA0DXC,6BAAiB,aA1DN;;AA4DXC,4BAAgB,EA5DL;AA6DXC,yBAAa,IA7DF;AA8DXC,wBAAY,IA9DD;;AAgEXC,qBAAS,KAhEE;AAiEXC,uBAAW,EAjEA;AAkEXC,uBAAW;AAlEA,SAAf;;AAqEA,iBAASC,MAAT,CAAgBC,OAAhB,EAAyBC,OAAzB,EAAkC;;AAE9B;AACA,iBAAKC,EAAL,GAAUF,OAAV;;AAEA;AACA,iBAAKG,GAAL,GAAW7C,EAAE0C,OAAF,CAAX;;AAEA;AACA,iBAAKI,CAAL,GAAS9C,EAAE+C,MAAF,CAAS,EAAT,EAAa9C,QAAb,EAAuB0C,OAAvB,CAAT;;AAEA;AACA,gBAAI,KAAKG,CAAL,CAAOR,OAAP,IAAkB,KAAKQ,CAAL,CAAOP,SAAP,KAAqB,WAAvC,IAAsD,KAAKO,CAAL,CAAOP,SAAP,CAAiBS,WAAjB,KAAiCC,KAAvF,IAAgG,CAAC,KAAKH,CAAL,CAAOP,SAAP,CAAiBW,MAAtH,EAA8H;AAC1H,sBAAO,sEAAP;AACH;;AAED;AACA,iBAAKC,OAAL,GAAe,EAAf;;AAEA;AACA,iBAAKC,UAAL,GAAkB,KAAlB;;AAEA,iBAAKC,MAAL,GAAc,KAAd;;AAEA;AACA,iBAAKC,cAAL,GAAsB,KAAtB;;AAEA;AACA,iBAAKC,OAAL,GAAgB,kBAAkBC,SAASC,eAA3C;;AAEA;AACA,gBAAI,KAAKX,CAAL,CAAO5B,iBAAX,EAA8B;AAC1B,qBAAK4B,CAAL,CAAO3B,gBAAP,GAA0B,KAA1B;AACH;;AAED;AACA,gBAAI,KAAK2B,CAAL,CAAOR,OAAX,EAAoB;AAChB,qBAAKoB,MAAL,GAAc,KAAKZ,CAAL,CAAOP,SAArB;AACH,aAFD,MAEO;AACH,oBAAI,KAAKO,CAAL,CAAOpB,QAAP,KAAoB,MAAxB,EAAgC;AAC5B,yBAAKgC,MAAL,GAAc,KAAKb,GAAnB;AACH,iBAFD,MAEO,IAAI,KAAKC,CAAL,CAAOpB,QAAP,KAAoB,EAAxB,EAA4B;AAC/B,wBAAI,KAAKoB,CAAL,CAAOnB,YAAX,EAAyB;AACrB,6BAAK+B,MAAL,GAAc1D,EAAE,KAAK8C,CAAL,CAAOnB,YAAT,EAAuBgC,IAAvB,CAA4B,KAAKb,CAAL,CAAOpB,QAAnC,CAAd;AACH,qBAFD,MAEO;AACH,6BAAKgC,MAAL,GAAc,KAAKb,GAAL,CAASc,IAAT,CAAc3D,EAAE,KAAK8C,CAAL,CAAOpB,QAAT,CAAd,CAAd;AACH;AACJ,iBANM,MAMA;AACH,yBAAKgC,MAAL,GAAc,KAAKb,GAAL,CAASe,QAAT,EAAd;AACH;AACJ;;AAED;AACA,iBAAKC,MAAL,GAAc,EAAd;;AAEA;AACA,iBAAKC,MAAL,GAAc,EAAd;;AAEA,iBAAKC,IAAL;;AAEA,mBAAO,IAAP;AACH;;AAEDtB,eAAOuB,SAAP,CAAiBD,IAAjB,GAAwB,YAAW;;AAE/B,gBAAIE,QAAQ,IAAZ;;AAEA;AACA,gBAAIA,MAAMnB,CAAN,CAAQtB,OAAR,GAAkByC,MAAMP,MAAN,CAAaR,MAAnC,EAA2C;AACvCe,sBAAMnB,CAAN,CAAQtB,OAAR,GAAkByC,MAAMP,MAAN,CAAaR,MAA/B;AACH;;AAED;AACA,gBAAIgB,QAAQC,OAAOC,QAAP,CAAgBC,IAA5B;AACA,gBAAIH,MAAMI,OAAN,CAAc,QAAQ,KAAKxB,CAAL,CAAON,SAA7B,IAA0C,CAA9C,EAAiD;;AAE7CyB,sBAAMnC,KAAN,GAAcyC,SAASL,MAAMM,KAAN,CAAY,SAAZ,EAAuB,CAAvB,CAAT,EAAoC,EAApC,CAAd;;AAEAxE,kBAAE,MAAF,EAAUQ,QAAV,CAAmB,cAAnB;AACA,oBAAI,CAACR,EAAE,MAAF,EAAUyE,QAAV,CAAmB,OAAnB,CAAL,EAAkC;AAC9BC,+BAAW,YAAW;AAClBT,8BAAMU,KAAN,CAAYV,MAAMnC,KAAlB;AACH,qBAFD;;AAIA9B,sBAAE,MAAF,EAAUQ,QAAV,CAAmB,OAAnB;AACH;AACJ;;AAED,gBAAIyD,MAAMnB,CAAN,CAAQR,OAAZ,EAAqB;;AAEjB2B,sBAAMpB,GAAN,CAAU+B,OAAV,CAAkB,iBAAlB;;AAEAX,sBAAMnC,KAAN,GAAcmC,MAAMnB,CAAN,CAAQhB,KAAR,IAAiB,CAA/B;;AAEA;AACA,oBAAI,CAAC9B,EAAE,MAAF,EAAUyE,QAAV,CAAmB,OAAnB,CAAL,EAAkC;AAC9BC,+BAAW,YAAW;AAClBT,8BAAMU,KAAN,CAAYV,MAAMnC,KAAlB;AACA9B,0BAAE,MAAF,EAAUQ,QAAV,CAAmB,OAAnB;AACH,qBAHD;AAIH;AACJ,aAbD,MAaO;;AAEH;AACAyD,sBAAMP,MAAN,CAAamB,EAAb,CAAgB,gBAAhB,EAAkC,UAASC,KAAT,EAAgB;;AAE9C;AACA,wBAAI;AACAA,8BAAMC,cAAN;AACAD,8BAAMC,cAAN;AACH,qBAHD,CAGE,OAAOC,EAAP,EAAW;AACTF,8BAAMG,WAAN,GAAoB,KAApB;AACH;;AAEDhB,0BAAMpB,GAAN,CAAU+B,OAAV,CAAkB,iBAAlB;;AAEAX,0BAAMnC,KAAN,GAAcmC,MAAMnB,CAAN,CAAQhB,KAAR,IAAiBmC,MAAMP,MAAN,CAAa5B,KAAb,CAAmB,IAAnB,CAA/B;;AAEA;AACA,wBAAI,CAAC9B,EAAE,MAAF,EAAUyE,QAAV,CAAmB,OAAnB,CAAL,EAAkC;AAC9BR,8BAAMU,KAAN,CAAYV,MAAMnC,KAAlB;AACA9B,0BAAE,MAAF,EAAUQ,QAAV,CAAmB,OAAnB;AACH;AACJ,iBAnBD;AAoBH;AAEJ,SA/DD;;AAiEAiC,eAAOuB,SAAP,CAAiBW,KAAjB,GAAyB,UAAS7C,KAAT,EAAgB;;AAErC,gBAAImC,QAAQ,IAAZ;;AAEAA,kBAAMiB,SAAN;;AAEA;AACAlF,cAAEmF,IAAF,CAAOnF,EAAEoF,EAAF,CAAKC,YAAL,CAAkBlC,OAAzB,EAAkC,UAASmC,GAAT,EAAc;AAC5CrB,sBAAMd,OAAN,CAAcmC,GAAd,IAAqB,IAAItF,EAAEoF,EAAF,CAAKC,YAAL,CAAkBlC,OAAlB,CAA0BmC,GAA1B,CAAJ,CAAmCrB,MAAMrB,EAAzC,CAArB;AACH,aAFD;;AAIA;AACAqB,kBAAMsB,KAAN,CAAYzD,KAAZ,EAAmB,KAAnB,EAA0B,KAA1B,EAAiC,KAAjC;;AAEA,gBAAImC,MAAMnB,CAAN,CAAQ9B,QAAZ,EAAsB;AAClBiD,sBAAMjD,QAAN;AACH;;AAED,gBAAIiD,MAAMP,MAAN,CAAaR,MAAb,GAAsB,CAA1B,EAA6B;;AAEzBe,sBAAMuB,KAAN;;AAEAd,2BAAW,YAAW;AAClBT,0BAAM5B,UAAN;AACA4B,0BAAM7B,WAAN;AACH,iBAHD,EAGG,EAHH;;AAKA,oBAAI6B,MAAMnB,CAAN,CAAQ1B,UAAZ,EAAwB;AACpB6C,0BAAM7C,UAAN;AACH;AACJ,aAZD,MAYO;AACH6C,sBAAMJ,MAAN,CAAagB,EAAb,CAAgB,UAAhB,EAA4B,YAAW;AACnCZ,0BAAMpB,GAAN,CAAU+B,OAAV,CAAkB,iBAAlB;AACH,iBAFD;AAGH;;AAEDX,kBAAMhC,OAAN;;AAEAgC,kBAAMwB,YAAN;;AAEAxB,kBAAMpB,GAAN,CAAU+B,OAAV,CAAkB,gBAAlB;;AAEA;AACAX,kBAAMH,MAAN,CAAae,EAAb,CAAgB,qCAAhB,EAAuD,YAAW;;AAE9DZ,sBAAMH,MAAN,CAAa4B,WAAb,CAAyB,eAAzB;;AAEAC,6BAAa1B,MAAMX,cAAnB;;AAEA;AACAW,sBAAMX,cAAN,GAAuBoB,WAAW,YAAW;AACzCT,0BAAMH,MAAN,CAAatD,QAAb,CAAsB,eAAtB;AACH,iBAFsB,EAEpByD,MAAMnB,CAAN,CAAQnC,aAFY,CAAvB;AAIH,aAXD;;AAaAsD,kBAAMH,MAAN,CAAac,OAAb,CAAqB,cAArB;AAEH,SA1DD;;AA4DAnC,eAAOuB,SAAP,CAAiBkB,SAAjB,GAA6B,YAAW;AACpC,gBAAIU,OAAO,EAAX;AACA,gBAAI3E,WAAW,EAAf;AACA,gBAAI4E,IAAI,CAAR;AACA,gBAAIC,cAAc,EAAlB;AACA,gBAAIC,QAAJ;AACA,gBAAI9B,QAAQ,IAAZ;;AAEAjE,cAAE,MAAF,EAAUgG,MAAV,CAAiB,iCAAjB;AACAhG,cAAE,cAAF,EAAkBiG,GAAlB,CAAsB,qBAAtB,EAA6C,KAAKnD,CAAL,CAAOpC,gBAAP,GAA0B,IAAvE;;AAEA;AACA,iBAAKmF,IAAI,CAAT,EAAYA,IAAI,KAAKnC,MAAL,CAAYR,MAA5B,EAAoC2C,GAApC,EAAyC;AACrCD,wBAAQ,6BAAR;AACH;;AAED;AACA,gBAAI,KAAK9C,CAAL,CAAO7B,QAAP,IAAmB,KAAKyC,MAAL,CAAYR,MAAZ,GAAqB,CAA5C,EAA+C;AAC3CjC,2BAAW,6BACP,kCADO,GAC8B,KAAK6B,CAAL,CAAOjB,QADrC,GACgD,WADhD,GAEP,kCAFO,GAE8B,KAAKiB,CAAL,CAAOlB,QAFrC,GAEgD,WAFhD,GAGP,QAHJ;AAIH;;AAED,gBAAI,KAAKkB,CAAL,CAAOxB,eAAP,KAA2B,cAA/B,EAA+C;AAC3CwE,8BAAc,iCAAd;AACH;;AAEDC,uBAAW,0BAA0B,KAAKjD,CAAL,CAAOtC,QAAjC,GAA4C,GAA5C,GAAkD,KAAKsC,CAAL,CAAOrC,UAAzD,GAAsE,IAAtE,GACP,+BADO,GAC2B,KAAKqC,CAAL,CAAOvC,KADlC,GAC0C,WAD1C,GACwD,KAAKuC,CAAL,CAAOxC,MAD/D,GACwE,IADxE,GAEP,wBAFO,GAEoBsF,IAFpB,GAE2B,QAF3B,GAGP,mCAHO,GAIP,wCAJO,GAKP,QALO,GAMP3E,QANO,GAOP6E,WAPO,GAQP,QARO,GASP,QATJ;;AAWA9F,cAAE,MAAF,EAAUgG,MAAV,CAAiBD,QAAjB;AACA,iBAAKjC,MAAL,GAAc9D,EAAE,WAAF,CAAd;AACA,iBAAK6D,MAAL,GAAc,KAAKC,MAAL,CAAYH,IAAZ,CAAiB,UAAjB,CAAd;;AAEA,gBAAI,KAAKb,CAAL,CAAOlC,OAAX,EAAoB;AAChB,qBAAKkD,MAAL,CAAYtD,QAAZ,CAAqB,aAArB;;AAEA;AACA,qBAAKsC,CAAL,CAAO5C,IAAP,GAAc,UAAd;AACH,aALD,MAKO;AACH,qBAAK4D,MAAL,CAAYtD,QAAZ,CAAqB,aAArB;AACH;;AAED;AACAyD,kBAAMiC,MAAN;AACAlG,cAAEmE,MAAF,EAAUU,EAAV,CAAa,gCAAb,EAA+C,YAAW;AACtDH,2BAAW,YAAW;AAClBT,0BAAMiC,MAAN;AACH,iBAFD,EAEG,GAFH;AAGH,aAJD;;AAMA;AACA,iBAAKrC,MAAL,CAAYsC,EAAZ,CAAe,KAAKrE,KAApB,EAA2BtB,QAA3B,CAAoC,YAApC;;AAEA;AACA,gBAAI,KAAK4F,KAAL,EAAJ,EAAkB;AACd,qBAAKtC,MAAL,CAAYtD,QAAZ,CAAqB,SAArB;AACH,aAFD,MAEO;AACH,qBAAKsD,MAAL,CAAYtD,QAAZ,CAAqB,QAArB;;AAEA;AACA,qBAAKsC,CAAL,CAAOzC,KAAP,GAAe,CAAf;AACH;;AAED,iBAAKyD,MAAL,CAAYtD,QAAZ,CAAqB,KAAKsC,CAAL,CAAO5C,IAA5B;;AAEA,gBAAI,KAAK4C,CAAL,CAAOT,UAAP,IAAqB,KAAKqB,MAAL,CAAYR,MAAZ,GAAqB,CAA9C,EAAiD;AAC7C,qBAAKY,MAAL,CAAYtD,QAAZ,CAAqB,SAArB;AACH;;AAED,gBAAI,KAAKsC,CAAL,CAAOrB,aAAX,EAA0B;AACtB,qBAAKqC,MAAL,CAAYtD,QAAZ,CAAqB,oBAArB;AACH;;AAED,gBAAI,KAAK4F,KAAL,EAAJ,EAAkB;AACd,oBAAIC,SAAS,KAAKvC,MAAL,CAAYH,IAAZ,CAAiB,WAAjB,CAAb;AACA0C,uBAAOJ,GAAP,CAAW,4BAAX,EAAyC,KAAKnD,CAAL,CAAO3C,SAAhD;AACAkG,uBAAOJ,GAAP,CAAW,qBAAX,EAAkC,KAAKnD,CAAL,CAAOzC,KAAP,GAAe,IAAjD;AACH;;AAEDqE,uBAAW,YAAW;AAClB1E,kBAAE,cAAF,EAAkBQ,QAAlB,CAA2B,IAA3B;AACH,aAFD;;AAIAkE,uBAAW,YAAW;AAClBT,sBAAMH,MAAN,CAAatD,QAAb,CAAsB,YAAtB;AACH,aAFD,EAEG,KAAKsC,CAAL,CAAOpC,gBAFV;;AAIA,gBAAI,KAAKoC,CAAL,CAAOd,QAAX,EAAqB;AACjB,qBAAK8B,MAAL,CAAYH,IAAZ,CAAiB,aAAjB,EAAgCqC,MAAhC,CAAuC,+EAAvC;AACH;;AAED;AACA,iBAAKM,aAAL,GAAqBtG,EAAEmE,MAAF,EAAUoC,SAAV,EAArB;AAEH,SAxGD;;AA0GA;AACA9D,eAAOuB,SAAP,CAAiBkC,MAAjB,GAA0B,YAAW;AACjC,gBAAI,KAAKpD,CAAL,CAAOxC,MAAP,KAAkB,MAAtB,EAA8B;AAC1B,oBAAIkG,KAAKxG,EAAEmE,MAAF,EAAU7D,MAAV,EAAT;AACA,oBAAImG,MAAM,CAACD,KAAKjC,SAAS,KAAKzB,CAAL,CAAOxC,MAAhB,EAAwB,EAAxB,CAAN,IAAqC,CAA/C;AACA,oBAAIoG,YAAY,KAAK5C,MAAL,CAAYH,IAAZ,CAAiB,KAAjB,CAAhB;AACA,oBAAI6C,MAAMjC,SAAS,KAAKzB,CAAL,CAAOxC,MAAhB,EAAwB,EAAxB,CAAV,EAAuC;AACnCoG,8BAAUT,GAAV,CAAc,KAAd,EAAqBQ,MAAM,IAA3B;AACH,iBAFD,MAEO;AACHC,8BAAUT,GAAV,CAAc,KAAd,EAAqB,KAArB;AACH;AACJ;AACJ,SAXD;;AAaA;AACAxD,eAAOuB,SAAP,CAAiBoC,KAAjB,GAAyB,YAAW;AAChC;AACA,gBAAIO,UAAU,SAAVA,OAAU,GAAW;AACrB,oBAAIC,aAAa,CAAC,YAAD,EAAe,eAAf,EAAgC,kBAAhC,EAAoD,aAApD,EAAmE,cAAnE,EAAmF,iBAAnF,CAAjB;AACA,oBAAIpH,OAAOgE,SAASC,eAApB;AACA,oBAAIoC,IAAI,CAAR;AACA,qBAAKA,IAAI,CAAT,EAAYA,IAAIe,WAAW1D,MAA3B,EAAmC2C,GAAnC,EAAwC;AACpC,wBAAIe,WAAWf,CAAX,KAAiBrG,KAAKqH,KAA1B,EAAiC;AAC7B,+BAAO,IAAP;AACH;AACJ;AACJ,aATD;;AAWA,gBAAIF,SAAJ,EAAe;AACX,uBAAO,IAAP;AACH;;AAED,mBAAO,KAAP;AACH,SAlBD;;AAoBA;;;;;;AAMAlE,eAAOuB,SAAP,CAAiB8C,OAAjB,GAA2B,UAASC,GAAT,EAAcjF,KAAd,EAAqB;;AAE5C,gBAAIkF,IAAJ;AACA,gBAAI,KAAKlE,CAAL,CAAOR,OAAX,EAAoB;AAChB0E,uBAAO,KAAKlE,CAAL,CAAOP,SAAP,CAAiBT,KAAjB,EAAwBkF,IAA/B;AACH,aAFD,MAEO;AACHA,uBAAO,KAAKtD,MAAL,CAAYyC,EAAZ,CAAerE,KAAf,EAAsBmF,IAAtB,CAA2B,WAA3B,CAAP;AACH;;AAED,gBAAI,CAACF,GAAL,EAAU;AACN,oBAAGC,IAAH,EAAS;AACL,2BAAO;AACHE,+BAAO;AADJ,qBAAP;AAGH,iBAJD,MAIO;AACHC,4BAAQC,KAAR,CAAc,6DAA6DtF,QAAQ,CAArE,IAA0E,iJAAxF;AACA,2BAAO,KAAP;AACH;AACJ;;AAED,gBAAIuF,UAAUN,IAAIO,KAAJ,CAAU,+EAAV,CAAd;AACA,gBAAIC,QAAQR,IAAIO,KAAJ,CAAU,0CAAV,CAAZ;AACA,gBAAIE,cAAcT,IAAIO,KAAJ,CAAU,uCAAV,CAAlB;AACA,gBAAIG,KAAKV,IAAIO,KAAJ,CAAU,oEAAV,CAAT;;AAEA,gBAAID,OAAJ,EAAa;AACT,uBAAO;AACHA,6BAASA;AADN,iBAAP;AAGH,aAJD,MAIO,IAAIE,KAAJ,EAAW;AACd,uBAAO;AACHA,2BAAOA;AADJ,iBAAP;AAGH,aAJM,MAIA,IAAIC,WAAJ,EAAiB;AACpB,uBAAO;AACHA,iCAAaA;AADV,iBAAP;AAGH,aAJM,MAIA,IAAIC,EAAJ,EAAQ;AACX,uBAAO;AACHA,wBAAIA;AADD,iBAAP;AAGH;AACJ,SA1CD;;AA4CA;;;;AAIAhF,eAAOuB,SAAP,CAAiB/B,OAAjB,GAA2B,YAAW;AAClC,gBAAI,KAAKa,CAAL,CAAOb,OAAX,EAAoB;AAChBjC,kBAAE,KAAK8C,CAAL,CAAOZ,eAAT,EAA0B8D,MAA1B,CAAiC,yDAAyDzB,SAAS,KAAKzC,KAAd,EAAqB,EAArB,IAA2B,CAApF,IAAyF,sCAAzF,GAAkI,KAAK4B,MAAL,CAAYR,MAA9I,GAAuJ,eAAxL;AACH;AACJ,SAJD;;AAMA;;;;AAIAT,eAAOuB,SAAP,CAAiB0D,OAAjB,GAA2B,UAAS5F,KAAT,EAAgB;AACvC,gBAAI6F,UAAU,IAAd;AACA,gBAAIC,UAAJ;AACA,gBAAIC,WAAJ;AACA,gBAAI,KAAK/E,CAAL,CAAOR,OAAX,EAAoB;AAChB,oBAAI,KAAKQ,CAAL,CAAOP,SAAP,CAAiBT,KAAjB,EAAwB8F,UAA5B,EAAwC;AACpCA,iCAAa,KAAK9E,CAAL,CAAOP,SAAP,CAAiBT,KAAjB,EAAwB8F,UAArC;AACH,iBAFD,MAEO;AACHD,8BAAU,KAAK7E,CAAL,CAAOP,SAAP,CAAiBT,KAAjB,EAAwB6F,OAAlC;AACH;AACJ,aAND,MAMO;AACHE,8BAAc,KAAKnE,MAAL,CAAYyC,EAAZ,CAAerE,KAAf,CAAd;AACA,oBAAI+F,YAAYZ,IAAZ,CAAiB,mBAAjB,CAAJ,EAA2C;AACvCW,iCAAaC,YAAYZ,IAAZ,CAAiB,mBAAjB,CAAb;AACH,iBAFD,MAEO;AACHU,8BAAUE,YAAYZ,IAAZ,CAAiB,eAAjB,CAAV;AACA,wBAAI,KAAKnE,CAAL,CAAOzB,wBAAP,IAAmC,CAACsG,OAAxC,EAAiD;AAC7CA,kCAAUE,YAAYZ,IAAZ,CAAiB,OAAjB,KAA6BY,YAAYlE,IAAZ,CAAiB,KAAjB,EAAwBmE,KAAxB,GAAgCb,IAAhC,CAAqC,KAArC,CAAvC;AACH;AACJ;AACJ;;AAED,gBAAI,CAACW,UAAL,EAAiB;AACb,oBAAI,OAAOD,OAAP,KAAmB,WAAnB,IAAkCA,YAAY,IAAlD,EAAwD;;AAEpD;AACA;AACA,wBAAII,KAAKJ,QAAQK,SAAR,CAAkB,CAAlB,EAAqB,CAArB,CAAT;AACA,wBAAID,OAAO,GAAP,IAAcA,OAAO,GAAzB,EAA8B;AAC1B,4BAAI,KAAKjF,CAAL,CAAOvB,uBAAP,IAAkC,CAAC,KAAKuB,CAAL,CAAOR,OAA9C,EAAuD;AACnDqF,sCAAUE,YAAYlE,IAAZ,CAAiBgE,OAAjB,EAA0BX,IAA1B,EAAV;AACH,yBAFD,MAEO;AACHW,sCAAU3H,EAAE2H,OAAF,EAAWX,IAAX,EAAV;AACH;AACJ;AACJ,iBAZD,MAYO;AACHW,8BAAU,EAAV;AACH;AACJ;;AAED,gBAAI,KAAK7E,CAAL,CAAOxB,eAAP,KAA2B,cAA/B,EAA+C;;AAE3C,oBAAIsG,UAAJ,EAAgB;AACZ,yBAAK9D,MAAL,CAAYH,IAAZ,CAAiB,KAAKb,CAAL,CAAOxB,eAAxB,EAAyC2G,IAAzC,CAA8CL,UAA9C;AACH,iBAFD,MAEO;AACH,yBAAK9D,MAAL,CAAYH,IAAZ,CAAiB,KAAKb,CAAL,CAAOxB,eAAxB,EAAyC0F,IAAzC,CAA8CW,OAA9C;AACH;AAEJ,aARD,MAQO;;AAEH,oBAAIC,UAAJ,EAAgB;AACZ,yBAAK/D,MAAL,CAAYsC,EAAZ,CAAerE,KAAf,EAAsBmG,IAAtB,CAA2BL,UAA3B;AACH,iBAFD,MAEO;AACH,yBAAK/D,MAAL,CAAYsC,EAAZ,CAAerE,KAAf,EAAsBkE,MAAtB,CAA6B2B,OAA7B;AACH;AACJ;;AAED;AACA,gBAAI,OAAOA,OAAP,KAAmB,WAAnB,IAAkCA,YAAY,IAAlD,EAAwD;AACpD,oBAAIA,YAAY,EAAhB,EAAoB;AAChB,yBAAK7D,MAAL,CAAYH,IAAZ,CAAiB,KAAKb,CAAL,CAAOxB,eAAxB,EAAyCd,QAAzC,CAAkD,eAAlD;AACH,iBAFD,MAEO;AACH,yBAAKsD,MAAL,CAAYH,IAAZ,CAAiB,KAAKb,CAAL,CAAOxB,eAAxB,EAAyCoE,WAAzC,CAAqD,eAArD;AACH;AACJ;;AAED,iBAAK7C,GAAL,CAAS+B,OAAT,CAAiB,yBAAjB,EAA4C,CAAC9C,KAAD,CAA5C;AACH,SAnED;;AAqEA;;;;AAIAW,eAAOuB,SAAP,CAAiBxC,OAAjB,GAA2B,UAASM,KAAT,EAAgB;AACvC,gBAAI+D,IAAI,CAAR;AACA,gBAAIqC,IAAI,CAAR;AACA,iBAAKrC,IAAI,CAAT,EAAYA,KAAK,KAAK/C,CAAL,CAAOtB,OAAxB,EAAiCqE,GAAjC,EAAsC;AAClC,oBAAIA,KAAK,KAAKnC,MAAL,CAAYR,MAAZ,GAAqBpB,KAA9B,EAAqC;AACjC;AACH;;AAED,qBAAKqG,WAAL,CAAiBrG,QAAQ+D,CAAzB,EAA4B,KAA5B,EAAmC,CAAnC;AACH;;AAED,iBAAKqC,IAAI,CAAT,EAAYA,KAAK,KAAKpF,CAAL,CAAOtB,OAAxB,EAAiC0G,GAAjC,EAAsC;AAClC,oBAAIpG,QAAQoG,CAAR,GAAY,CAAhB,EAAmB;AACf;AACH;;AAED,qBAAKC,WAAL,CAAiBrG,QAAQoG,CAAzB,EAA4B,KAA5B,EAAmC,CAAnC;AACH;AACJ,SAlBD;;AAoBA;;;;;;AAMAzF,eAAOuB,SAAP,CAAiBmE,WAAjB,GAA+B,UAASrG,KAAT,EAAgBsG,GAAhB,EAAqBC,KAArB,EAA4B;;AAEvD,gBAAIpE,QAAQ,IAAZ;AACA,gBAAIqE,aAAa,KAAjB;AACA,gBAAIC,KAAJ;AACA,gBAAIC,IAAJ;AACA,gBAAIC,OAAJ;AACA,gBAAIC,OAAJ;AACA,gBAAIC,MAAJ;AACA,gBAAIC,KAAJ;AACA,gBAAIC,mBAAmB,SAAnBA,gBAAmB,CAASC,OAAT,EAAkB;AACrC,oBAAIC,UAAU,EAAd;AACA,oBAAIC,QAAQ,EAAZ;AACA,qBAAK,IAAInD,IAAI,CAAb,EAAgBA,IAAIiD,QAAQ5F,MAA5B,EAAoC2C,GAApC,EAAyC;AACrC,wBAAIoD,QAAQH,QAAQjD,CAAR,EAAWrB,KAAX,CAAiB,GAAjB,CAAZ;;AAEA;AACA,wBAAIyE,MAAM,CAAN,MAAa,EAAjB,EAAqB;AACjBA,8BAAMC,MAAN,CAAa,CAAb,EAAgB,CAAhB;AACH;;AAEDF,0BAAMG,IAAN,CAAWF,MAAM,CAAN,CAAX;AACAF,4BAAQI,IAAR,CAAaF,MAAM,CAAN,CAAb;AACH;;AAED,oBAAIG,SAASpJ,EAAEmE,MAAF,EAAU5D,KAAV,EAAb;AACA,qBAAK,IAAI2H,IAAI,CAAb,EAAgBA,IAAIa,QAAQ7F,MAA5B,EAAoCgF,GAApC,EAAyC;AACrC,wBAAI3D,SAASwE,QAAQb,CAAR,CAAT,EAAqB,EAArB,IAA2BkB,MAA/B,EAAuC;AACnCZ,+BAAOQ,MAAMd,CAAN,CAAP;AACA;AACH;AACJ;AACJ,aAtBD;;AAwBA,gBAAIjE,MAAMnB,CAAN,CAAQR,OAAZ,EAAqB;;AAEjB,oBAAI2B,MAAMnB,CAAN,CAAQP,SAAR,CAAkBT,KAAlB,EAAyBuH,MAA7B,EAAqC;AACjCf,iCAAa,IAAb;AACAG,8BAAUxE,MAAMnB,CAAN,CAAQP,SAAR,CAAkBT,KAAlB,EAAyBuH,MAAnC;AACH;;AAEDT,wBAAQ3E,MAAMnB,CAAN,CAAQP,SAAR,CAAkBT,KAAlB,EAAyBkF,IAAjC;AACAwB,uBAAOvE,MAAMnB,CAAN,CAAQP,SAAR,CAAkBT,KAAlB,EAAyBiF,GAAhC;;AAEA,oBAAI9C,MAAMnB,CAAN,CAAQP,SAAR,CAAkBT,KAAlB,EAAyBwH,UAA7B,EAAyC;AACrC,wBAAIC,YAAYtF,MAAMnB,CAAN,CAAQP,SAAR,CAAkBT,KAAlB,EAAyBwH,UAAzB,CAAoC9E,KAApC,CAA0C,GAA1C,CAAhB;AACAqE,qCAAiBU,SAAjB;AACH;;AAEDb,0BAAUzE,MAAMnB,CAAN,CAAQP,SAAR,CAAkBT,KAAlB,EAAyB0H,MAAnC;AACAb,yBAAS1E,MAAMnB,CAAN,CAAQP,SAAR,CAAkBT,KAAlB,EAAyB2H,KAAlC;AAEH,aAlBD,MAkBO;;AAEH,oBAAIxF,MAAMP,MAAN,CAAayC,EAAb,CAAgBrE,KAAhB,EAAuBmF,IAAvB,CAA4B,aAA5B,CAAJ,EAAgD;AAC5CqB,iCAAa,IAAb;AACAG,8BAAUxE,MAAMP,MAAN,CAAayC,EAAb,CAAgBrE,KAAhB,EAAuBmF,IAAvB,CAA4B,aAA5B,CAAV;AACH;;AAED2B,wBAAQ3E,MAAMP,MAAN,CAAayC,EAAb,CAAgBrE,KAAhB,EAAuBmF,IAAvB,CAA4B,WAA5B,CAAR;AACAuB,uBAAOvE,MAAMP,MAAN,CAAayC,EAAb,CAAgBrE,KAAhB,EAAuBmF,IAAvB,CAA4B,MAA5B,KAAuChD,MAAMP,MAAN,CAAayC,EAAb,CAAgBrE,KAAhB,EAAuBmF,IAAvB,CAA4B,UAA5B,CAA9C;;AAEA,oBAAIhD,MAAMP,MAAN,CAAayC,EAAb,CAAgBrE,KAAhB,EAAuBmF,IAAvB,CAA4B,iBAA5B,CAAJ,EAAoD;AAChD,wBAAI6B,UAAU7E,MAAMP,MAAN,CAAayC,EAAb,CAAgBrE,KAAhB,EAAuBmF,IAAvB,CAA4B,iBAA5B,EAA+CzC,KAA/C,CAAqD,GAArD,CAAd;AACAqE,qCAAiBC,OAAjB;AACH;;AAEDJ,0BAAUzE,MAAMP,MAAN,CAAayC,EAAb,CAAgBrE,KAAhB,EAAuBmF,IAAvB,CAA4B,aAA5B,CAAV;AACA0B,yBAAS1E,MAAMP,MAAN,CAAayC,EAAb,CAAgBrE,KAAhB,EAAuBmF,IAAvB,CAA4B,YAA5B,CAAT;AAEH;;AAED;;AAEA,gBAAIyC,SAAS,KAAb;AACA,gBAAIzF,MAAMnB,CAAN,CAAQR,OAAZ,EAAqB;AACjB,oBAAI2B,MAAMnB,CAAN,CAAQP,SAAR,CAAkBT,KAAlB,EAAyB4H,MAA7B,EAAqC;AACjCA,6BAAS,IAAT;AACH;AACJ,aAJD,MAIO;AACH,oBAAIzF,MAAMP,MAAN,CAAayC,EAAb,CAAgBrE,KAAhB,EAAuBmF,IAAvB,CAA4B,aAA5B,MAA+C,MAAnD,EAA2D;AACvDyC,6BAAS,IAAT;AACH;AACJ;;AAED,gBAAIC,WAAW1F,MAAM6C,OAAN,CAAc0B,IAAd,EAAoB1G,KAApB,CAAf;AACA,gBAAI,CAACmC,MAAMJ,MAAN,CAAasC,EAAb,CAAgBrE,KAAhB,EAAuB2C,QAAvB,CAAgC,WAAhC,CAAL,EAAmD;AAC/C,oBAAIiF,MAAJ,EAAY;AACRzF,0BAAMJ,MAAN,CAAasC,EAAb,CAAgBrE,KAAhB,EAAuB8H,OAAvB,CAA+B,+DAA+D3F,MAAMnB,CAAN,CAAQf,cAAvE,GAAwF,yEAAxF,GAAoKyG,IAApK,GAA2K,iDAA1M;AACH,iBAFD,MAEO,IAAIF,UAAJ,EAAgB;AACnB,wBAAIuB,aAAa,EAAjB;AACA,wBAAIF,YAAYA,SAAStC,OAAzB,EAAkC;AAC9BwC,qCAAa,gBAAb;AACH,qBAFD,MAEO,IAAIF,YAAYA,SAASpC,KAAzB,EAAgC;AACnCsC,qCAAa,cAAb;AACH,qBAFM,MAEA;AACHA,qCAAa,cAAb;AACH;;AAED5F,0BAAMJ,MAAN,CAAasC,EAAb,CAAgBrE,KAAhB,EAAuB8H,OAAvB,CAA+B,+BAA+BC,UAA/B,GAA4C,wGAA5C,GAAuJpB,OAAvJ,GAAiK,kBAAhM;AAEH,iBAZM,MAYA,IAAIkB,QAAJ,EAAc;AACjB1F,0BAAMJ,MAAN,CAAasC,EAAb,CAAgBrE,KAAhB,EAAuB8H,OAAvB,CAA+B,gEAA/B;AACA3F,0BAAMpB,GAAN,CAAU+B,OAAV,CAAkB,aAAlB,EAAiC,CAAC9C,KAAD,EAAQ0G,IAAR,EAAcI,KAAd,CAAjC;AACH,iBAHM,MAGA;AACH3E,0BAAMJ,MAAN,CAAasC,EAAb,CAAgBrE,KAAhB,EAAuB8H,OAAvB,CAA+B,mEAAmEpB,IAAnE,GAA0E,YAAzG;AACH;;AAEDvE,sBAAMpB,GAAN,CAAU+B,OAAV,CAAkB,sBAAlB,EAA0C,CAAC9C,KAAD,CAA1C;;AAEAyG,wBAAQtE,MAAMJ,MAAN,CAAasC,EAAb,CAAgBrE,KAAhB,EAAuB6B,IAAvB,CAA4B,YAA5B,CAAR;AACA,oBAAIgF,MAAJ,EAAY;AACRJ,0BAAMtB,IAAN,CAAW,OAAX,EAAoB0B,MAApB;AACH;;AAED,oBAAID,OAAJ,EAAa;AACTH,0BAAMtB,IAAN,CAAW,QAAX,EAAqByB,OAArB;AACA,wBAAI;AACAoB,oCAAY;AACRC,sCAAU,CAACxB,MAAM,CAAN,CAAD;AADF,yBAAZ;AAGH,qBAJD,CAIE,OAAOyB,CAAP,EAAU;AACR7C,gCAAQ8C,IAAR,CAAa,+IAAb;AACH;AACJ;;AAED,oBAAI,KAAKnH,CAAL,CAAOxB,eAAP,KAA2B,cAA/B,EAA+C;AAC3C2C,0BAAMyD,OAAN,CAAc5F,KAAd;AACH;;AAEDmC,sBAAMJ,MAAN,CAAasC,EAAb,CAAgBrE,KAAhB,EAAuBtB,QAAvB,CAAgC,WAAhC;AACH;;AAEDyD,kBAAMJ,MAAN,CAAasC,EAAb,CAAgBrE,KAAhB,EAAuB6B,IAAvB,CAA4B,YAA5B,EAA0CkB,EAA1C,CAA6C,kBAA7C,EAAiE,YAAW;;AAExE;AACA,oBAAIqF,SAAS,CAAb;;AAEA;AACA;AACA,oBAAI7B,SAAS,CAACrI,EAAE,MAAF,EAAUyE,QAAV,CAAmB,cAAnB,CAAd,EAAkD;AAC9CyF,6BAAS7B,KAAT;AACH;;AAED3D,2BAAW,YAAW;AAClBT,0BAAMJ,MAAN,CAAasC,EAAb,CAAgBrE,KAAhB,EAAuBtB,QAAvB,CAAgC,aAAhC;AACAyD,0BAAMpB,GAAN,CAAU+B,OAAV,CAAkB,oBAAlB,EAAwC,CAAC9C,KAAD,EAAQuG,SAAS,CAAjB,CAAxC;AACH,iBAHD,EAGG6B,MAHH;AAKH,aAhBD;;AAkBA;AACA,gBAAIP,YAAYA,SAASzC,KAArB,IAA8B,CAACoB,UAAnC,EAA+C;AAC3CrE,sBAAMJ,MAAN,CAAasC,EAAb,CAAgBrE,KAAhB,EAAuBtB,QAAvB,CAAgC,aAAhC;AACH;;AAED,gBAAI4H,QAAQ,IAAZ,EAAkB;AACd,oBAAI,CAACnE,MAAMJ,MAAN,CAAasC,EAAb,CAAgBrE,KAAhB,EAAuB2C,QAAvB,CAAgC,aAAhC,CAAL,EAAqD;AACjDR,0BAAMJ,MAAN,CAAasC,EAAb,CAAgBrE,KAAhB,EAAuB6B,IAAvB,CAA4B,YAA5B,EAA0CkB,EAA1C,CAA6C,kBAA7C,EAAiE,YAAW;AACxEZ,8BAAMzC,OAAN,CAAcM,KAAd;AACH,qBAFD;AAGH,iBAJD,MAIO;AACHmC,0BAAMzC,OAAN,CAAcM,KAAd;AACH;AACJ;;AAED;AACH,SAvKD;;AAyKA;;;;;;;;;;;;;;;;;;;;AAqBAW,eAAOuB,SAAP,CAAiBuB,KAAjB,GAAyB,UAASzD,KAAT,EAAgBqI,SAAhB,EAA2BC,SAA3B,EAAsCC,SAAtC,EAAiD;;AAEtE,gBAAIC,aAAa,KAAKxG,MAAL,CAAYH,IAAZ,CAAiB,aAAjB,EAAgC7B,KAAhC,EAAjB;AACA,gBAAImC,QAAQ,IAAZ;;AAEA;AACA;AACA,gBAAIA,MAAMb,UAAN,IAAqBkH,eAAexI,KAAxC,EAAgD;AAC5C;AACH;;AAED,gBAAIyI,UAAU,KAAK1G,MAAL,CAAYX,MAA1B;AACA,gBAAIsH,QAAQvG,MAAMb,UAAN,GAAmB,KAAKN,CAAL,CAAOzC,KAA1B,GAAkC,CAA9C;;AAEA,gBAAI,CAAC4D,MAAMZ,MAAX,EAAmB;;AAEf,oBAAI,KAAKP,CAAL,CAAOd,QAAX,EAAqB;AACjB,wBAAIwG,IAAJ;AACA,wBAAIvE,MAAMnB,CAAN,CAAQR,OAAZ,EAAqB;AACjBkG,+BAAOvE,MAAMnB,CAAN,CAAQP,SAAR,CAAkBT,KAAlB,EAAyB2I,WAAzB,KAAyC,KAAzC,KAAmDxG,MAAMnB,CAAN,CAAQP,SAAR,CAAkBT,KAAlB,EAAyB2I,WAAzB,IAAwCxG,MAAMnB,CAAN,CAAQP,SAAR,CAAkBT,KAAlB,EAAyBiF,GAApH,CAAP;AACH,qBAFD,MAEO;AACHyB,+BAAOvE,MAAMP,MAAN,CAAayC,EAAb,CAAgBrE,KAAhB,EAAuBmF,IAAvB,CAA4B,mBAA5B,MAAqD,OAArD,KAAiEhD,MAAMP,MAAN,CAAayC,EAAb,CAAgBrE,KAAhB,EAAuBmF,IAAvB,CAA4B,mBAA5B,KAAoDhD,MAAMP,MAAN,CAAayC,EAAb,CAAgBrE,KAAhB,EAAuBmF,IAAvB,CAA4B,MAA5B,CAApD,IAA2FhD,MAAMP,MAAN,CAAayC,EAAb,CAAgBrE,KAAhB,EAAuBmF,IAAvB,CAA4B,UAA5B,CAA5J,CAAP;AAEH;;AAED,wBAAIuB,IAAJ,EAAU;AACNxI,0BAAE,cAAF,EAAkBiH,IAAlB,CAAuB,MAAvB,EAA+BuB,IAA/B;AACAvE,8BAAMH,MAAN,CAAa4B,WAAb,CAAyB,kBAAzB;AACH,qBAHD,MAGO;AACHzB,8BAAMH,MAAN,CAAatD,QAAb,CAAsB,kBAAtB;AACH;AACJ;;AAED,qBAAKqC,GAAL,CAAS+B,OAAT,CAAiB,kBAAjB,EAAqC,CAAC0F,UAAD,EAAaxI,KAAb,EAAoBqI,SAApB,EAA+BC,SAA/B,CAArC;;AAEAnG,sBAAMZ,MAAN,GAAe,IAAf;;AAEAsC,6BAAa1B,MAAMX,cAAnB;;AAEA;AACA,oBAAI,KAAKR,CAAL,CAAOxB,eAAP,KAA2B,cAA/B,EAA+C;;AAE3C;AACAoD,+BAAW,YAAW;AAClBT,8BAAMyD,OAAN,CAAc5F,KAAd;AACH,qBAFD,EAEG0I,KAFH;AAGH;;AAED,qBAAKE,YAAL,CAAkB5I,KAAlB;;AAEA,oBAAI,CAACuI,SAAL,EAAgB;AACZ,wBAAIvI,QAAQwI,UAAZ,EAAwB;AACpBD,oCAAY,MAAZ;AACH,qBAFD,MAEO,IAAIvI,QAAQwI,UAAZ,EAAwB;AAC3BD,oCAAY,MAAZ;AACH;AACJ;;AAED,oBAAI,CAACF,SAAL,EAAgB;;AAEZ;AACAlG,0BAAMH,MAAN,CAAatD,QAAb,CAAsB,aAAtB;;AAEA,yBAAKqD,MAAL,CAAY6B,WAAZ,CAAwB,6BAAxB;;AAEA,wBAAI2E,cAAc,MAAlB,EAA0B;;AAEtB;AACA,6BAAKxG,MAAL,CAAYsC,EAAZ,CAAerE,KAAf,EAAsBtB,QAAtB,CAA+B,eAA/B;AACA,6BAAKqD,MAAL,CAAYsC,EAAZ,CAAemE,UAAf,EAA2B9J,QAA3B,CAAoC,eAApC;AACH,qBALD,MAKO;;AAEH;AACA,6BAAKqD,MAAL,CAAYsC,EAAZ,CAAerE,KAAf,EAAsBtB,QAAtB,CAA+B,eAA/B;AACA,6BAAKqD,MAAL,CAAYsC,EAAZ,CAAemE,UAAf,EAA2B9J,QAA3B,CAAoC,eAApC;AACH;;AAED;AACAkE,+BAAW,YAAW;AAClBT,8BAAMJ,MAAN,CAAa6B,WAAb,CAAyB,YAAzB;;AAEA;AACAzB,8BAAMJ,MAAN,CAAasC,EAAb,CAAgBrE,KAAhB,EAAuBtB,QAAvB,CAAgC,YAAhC;;AAEA;AACAyD,8BAAMH,MAAN,CAAa4B,WAAb,CAAyB,aAAzB;AACH,qBARD,EAQG,EARH;AASH,iBA7BD,MA6BO;;AAEH,yBAAK7B,MAAL,CAAY6B,WAAZ,CAAwB,wCAAxB;AACA,wBAAIiF,SAAJ;AACA,wBAAIC,SAAJ;AACA,wBAAIL,UAAU,CAAd,EAAiB;AACbI,oCAAY7I,QAAQ,CAApB;AACA8I,oCAAY9I,QAAQ,CAApB;;AAEA,4BAAKA,UAAU,CAAX,IAAkBwI,eAAeC,UAAU,CAA/C,EAAmD;;AAE/C;AACAK,wCAAY,CAAZ;AACAD,wCAAYJ,UAAU,CAAtB;AACH,yBALD,MAKO,IAAKzI,UAAUyI,UAAU,CAArB,IAA4BD,eAAe,CAA/C,EAAmD;;AAEtD;AACAM,wCAAY,CAAZ;AACAD,wCAAYJ,UAAU,CAAtB;AACH;AAEJ,qBAhBD,MAgBO;AACHI,oCAAY,CAAZ;AACAC,oCAAY,CAAZ;AACH;;AAED,wBAAIP,cAAc,MAAlB,EAA0B;AACtBpG,8BAAMJ,MAAN,CAAasC,EAAb,CAAgByE,SAAhB,EAA2BpK,QAA3B,CAAoC,eAApC;AACH,qBAFD,MAEO;AACHyD,8BAAMJ,MAAN,CAAasC,EAAb,CAAgBwE,SAAhB,EAA2BnK,QAA3B,CAAoC,eAApC;AACH;;AAEDyD,0BAAMJ,MAAN,CAAasC,EAAb,CAAgBrE,KAAhB,EAAuBtB,QAAvB,CAAgC,YAAhC;AACH;;AAED,oBAAIyD,MAAMb,UAAV,EAAsB;AAClBsB,+BAAW,YAAW;AAClBT,8BAAMkE,WAAN,CAAkBrG,KAAlB,EAAyB,IAAzB,EAA+B,CAA/B;AACH,qBAFD,EAEG,KAAKgB,CAAL,CAAOzC,KAAP,GAAe,EAFlB;;AAIAqE,+BAAW,YAAW;AAClBT,8BAAMZ,MAAN,GAAe,KAAf;AACAY,8BAAMpB,GAAN,CAAU+B,OAAV,CAAkB,iBAAlB,EAAqC,CAAC0F,UAAD,EAAaxI,KAAb,EAAoBqI,SAApB,EAA+BC,SAA/B,CAArC;AACH,qBAHD,EAGG,KAAKtH,CAAL,CAAOzC,KAHV;AAKH,iBAVD,MAUO;AACH4D,0BAAMkE,WAAN,CAAkBrG,KAAlB,EAAyB,IAAzB,EAA+BmC,MAAMnB,CAAN,CAAQpC,gBAAvC;;AAEAuD,0BAAMZ,MAAN,GAAe,KAAf;AACAY,0BAAMpB,GAAN,CAAU+B,OAAV,CAAkB,iBAAlB,EAAqC,CAAC0F,UAAD,EAAaxI,KAAb,EAAoBqI,SAApB,EAA+BC,SAA/B,CAArC;AACH;;AAEDnG,sBAAMb,UAAN,GAAmB,IAAnB;;AAEA,oBAAI,KAAKN,CAAL,CAAOb,OAAX,EAAoB;AAChBjC,sBAAE,qBAAF,EAAyB6K,IAAzB,CAA8B/I,QAAQ,CAAtC;AACH;AAEJ;AAEJ,SAnJD;;AAqJA;;;;AAIAW,eAAOuB,SAAP,CAAiB8G,aAAjB,GAAiC,UAASX,SAAT,EAAoB;AACjD,gBAAIlG,QAAQ,IAAZ;AACA,gBAAI8G,QAAQ9G,MAAMnB,CAAN,CAAQhC,IAApB;AACA,gBAAIqJ,aAAalG,MAAMJ,MAAN,CAAaX,MAAb,GAAsB,CAAvC,EAA0C;AACtC6H,wBAAQ,KAAR;AACH;;AAED,gBAAI,CAAC9G,MAAMZ,MAAX,EAAmB;AACf,oBAAKY,MAAMnC,KAAN,GAAc,CAAf,GAAoBmC,MAAMJ,MAAN,CAAaX,MAArC,EAA6C;AACzCe,0BAAMnC,KAAN;AACAmC,0BAAMpB,GAAN,CAAU+B,OAAV,CAAkB,sBAAlB,EAA0C,CAACX,MAAMnC,KAAP,CAA1C;AACAmC,0BAAMsB,KAAN,CAAYtB,MAAMnC,KAAlB,EAAyBqI,SAAzB,EAAoC,KAApC,EAA2C,MAA3C;AACH,iBAJD,MAIO;AACH,wBAAIY,KAAJ,EAAW;AACP9G,8BAAMnC,KAAN,GAAc,CAAd;AACAmC,8BAAMpB,GAAN,CAAU+B,OAAV,CAAkB,sBAAlB,EAA0C,CAACX,MAAMnC,KAAP,CAA1C;AACAmC,8BAAMsB,KAAN,CAAYtB,MAAMnC,KAAlB,EAAyBqI,SAAzB,EAAoC,KAApC,EAA2C,MAA3C;AACH,qBAJD,MAIO,IAAIlG,MAAMnB,CAAN,CAAQ5B,iBAAR,IAA6B,CAACiJ,SAAlC,EAA6C;AAChDlG,8BAAMH,MAAN,CAAatD,QAAb,CAAsB,cAAtB;AACAkE,mCAAW,YAAW;AAClBT,kCAAMH,MAAN,CAAa4B,WAAb,CAAyB,cAAzB;AACH,yBAFD,EAEG,GAFH;AAGH;AACJ;AACJ;AACJ,SAzBD;;AA2BA;;;;AAIAjD,eAAOuB,SAAP,CAAiBgH,aAAjB,GAAiC,UAASb,SAAT,EAAoB;AACjD,gBAAIlG,QAAQ,IAAZ;AACA,gBAAI8G,QAAQ9G,MAAMnB,CAAN,CAAQhC,IAApB;AACA,gBAAIqJ,aAAalG,MAAMJ,MAAN,CAAaX,MAAb,GAAsB,CAAvC,EAA0C;AACtC6H,wBAAQ,KAAR;AACH;;AAED,gBAAI,CAAC9G,MAAMZ,MAAX,EAAmB;AACf,oBAAIY,MAAMnC,KAAN,GAAc,CAAlB,EAAqB;AACjBmC,0BAAMnC,KAAN;AACAmC,0BAAMpB,GAAN,CAAU+B,OAAV,CAAkB,sBAAlB,EAA0C,CAACX,MAAMnC,KAAP,EAAcqI,SAAd,CAA1C;AACAlG,0BAAMsB,KAAN,CAAYtB,MAAMnC,KAAlB,EAAyBqI,SAAzB,EAAoC,KAApC,EAA2C,MAA3C;AACH,iBAJD,MAIO;AACH,wBAAIY,KAAJ,EAAW;AACP9G,8BAAMnC,KAAN,GAAcmC,MAAMP,MAAN,CAAaR,MAAb,GAAsB,CAApC;AACAe,8BAAMpB,GAAN,CAAU+B,OAAV,CAAkB,sBAAlB,EAA0C,CAACX,MAAMnC,KAAP,EAAcqI,SAAd,CAA1C;AACAlG,8BAAMsB,KAAN,CAAYtB,MAAMnC,KAAlB,EAAyBqI,SAAzB,EAAoC,KAApC,EAA2C,MAA3C;AACH,qBAJD,MAIO,IAAIlG,MAAMnB,CAAN,CAAQ5B,iBAAR,IAA6B,CAACiJ,SAAlC,EAA6C;AAChDlG,8BAAMH,MAAN,CAAatD,QAAb,CAAsB,aAAtB;AACAkE,mCAAW,YAAW;AAClBT,kCAAMH,MAAN,CAAa4B,WAAb,CAAyB,aAAzB;AACH,yBAFD,EAEG,GAFH;AAGH;AACJ;AACJ;AACJ,SAzBD;;AA2BAjD,eAAOuB,SAAP,CAAiBhD,QAAjB,GAA4B,YAAW;AACnC,gBAAIiD,QAAQ,IAAZ;AACA,gBAAI,KAAKP,MAAL,CAAYR,MAAZ,GAAqB,CAAzB,EAA4B;AACxBlD,kBAAEmE,MAAF,EAAUU,EAAV,CAAa,UAAb,EAAyB,UAASmF,CAAT,EAAY;AACjC,wBAAI/F,MAAMP,MAAN,CAAaR,MAAb,GAAsB,CAA1B,EAA6B;AACzB,4BAAI8G,EAAEiB,OAAF,KAAc,EAAlB,EAAsB;AAClBjB,8BAAEjF,cAAF;AACAd,kCAAM+G,aAAN;AACH;;AAED,4BAAIhB,EAAEiB,OAAF,KAAc,EAAlB,EAAsB;AAClBjB,8BAAEjF,cAAF;AACAd,kCAAM6G,aAAN;AACH;AACJ;AACJ,iBAZD;AAaH;;AAED9K,cAAEmE,MAAF,EAAUU,EAAV,CAAa,YAAb,EAA2B,UAASmF,CAAT,EAAY;AACnC,oBAAI/F,MAAMnB,CAAN,CAAQ/B,MAAR,KAAmB,IAAnB,IAA2BiJ,EAAEiB,OAAF,KAAc,EAA7C,EAAiD;AAC7CjB,sBAAEjF,cAAF;AACA,wBAAI,CAACd,MAAMH,MAAN,CAAaW,QAAb,CAAsB,eAAtB,CAAL,EAA6C;AACzCR,8BAAMiH,OAAN;AACH,qBAFD,MAEO;AACHjH,8BAAMH,MAAN,CAAa4B,WAAb,CAAyB,eAAzB;AACH;AACJ;AACJ,aATD;AAUH,SA5BD;;AA8BAjD,eAAOuB,SAAP,CAAiBwB,KAAjB,GAAyB,YAAW;AAChC,gBAAIvB,QAAQ,IAAZ;AACA,iBAAKH,MAAL,CAAYH,IAAZ,CAAiB,UAAjB,EAA6BkB,EAA7B,CAAgC,UAAhC,EAA4C,YAAW;AACnDZ,sBAAM+G,aAAN;AACH,aAFD;;AAIA,iBAAKlH,MAAL,CAAYH,IAAZ,CAAiB,UAAjB,EAA6BkB,EAA7B,CAAgC,UAAhC,EAA4C,YAAW;AACnDZ,sBAAM6G,aAAN;AACH,aAFD;AAGH,SATD;;AAWArI,eAAOuB,SAAP,CAAiB0G,YAAjB,GAAgC,UAAS5I,KAAT,EAAgB;;AAE5C;AACA,gBAAI,CAAC,KAAKgB,CAAL,CAAOhC,IAAR,IAAgB,KAAKgC,CAAL,CAAO3B,gBAA3B,EAA6C;AACzC,oBAAKW,QAAQ,CAAT,GAAc,KAAK+B,MAAL,CAAYX,MAA9B,EAAsC;AAClC,yBAAKY,MAAL,CAAYH,IAAZ,CAAiB,UAAjB,EAA6BwH,UAA7B,CAAwC,UAAxC,EAAoDzF,WAApD,CAAgE,UAAhE;AACH,iBAFD,MAEO;AACH,yBAAK5B,MAAL,CAAYH,IAAZ,CAAiB,UAAjB,EAA6BsD,IAA7B,CAAkC,UAAlC,EAA8C,UAA9C,EAA0DzG,QAA1D,CAAmE,UAAnE;AACH;;AAED,oBAAIsB,QAAQ,CAAZ,EAAe;AACX,yBAAKgC,MAAL,CAAYH,IAAZ,CAAiB,UAAjB,EAA6BwH,UAA7B,CAAwC,UAAxC,EAAoDzF,WAApD,CAAgE,UAAhE;AACH,iBAFD,MAEO;AACH,yBAAK5B,MAAL,CAAYH,IAAZ,CAAiB,UAAjB,EAA6BsD,IAA7B,CAAkC,UAAlC,EAA8C,UAA9C,EAA0DzG,QAA1D,CAAmE,UAAnE;AACH;AACJ;AACJ,SAhBD;;AAkBAiC,eAAOuB,SAAP,CAAiBoH,YAAjB,GAAgC,UAASvI,GAAT,EAAcwI,MAAd,EAAsBC,MAAtB,EAA8B;AAC1D;AACA,gBAAI,KAAKxI,CAAL,CAAOlC,OAAX,EAAoB;AAChBiC,oBAAIoD,GAAJ,CAAQ,MAAR,EAAgBoF,MAAhB;AACH,aAFD,MAEO;AACHxI,oBAAIoD,GAAJ,CAAQ;AACJsF,+BAAW,iBAAkBF,MAAlB,GAA4B,MAA5B,GAAqCC,MAArC,GAA8C;AADrD,iBAAR;AAGH;AACJ,SATD;;AAWA7I,eAAOuB,SAAP,CAAiBwH,SAAjB,GAA6B,UAASC,WAAT,EAAsBC,SAAtB,EAAiC;;AAE1D,gBAAIC,WAAWD,YAAYD,WAA3B;;AAEA,gBAAIG,KAAKC,GAAL,CAASF,QAAT,IAAqB,EAAzB,EAA6B;AACzB;AACA,qBAAK7H,MAAL,CAAYtD,QAAZ,CAAqB,aAArB;;AAEA;AACA,qBAAK4K,YAAL,CAAkB,KAAKvH,MAAL,CAAYsC,EAAZ,CAAe,KAAKrE,KAApB,CAAlB,EAA8C6J,QAA9C,EAAwD,CAAxD;;AAEA;AACA,qBAAKP,YAAL,CAAkBpL,EAAE,gBAAF,CAAlB,EAAuC,CAAC,KAAK6D,MAAL,CAAYsC,EAAZ,CAAe,KAAKrE,KAApB,EAA2BvB,KAA3B,EAAD,GAAsCoL,QAA7E,EAAuF,CAAvF;AACA,qBAAKP,YAAL,CAAkBpL,EAAE,gBAAF,CAAlB,EAAuC,KAAK6D,MAAL,CAAYsC,EAAZ,CAAe,KAAKrE,KAApB,EAA2BvB,KAA3B,KAAqCoL,QAA5E,EAAsF,CAAtF;AACH;AACJ,SAfD;;AAiBAlJ,eAAOuB,SAAP,CAAiB8H,QAAjB,GAA4B,UAASH,QAAT,EAAmB;AAC3C,gBAAI1H,QAAQ,IAAZ;;AAEA;AACA,gBAAIA,MAAMnB,CAAN,CAAQ5C,IAAR,KAAiB,UAArB,EAAiC;AAC7B+D,sBAAMH,MAAN,CAAatD,QAAb,CAAsB,UAAtB;AACH;;AAED,iBAAKqD,MAAL,CAAYkI,GAAZ,CAAgB,6CAAhB,EAA+D9F,GAA/D,CAAmE,SAAnE,EAA8E,GAA9E;;AAEA;AACAvB,uBAAW,YAAW;AAClBT,sBAAMH,MAAN,CAAa4B,WAAb,CAAyB,aAAzB;AACA,oBAAKiG,WAAW,CAAZ,IAAmBC,KAAKC,GAAL,CAASF,QAAT,IAAqB1H,MAAMnB,CAAN,CAAQX,cAApD,EAAqE;AACjE8B,0BAAM6G,aAAN,CAAoB,IAApB;AACH,iBAFD,MAEO,IAAKa,WAAW,CAAZ,IAAmBC,KAAKC,GAAL,CAASF,QAAT,IAAqB1H,MAAMnB,CAAN,CAAQX,cAApD,EAAqE;AACxE8B,0BAAM+G,aAAN,CAAoB,IAApB;AACH,iBAFM,MAEA,IAAIY,KAAKC,GAAL,CAASF,QAAT,IAAqB,CAAzB,EAA4B;;AAE/B;AACA1H,0BAAMpB,GAAN,CAAU+B,OAAV,CAAkB,iBAAlB;AACH;;AAEDX,sBAAMJ,MAAN,CAAasH,UAAb,CAAwB,OAAxB;AACH,aAbD;;AAeA;AACAzG,uBAAW,YAAW;AAClB,oBAAI,CAACT,MAAMH,MAAN,CAAaW,QAAb,CAAsB,aAAtB,CAAD,IAAyCR,MAAMnB,CAAN,CAAQ5C,IAAR,KAAiB,UAA9D,EAA0E;AACtE+D,0BAAMH,MAAN,CAAa4B,WAAb,CAAyB,UAAzB;AACH;AACJ,aAJD,EAIGzB,MAAMnB,CAAN,CAAQzC,KAAR,GAAgB,GAJnB;AAMH,SAjCD;;AAmCAoC,eAAOuB,SAAP,CAAiB5B,WAAjB,GAA+B,YAAW;AACtC,gBAAI6B,QAAQ,IAAZ;AACA,gBAAIwH,cAAc,CAAlB;AACA,gBAAIC,YAAY,CAAhB;AACA,gBAAIM,UAAU,KAAd;;AAEA,gBAAI/H,MAAMnB,CAAN,CAAQV,WAAR,IAAuB6B,MAAMmC,KAAN,EAA3B,EAA0C;;AAEtCnC,sBAAMJ,MAAN,CAAagB,EAAb,CAAgB,eAAhB,EAAiC,UAASmF,CAAT,EAAY;AACzC,wBAAI,CAAC/F,MAAMH,MAAN,CAAaW,QAAb,CAAsB,WAAtB,CAAD,IAAuC,CAACR,MAAMZ,MAAlD,EAA0D;AACtD2G,0BAAEjF,cAAF;AACAd,8BAAMgI,gBAAN;AACAR,sCAAczB,EAAEkC,aAAF,CAAgBC,aAAhB,CAA8B,CAA9B,EAAiCC,KAA/C;AACH;AACJ,iBAND;;AAQAnI,sBAAMJ,MAAN,CAAagB,EAAb,CAAgB,cAAhB,EAAgC,UAASmF,CAAT,EAAY;AACxC,wBAAI,CAAC/F,MAAMH,MAAN,CAAaW,QAAb,CAAsB,WAAtB,CAAL,EAAyC;AACrCuF,0BAAEjF,cAAF;AACA2G,oCAAY1B,EAAEkC,aAAF,CAAgBC,aAAhB,CAA8B,CAA9B,EAAiCC,KAA7C;AACAnI,8BAAMuH,SAAN,CAAgBC,WAAhB,EAA6BC,SAA7B;AACAM,kCAAU,IAAV;AACH;AACJ,iBAPD;;AASA/H,sBAAMJ,MAAN,CAAagB,EAAb,CAAgB,aAAhB,EAA+B,YAAW;AACtC,wBAAI,CAACZ,MAAMH,MAAN,CAAaW,QAAb,CAAsB,WAAtB,CAAL,EAAyC;AACrC,4BAAIuH,OAAJ,EAAa;AACTA,sCAAU,KAAV;AACA/H,kCAAM6H,QAAN,CAAeJ,YAAYD,WAA3B;AACH,yBAHD,MAGO;AACHxH,kCAAMpB,GAAN,CAAU+B,OAAV,CAAkB,iBAAlB;AACH;AACJ;AACJ,iBATD;AAUH;AAEJ,SArCD;;AAuCAnC,eAAOuB,SAAP,CAAiB3B,UAAjB,GAA8B,YAAW;AACrC,gBAAI4B,QAAQ,IAAZ;AACA,gBAAIwH,cAAc,CAAlB;AACA,gBAAIC,YAAY,CAAhB;AACA,gBAAIW,YAAY,KAAhB;AACA,gBAAIL,UAAU,KAAd;AACA,gBAAI/H,MAAMnB,CAAN,CAAQT,UAAR,IAAsB4B,MAAMmC,KAAN,EAA1B,EAAyC;AACrCnC,sBAAMJ,MAAN,CAAagB,EAAb,CAAgB,cAAhB,EAAgC,UAASmF,CAAT,EAAY;AACxC;AACA,wBAAI,CAAC/F,MAAMH,MAAN,CAAaW,QAAb,CAAsB,WAAtB,CAAL,EAAyC;AACrC,4BAAIzE,EAAEgK,EAAEsC,MAAJ,EAAY7H,QAAZ,CAAqB,WAArB,KAAqCzE,EAAEgK,EAAEsC,MAAJ,EAAY7H,QAAZ,CAAqB,eAArB,CAAzC,EAAgF;AAC5EuF,8BAAEjF,cAAF;;AAEA,gCAAI,CAACd,MAAMZ,MAAX,EAAmB;AACfY,sCAAMgI,gBAAN;AACAR,8CAAczB,EAAEoC,KAAhB;AACAC,4CAAY,IAAZ;;AAEA;AACApI,sCAAMH,MAAN,CAAayI,UAAb,IAA2B,CAA3B;AACAtI,sCAAMH,MAAN,CAAayI,UAAb,IAA2B,CAA3B;;AAEA;;AAEAtI,sCAAMH,MAAN,CAAa4B,WAAb,CAAyB,SAAzB,EAAoClF,QAApC,CAA6C,aAA7C;;AAEAyD,sCAAMpB,GAAN,CAAU+B,OAAV,CAAkB,gBAAlB;AACH;AAEJ;AACJ;AACJ,iBAxBD;;AA0BA5E,kBAAEmE,MAAF,EAAUU,EAAV,CAAa,cAAb,EAA6B,UAASmF,CAAT,EAAY;AACrC,wBAAIqC,SAAJ,EAAe;AACXL,kCAAU,IAAV;AACAN,oCAAY1B,EAAEoC,KAAd;AACAnI,8BAAMuH,SAAN,CAAgBC,WAAhB,EAA6BC,SAA7B;AACAzH,8BAAMpB,GAAN,CAAU+B,OAAV,CAAkB,eAAlB;AACH;AACJ,iBAPD;;AASA5E,kBAAEmE,MAAF,EAAUU,EAAV,CAAa,YAAb,EAA2B,UAASmF,CAAT,EAAY;AACnC,wBAAIgC,OAAJ,EAAa;AACTA,kCAAU,KAAV;AACA/H,8BAAM6H,QAAN,CAAeJ,YAAYD,WAA3B;AACAxH,8BAAMpB,GAAN,CAAU+B,OAAV,CAAkB,cAAlB;AACH,qBAJD,MAIO,IAAI5E,EAAEgK,EAAEsC,MAAJ,EAAY7H,QAAZ,CAAqB,WAArB,KAAqCzE,EAAEgK,EAAEsC,MAAJ,EAAY7H,QAAZ,CAAqB,eAArB,CAAzC,EAAgF;AACnFR,8BAAMpB,GAAN,CAAU+B,OAAV,CAAkB,iBAAlB;AACH;;AAED;AACA,wBAAIyH,SAAJ,EAAe;AACXA,oCAAY,KAAZ;AACApI,8BAAMH,MAAN,CAAa4B,WAAb,CAAyB,aAAzB,EAAwClF,QAAxC,CAAiD,SAAjD;AACH;AACJ,iBAdD;AAgBH;AACJ,SA3DD;;AA6DAiC,eAAOuB,SAAP,CAAiBiI,gBAAjB,GAAoC,YAAW;AAC3C,gBAAIO,aAAa,KAAK1K,KAAL,GAAa,CAA9B;AACA,gBAAI2K,aAAa,KAAK3K,KAAL,GAAa,CAA9B;AACA,gBAAI,KAAKgB,CAAL,CAAOhC,IAAP,IAAe,KAAK+C,MAAL,CAAYX,MAAZ,GAAqB,CAAxC,EAA2C;AACvC,oBAAI,KAAKpB,KAAL,KAAe,CAAnB,EAAsB;AAClB2K,iCAAa,KAAK5I,MAAL,CAAYX,MAAZ,GAAqB,CAAlC;AACH,iBAFD,MAEO,IAAI,KAAKpB,KAAL,KAAe,KAAK+B,MAAL,CAAYX,MAAZ,GAAqB,CAAxC,EAA2C;AAC9CsJ,iCAAa,CAAb;AACH;AACJ;;AAED,iBAAK3I,MAAL,CAAY6B,WAAZ,CAAwB,6BAAxB;AACA,gBAAI+G,aAAa,CAAC,CAAlB,EAAqB;AACjB,qBAAK5I,MAAL,CAAYsC,EAAZ,CAAesG,UAAf,EAA2BjM,QAA3B,CAAoC,eAApC;AACH;;AAED,iBAAKqD,MAAL,CAAYsC,EAAZ,CAAeqG,UAAf,EAA2BhM,QAA3B,CAAoC,eAApC;AACH,SAjBD;;AAmBAiC,eAAOuB,SAAP,CAAiB5C,UAAjB,GAA8B,YAAW;AACrC,gBAAI6C,QAAQ,IAAZ;AACAA,kBAAMH,MAAN,CAAae,EAAb,CAAgB,eAAhB,EAAiC,UAASmF,CAAT,EAAY;;AAEzC,oBAAI,CAACA,EAAE0C,MAAP,EAAe;AACX;AACH;;AAED,oBAAI1C,EAAE0C,MAAF,GAAW,CAAf,EAAkB;AACdzI,0BAAM+G,aAAN;AACH,iBAFD,MAEO;AACH/G,0BAAM6G,aAAN;AACH;;AAEDd,kBAAEjF,cAAF;AACH,aAbD;AAeH,SAjBD;;AAmBAtC,eAAOuB,SAAP,CAAiByB,YAAjB,GAAgC,YAAW;;AAEvC,gBAAIxB,QAAQ,IAAZ;AACA,gBAAI0I,YAAY,KAAhB;AACA,iBAAK7I,MAAL,CAAYH,IAAZ,CAAiB,WAAjB,EAA8BkB,EAA9B,CAAiC,UAAjC,EAA6C,YAAW;AACpDZ,sBAAMiH,OAAN;AACH,aAFD;;AAIA,gBAAIjH,MAAMnB,CAAN,CAAQjC,QAAZ,EAAsB;;AAElB;AACA;AACAoD,sBAAMH,MAAN,CAAae,EAAb,CAAgB,cAAhB,EAAgC,UAASmF,CAAT,EAAY;;AAExC,wBAAIhK,EAAEgK,EAAEsC,MAAJ,EAAYM,EAAZ,CAAe,WAAf,KAA+B5M,EAAEgK,EAAEsC,MAAJ,EAAYM,EAAZ,CAAe,WAAf,CAA/B,IAA8D5M,EAAEgK,EAAEsC,MAAJ,EAAYM,EAAZ,CAAe,cAAf,CAAlE,EAAkG;AAC9FD,oCAAY,IAAZ;AACH,qBAFD,MAEO;AACHA,oCAAY,KAAZ;AACH;AAEJ,iBARD;;AAUA1I,sBAAMH,MAAN,CAAae,EAAb,CAAgB,YAAhB,EAA8B,UAASmF,CAAT,EAAY;;AAEtC,wBAAIhK,EAAEgK,EAAEsC,MAAJ,EAAYM,EAAZ,CAAe,WAAf,KAA+B5M,EAAEgK,EAAEsC,MAAJ,EAAYM,EAAZ,CAAe,WAAf,CAA/B,IAA8D5M,EAAEgK,EAAEsC,MAAJ,EAAYM,EAAZ,CAAe,cAAf,KAAkCD,SAApG,EAA+G;AAC3G,4BAAI,CAAC1I,MAAMH,MAAN,CAAaW,QAAb,CAAsB,aAAtB,CAAL,EAA2C;AACvCR,kCAAMiH,OAAN;AACH;AACJ;AAEJ,iBARD;AAUH;AAEJ,SAlCD;;AAoCAzI,eAAOuB,SAAP,CAAiBkH,OAAjB,GAA2B,UAAS2B,CAAT,EAAY;;AAEnC,gBAAI5I,QAAQ,IAAZ;;AAEA,gBAAI,CAAC4I,CAAL,EAAQ;AACJ5I,sBAAMpB,GAAN,CAAU+B,OAAV,CAAkB,kBAAlB;AACA5E,kBAAEmE,MAAF,EAAUoC,SAAV,CAAoBtC,MAAMqC,aAA1B;AACH;;AAGD;;;;;;;AAOA,gBAAIuG,CAAJ,EAAO;AACH,oBAAI,CAAC5I,MAAMnB,CAAN,CAAQR,OAAb,EAAsB;AAClB;AACA,yBAAKoB,MAAL,CAAYoJ,GAAZ,CAAgB,yBAAhB;AACH;;AAED9M,kBAAE+M,UAAF,CAAa9I,MAAMrB,EAAnB,EAAuB,cAAvB;AACH;;AAED;AACA,iBAAKC,GAAL,CAASiK,GAAT,CAAa,QAAb;;AAEA;AACA9M,cAAEmF,IAAF,CAAOnF,EAAEoF,EAAF,CAAKC,YAAL,CAAkBlC,OAAzB,EAAkC,UAASmC,GAAT,EAAc;AAC5C,oBAAIrB,MAAMd,OAAN,CAAcmC,GAAd,CAAJ,EAAwB;AACpBrB,0BAAMd,OAAN,CAAcmC,GAAd,EAAmB4F,OAAnB;AACH;AACJ,aAJD;;AAMA,iBAAK9H,UAAL,GAAkB,KAAlB;;AAEAuC,yBAAa1B,MAAMX,cAAnB;AACA,iBAAKA,cAAL,GAAsB,KAAtB;AACAtD,cAAEmE,MAAF,EAAU2I,GAAV,CAAc,KAAd;AACA9M,cAAE,MAAF,EAAU0F,WAAV,CAAsB,oBAAtB;;AAEA,gBAAIzB,MAAMH,MAAV,EAAkB;AACdG,sBAAMH,MAAN,CAAa4B,WAAb,CAAyB,YAAzB;AACH;;AAED1F,cAAE,cAAF,EAAkB0F,WAAlB,CAA8B,IAA9B;;AAEAhB,uBAAW,YAAW;AAClB,oBAAIT,MAAMH,MAAV,EAAkB;AACdG,0BAAMH,MAAN,CAAakJ,MAAb;AACH;;AAEDhN,kBAAE,cAAF,EAAkBgN,MAAlB;;AAEA,oBAAI,CAACH,CAAL,EAAQ;AACJ5I,0BAAMpB,GAAN,CAAU+B,OAAV,CAAkB,iBAAlB;AACH;AAEJ,aAXD,EAWGX,MAAMnB,CAAN,CAAQpC,gBAAR,GAA2B,EAX9B;AAYH,SA7DD;;AA+DAV,UAAEoF,EAAF,CAAKC,YAAL,GAAoB,UAAS1C,OAAT,EAAkB;AAClC,mBAAO,KAAKwC,IAAL,CAAU,YAAW;AACxB,oBAAI,CAACnF,EAAEiN,IAAF,CAAO,IAAP,EAAa,cAAb,CAAL,EAAmC;AAC/BjN,sBAAEiN,IAAF,CAAO,IAAP,EAAa,cAAb,EAA6B,IAAIxK,MAAJ,CAAW,IAAX,EAAiBE,OAAjB,CAA7B;AACH,iBAFD,MAEO;AACH,wBAAI;AACA3C,0BAAE,IAAF,EAAQiN,IAAR,CAAa,cAAb,EAA6BlJ,IAA7B;AACH,qBAFD,CAEE,OAAOmJ,GAAP,EAAY;AACV/F,gCAAQC,KAAR,CAAc,yCAAd;AACH;AACJ;AACJ,aAVM,CAAP;AAWH,SAZD;;AAcApH,UAAEoF,EAAF,CAAKC,YAAL,CAAkBlC,OAAlB,GAA4B,EAA5B;AAEH,KA5zCD;AA+zCC,CA/0CA,CAAD;;AAi1CA;;;;AAIC,WAAU3D,IAAV,EAAgBC,OAAhB,EAAyB;AACxB,QAAI,OAAOC,MAAP,KAAkB,UAAlB,IAAgCA,OAAOC,GAA3C,EAAgD;AAC9C;AACAD,eAAO,CAAC,QAAD,CAAP,EAAmB,UAAUE,EAAV,EAAc;AAC/B,mBAAQH,QAAQG,EAAR,CAAR;AACD,SAFD;AAGD,KALD,MAKO,IAAI,QAAOC,OAAP,yCAAOA,OAAP,OAAmB,QAAvB,EAAiC;AACtC;AACA;AACA;AACAC,eAAOD,OAAP,GAAiBJ,QAAQM,QAAQ,QAAR,CAAR,CAAjB;AACD,KALM,MAKA;AACLN,gBAAQ0N,MAAR;AACD;AACF,CAdA,aAcO,UAAUnN,CAAV,EAAa;;AAGrB,KAAC,YAAW;;AAER;;AAEA,YAAIC,WAAW;AACXmN,sBAAU,KADC;AAEXC,mBAAO,IAFI;AAGXC,yBAAa,IAHF;AAIXC,4BAAgB,KAJL;AAKXC,8BAAkB,IALP;AAMXC,sCAA0B;AANf,SAAf;;AASA;;;;AAIA,YAAIC,WAAW,SAAXA,QAAW,CAAShL,OAAT,EAAkB;;AAE7B,iBAAKiL,IAAL,GAAY3N,EAAE0C,OAAF,EAAWuK,IAAX,CAAgB,cAAhB,CAAZ;;AAEA,iBAAKpK,GAAL,GAAW7C,EAAE0C,OAAF,CAAX;;AAEA;AACA,gBAAI,KAAKiL,IAAL,CAAUjK,MAAV,CAAiBR,MAAjB,GAA0B,CAA9B,EAAiC;AAC7B,uBAAO,KAAP;AACH;;AAED,iBAAKyK,IAAL,CAAU7K,CAAV,GAAc9C,EAAE+C,MAAF,CAAS,EAAT,EAAa9C,QAAb,EAAuB,KAAK0N,IAAL,CAAU7K,CAAjC,CAAd;AACA,iBAAK8K,QAAL,GAAgB,KAAhB;;AAEA;AACA,iBAAKC,QAAL,GAAgB,IAAhB;;AAEA;AACA,iBAAKC,eAAL,GAAuB,KAAvB;;AAEA;AACA,iBAAKC,kBAAL,GAA0B,KAAKJ,IAAL,CAAU7K,CAAV,CAAYyK,cAAtC;;AAEA;AACA,gBAAI,CAAC,KAAKI,IAAL,CAAUvH,KAAV,EAAL,EAAwB;AACpB,qBAAKuH,IAAL,CAAU7K,CAAV,CAAYwK,WAAZ,GAA0B,KAA1B;AACH;;AAED,iBAAKvJ,IAAL;;AAEA,mBAAO,IAAP;AACH,SA/BD;;AAiCA2J,iBAAS1J,SAAT,CAAmBD,IAAnB,GAA0B,YAAW;AACjC,gBAAIE,QAAQ,IAAZ;;AAEA;AACA,gBAAIA,MAAM0J,IAAN,CAAW7K,CAAX,CAAa0K,gBAAjB,EAAmC;AAC/BvJ,sBAAMhD,QAAN;AACH;;AAED;AACA,gBAAIgD,MAAM0J,IAAN,CAAW7K,CAAX,CAAawK,WAAjB,EAA8B;AAC1BrJ,sBAAM0J,IAAN,CAAW7J,MAAX,CAAkBH,IAAlB,CAAuB,KAAvB,EAA8BqC,MAA9B,CAAqC,oEAArC;AACH;;AAED;AACA/B,kBAAM+J,QAAN;;AAEA;AACA,gBAAI/J,MAAM0J,IAAN,CAAW7K,CAAX,CAAasK,QAAjB,EAA2B;AACvBnJ,sBAAMpB,GAAN,CAAUoL,GAAV,CAAc,uBAAd,EAAuC,YAAW;AAC9ChK,0BAAMiK,UAAN;AACH,iBAFD;AAGH;;AAED;AACAjK,kBAAMpB,GAAN,CAAUgC,EAAV,CAAa,oCAAb,EAAmD,YAAW;AAC1D,oBAAIZ,MAAM2J,QAAV,EAAoB;AAChB3J,0BAAMkK,UAAN;AACAlK,0BAAM6J,eAAN,GAAwB,IAAxB;AACH;AACJ,aALD;;AAOA;AACA7J,kBAAMpB,GAAN,CAAUgC,EAAV,CAAa,mDAAb,EAAkE,YAAW;AACzE,oBAAI,CAACZ,MAAM2J,QAAP,IAAmB3J,MAAM6J,eAA7B,EAA8C;AAC1C7J,0BAAMiK,UAAN;AACAjK,0BAAM6J,eAAN,GAAwB,KAAxB;AACH;AACJ,aALD;AAOH,SAvCD;;AAyCAJ,iBAAS1J,SAAT,CAAmBgK,QAAnB,GAA8B,YAAW;;AAErC,gBAAI/J,QAAQ,IAAZ;AACA,gBAAImK,aAAJ;AACA,gBAAIC,UAAJ;;AAEApK,kBAAMpB,GAAN,CAAUgC,EAAV,CAAa,qBAAb,EAAoC,YAAW;;AAE3C;AACA,oBAAIZ,MAAM0J,IAAN,CAAW7K,CAAX,CAAawK,WAAb,IAA4BrJ,MAAM4J,QAAtC,EAAgD;AAC5CO,oCAAgBnK,MAAM0J,IAAN,CAAW7J,MAAX,CAAkBH,IAAlB,CAAuB,kBAAvB,CAAhB;AACA0K,iCAAapK,MAAM0J,IAAN,CAAW7J,MAAX,CAAkBH,IAAlB,CAAuB,cAAvB,CAAb;AACA,wBAAIM,MAAM2J,QAAV,EAAoB;AAChBS,mCAAWlD,UAAX,CAAsB,OAAtB;AACAiD,sCAAc1I,WAAd,CAA0B,UAA1B;AACAhB,mCAAW,YAAW;AAClB2J,uCAAWpI,GAAX,CAAe,YAAf,EAA6B,YAAYhC,MAAM0J,IAAN,CAAW7K,CAAX,CAAazC,KAAb,GAAqB4D,MAAM0J,IAAN,CAAW7K,CAAX,CAAauK,KAA9C,IAAuD,YAApF;AACAe,0CAAc5N,QAAd,CAAuB,UAAvB;AACH,yBAHD,EAGG,EAHH;AAIH;AACJ;;AAED;AACA,oBAAI,CAACyD,MAAM4J,QAAP,IAAmB,CAAC5J,MAAM0J,IAAN,CAAW7K,CAAX,CAAayK,cAArC,EAAqD;AACjDtJ,0BAAMkK,UAAN;AACH;;AAEDlK,sBAAM4J,QAAN,GAAiB,KAAjB;AAEH,aAvBD;AAwBH,SA9BD;;AAgCA;AACAH,iBAAS1J,SAAT,CAAmB/C,QAAnB,GAA8B,YAAW;AACrC,gBAAIgD,QAAQ,IAAZ;AACA,gBAAI2E,QAAQ,kDAAZ;;AAEA;AACA5I,cAAE,KAAK2N,IAAL,CAAU7K,CAAV,CAAY2K,wBAAd,EAAwCzH,MAAxC,CAA+C4C,KAA/C;;AAEA3E,kBAAM0J,IAAN,CAAW7J,MAAX,CAAkBH,IAAlB,CAAuB,qBAAvB,EAA8CkB,EAA9C,CAAiD,UAAjD,EAA6D,YAAW;AACpE,oBAAI7E,EAAEiE,MAAM0J,IAAN,CAAW7J,MAAb,EAAqBW,QAArB,CAA8B,kBAA9B,CAAJ,EAAuD;AACnDR,0BAAMkK,UAAN;AACAlK,0BAAM0J,IAAN,CAAW7K,CAAX,CAAayK,cAAb,GAA8B,KAA9B;AACH,iBAHD,MAGO;AACH,wBAAI,CAACtJ,MAAM2J,QAAX,EAAqB;AACjB3J,8BAAMiK,UAAN;AACAjK,8BAAM0J,IAAN,CAAW7K,CAAX,CAAayK,cAAb,GAA8BtJ,MAAM8J,kBAApC;AACH;AACJ;AACJ,aAVD;AAWH,SAlBD;;AAoBA;AACAL,iBAAS1J,SAAT,CAAmBkK,UAAnB,GAAgC,YAAW;AACvC,gBAAIjK,QAAQ,IAAZ;;AAEAA,kBAAM0J,IAAN,CAAW7J,MAAX,CAAkBH,IAAlB,CAAuB,cAAvB,EAAuCsC,GAAvC,CAA2C,YAA3C,EAAyD,YAAYhC,MAAM0J,IAAN,CAAW7K,CAAX,CAAazC,KAAb,GAAqB4D,MAAM0J,IAAN,CAAW7K,CAAX,CAAauK,KAA9C,IAAuD,YAAhH;AACApJ,kBAAM0J,IAAN,CAAW7J,MAAX,CAAkBtD,QAAlB,CAA2B,kBAA3B;AACAyD,kBAAM0J,IAAN,CAAW7J,MAAX,CAAkBH,IAAlB,CAAuB,kBAAvB,EAA2CnD,QAA3C,CAAoD,UAApD;;AAEAyD,kBAAM2J,QAAN,GAAiBU,YAAY,YAAW;AACpC,oBAAIrK,MAAM0J,IAAN,CAAW7L,KAAX,GAAmB,CAAnB,GAAuBmC,MAAM0J,IAAN,CAAWjK,MAAX,CAAkBR,MAA7C,EAAqD;AACjDe,0BAAM0J,IAAN,CAAW7L,KAAX;AACH,iBAFD,MAEO;AACHmC,0BAAM0J,IAAN,CAAW7L,KAAX,GAAmB,CAAnB;AACH;;AAEDmC,sBAAM4J,QAAN,GAAiB,IAAjB;AACA5J,sBAAM0J,IAAN,CAAWpI,KAAX,CAAiBtB,MAAM0J,IAAN,CAAW7L,KAA5B,EAAmC,KAAnC,EAA0C,KAA1C,EAAiD,MAAjD;AACH,aATgB,EASdmC,MAAM0J,IAAN,CAAW7K,CAAX,CAAazC,KAAb,GAAqB4D,MAAM0J,IAAN,CAAW7K,CAAX,CAAauK,KATpB,CAAjB;AAUH,SAjBD;;AAmBA;AACAK,iBAAS1J,SAAT,CAAmBmK,UAAnB,GAAgC,YAAW;AACvCI,0BAAc,KAAKX,QAAnB;AACA,iBAAKA,QAAL,GAAgB,KAAhB;AACA,iBAAKD,IAAL,CAAU7J,MAAV,CAAiBH,IAAjB,CAAsB,cAAtB,EAAsCwH,UAAtC,CAAiD,OAAjD;AACA,iBAAKwC,IAAL,CAAU7J,MAAV,CAAiB4B,WAAjB,CAA6B,kBAA7B;AACA,iBAAKiI,IAAL,CAAU7J,MAAV,CAAiBH,IAAjB,CAAsB,kBAAtB,EAA0C+B,WAA1C,CAAsD,UAAtD;AACH,SAND;;AAQAgI,iBAAS1J,SAAT,CAAmBkH,OAAnB,GAA6B,YAAW;;AAEpC,iBAAKiD,UAAL;AACA,iBAAKR,IAAL,CAAU7J,MAAV,CAAiBH,IAAjB,CAAsB,kBAAtB,EAA0CqJ,MAA1C;AACH,SAJD;;AAMAhN,UAAEoF,EAAF,CAAKC,YAAL,CAAkBlC,OAAlB,CAA0BiK,QAA1B,GAAqCM,QAArC;AAEH,KArLD;AAwLC,CAzMA,CAAD;;AA2MA;;;;AAIC,WAAUlO,IAAV,EAAgBC,OAAhB,EAAyB;AACxB,QAAI,OAAOC,MAAP,KAAkB,UAAlB,IAAgCA,OAAOC,GAA3C,EAAgD;AAC9C;AACAD,eAAO,CAAC,QAAD,CAAP,EAAmB,UAAUE,EAAV,EAAc;AAC/B,mBAAQH,QAAQG,EAAR,CAAR;AACD,SAFD;AAGD,KALD,MAKO,IAAI,QAAOC,OAAP,yCAAOA,OAAP,OAAmB,QAAvB,EAAiC;AACtC;AACA;AACA;AACAC,eAAOD,OAAP,GAAiBJ,QAAQM,QAAQ,QAAR,CAAR,CAAjB;AACD,KALM,MAKA;AACLN,gBAAQ0N,MAAR;AACD;AACF,CAdA,aAcO,UAAUnN,CAAV,EAAa;;AAErB,KAAC,YAAW;;AAER;;AAEA,YAAIC,WAAW;AACXuO,wBAAY;AADD,SAAf;;AAIA,YAAIC,aAAa,SAAbA,UAAa,CAAS/L,OAAT,EAAkB;;AAE/B;AACA,iBAAKiL,IAAL,GAAY3N,EAAE0C,OAAF,EAAWuK,IAAX,CAAgB,cAAhB,CAAZ;;AAEA,iBAAKpK,GAAL,GAAW7C,EAAE0C,OAAF,CAAX;;AAEA;AACA,iBAAKiL,IAAL,CAAU7K,CAAV,GAAc9C,EAAE+C,MAAF,CAAS,EAAT,EAAa9C,QAAb,EAAuB,KAAK0N,IAAL,CAAU7K,CAAjC,CAAd;;AAEA,iBAAKiB,IAAL;;AAEA,mBAAO,IAAP;AACH,SAbD;;AAeA0K,mBAAWzK,SAAX,CAAqBD,IAArB,GAA4B,YAAW;AACnC,gBAAIyK,aAAa,EAAjB;AACA,gBAAI,KAAKb,IAAL,CAAU7K,CAAV,CAAY0L,UAAhB,EAA4B;;AAExB;AACA,oBAAI,CAAChL,SAASkL,iBAAV,IAA+B,CAAClL,SAASmL,uBAAzC,IACA,CAACnL,SAASoL,oBADV,IACkC,CAACpL,SAASqL,mBADhD,EACqE;AACjE;AACH,iBAHD,MAGO;AACHL,iCAAa,6CAAb;AACA,yBAAKb,IAAL,CAAU7J,MAAV,CAAiBH,IAAjB,CAAsB,aAAtB,EAAqCqC,MAArC,CAA4CwI,UAA5C;AACA,yBAAKA,UAAL;AACH;AACJ;AACJ,SAdD;;AAgBAC,mBAAWzK,SAAX,CAAqB8K,iBAArB,GAAyC,YAAW;AAChD,gBAAIlM,KAAKY,SAASC,eAAlB;AACA,gBAAIb,GAAGkM,iBAAP,EAA0B;AACtBlM,mBAAGkM,iBAAH;AACH,aAFD,MAEO,IAAIlM,GAAGmM,mBAAP,EAA4B;AAC/BnM,mBAAGmM,mBAAH;AACH,aAFM,MAEA,IAAInM,GAAGoM,oBAAP,EAA6B;AAChCpM,mBAAGoM,oBAAH;AACH,aAFM,MAEA,IAAIpM,GAAGqM,uBAAP,EAAgC;AACnCrM,mBAAGqM,uBAAH;AACH;AACJ,SAXD;;AAaAR,mBAAWzK,SAAX,CAAqBkL,cAArB,GAAsC,YAAW;AAC7C,gBAAI1L,SAAS0L,cAAb,EAA6B;AACzB1L,yBAAS0L,cAAT;AACH,aAFD,MAEO,IAAI1L,SAAS2L,gBAAb,EAA+B;AAClC3L,yBAAS2L,gBAAT;AACH,aAFM,MAEA,IAAI3L,SAAS4L,mBAAb,EAAkC;AACrC5L,yBAAS4L,mBAAT;AACH,aAFM,MAEA,IAAI5L,SAAS6L,oBAAb,EAAmC;AACtC7L,yBAAS6L,oBAAT;AACH;AACJ,SAVD;;AAYA;AACAZ,mBAAWzK,SAAX,CAAqBwK,UAArB,GAAkC,YAAW;AACzC,gBAAIvK,QAAQ,IAAZ;;AAEAjE,cAAEwD,QAAF,EAAYqB,EAAZ,CAAe,4FAAf,EAA6G,YAAW;AACpHZ,sBAAM0J,IAAN,CAAW7J,MAAX,CAAkBwL,WAAlB,CAA8B,kBAA9B;AACH,aAFD;;AAIA,iBAAK3B,IAAL,CAAU7J,MAAV,CAAiBH,IAAjB,CAAsB,gBAAtB,EAAwCkB,EAAxC,CAA2C,UAA3C,EAAuD,YAAW;AAC9D,oBAAI,CAACrB,SAAS+L,iBAAV,IACA,CAAC/L,SAASgM,oBADV,IACkC,CAAChM,SAASiM,uBAD5C,IACuE,CAACjM,SAASkM,mBADrF,EAC0G;AACtGzL,0BAAM6K,iBAAN;AACH,iBAHD,MAGO;AACH7K,0BAAMiL,cAAN;AACH;AACJ,aAPD;AASH,SAhBD;;AAkBAT,mBAAWzK,SAAX,CAAqBkH,OAArB,GAA+B,YAAW;;AAEtC;AACA,iBAAKgE,cAAL;;AAEAlP,cAAEwD,QAAF,EAAYsJ,GAAZ,CAAgB,4FAAhB;AACH,SAND;;AAQA9M,UAAEoF,EAAF,CAAKC,YAAL,CAAkBlC,OAAlB,CAA0BwM,UAA1B,GAAuClB,UAAvC;AAEH,KA7FD;AA+FC,CA/GA,CAAD;;AAiHA;;;;AAIC,WAAUjP,IAAV,EAAgBC,OAAhB,EAAyB;AACxB,QAAI,OAAOC,MAAP,KAAkB,UAAlB,IAAgCA,OAAOC,GAA3C,EAAgD;AAC9C;AACAD,eAAO,CAAC,QAAD,CAAP,EAAmB,UAAUE,EAAV,EAAc;AAC/B,mBAAQH,QAAQG,EAAR,CAAR;AACD,SAFD;AAGD,KALD,MAKO,IAAI,QAAOC,OAAP,yCAAOA,OAAP,OAAmB,QAAvB,EAAiC;AACtC;AACA;AACA;AACAC,eAAOD,OAAP,GAAiBJ,QAAQM,QAAQ,QAAR,CAAR,CAAjB;AACD,KALM,MAKA;AACLN,gBAAQ0N,MAAR;AACD;AACF,CAdA,aAcO,UAAUnN,CAAV,EAAa;;AAErB,KAAC,YAAW;;AAER;;AAEA,YAAIC,WAAW;AACX2P,mBAAO;AADI,SAAf;;AAIA,YAAIC,QAAQ,SAARA,KAAQ,CAASnN,OAAT,EAAkB;;AAE1B,iBAAKiL,IAAL,GAAY3N,EAAE0C,OAAF,EAAWuK,IAAX,CAAgB,cAAhB,CAAZ;;AAEA,iBAAKpK,GAAL,GAAW7C,EAAE0C,OAAF,CAAX;AACA,iBAAKiL,IAAL,CAAU7K,CAAV,GAAc9C,EAAE+C,MAAF,CAAS,EAAT,EAAa9C,QAAb,EAAuB,KAAK0N,IAAL,CAAU7K,CAAjC,CAAd;AACA,gBAAI,KAAK6K,IAAL,CAAU7K,CAAV,CAAY8M,KAAZ,IAAqB,KAAKjC,IAAL,CAAUjK,MAAV,CAAiBR,MAAjB,GAA0B,CAAnD,EAAsD;AAClD,qBAAKa,IAAL;AACH;;AAED,mBAAO,IAAP;AACH,SAXD;;AAaA8L,cAAM7L,SAAN,CAAgBD,IAAhB,GAAuB,YAAW;AAC9B,gBAAIE,QAAQ,IAAZ;AACA,gBAAI6L,YAAY,EAAhB;AACA,gBAAIC,UAAJ;AACA,gBAAIC,WAAJ;AACA,gBAAIC,OAAJ;;AAEAhM,kBAAM0J,IAAN,CAAW7J,MAAX,CAAkBH,IAAlB,CAAuB,KAAvB,EAA8BqC,MAA9B,CAAqC,oCAArC;;AAEA,gBAAI/B,MAAM0J,IAAN,CAAW7K,CAAX,CAAaR,OAAjB,EAA0B;AACtB,qBAAK,IAAIuD,IAAI,CAAb,EAAgBA,IAAI5B,MAAM0J,IAAN,CAAW7K,CAAX,CAAaP,SAAb,CAAuBW,MAA3C,EAAmD2C,GAAnD,EAAwD;AACpDiK,iCAAa,0IAA0I7L,MAAM0J,IAAN,CAAW7K,CAAX,CAAaP,SAAb,CAAuBsD,CAAvB,EAA0BqK,KAApK,GAA4K,mBAAzL;AACH;AACJ,aAJD,MAIO;AACHjM,sBAAM0J,IAAN,CAAWjK,MAAX,CAAkByB,IAAlB,CAAuB,YAAW;;AAE9B,wBAAI,CAAClB,MAAM0J,IAAN,CAAW7K,CAAX,CAAaqN,YAAlB,EAAgC;AAC5BL,qCAAa,0IAA0I9P,EAAE,IAAF,EAAQ2D,IAAR,CAAa,KAAb,EAAoBsD,IAApB,CAAyB,KAAzB,CAA1I,GAA4K,mBAAzL;AACH,qBAFD,MAEO;AACH6I,qCAAa,0IAA0I9P,EAAE,IAAF,EAAQiH,IAAR,CAAahD,MAAM0J,IAAN,CAAW7K,CAAX,CAAaqN,YAA1B,CAA1I,GAAoL,mBAAjM;AACH;AAEJ,iBARD;AASH;;AAEDH,0BAAc/L,MAAM0J,IAAN,CAAW7J,MAAX,CAAkBH,IAAlB,CAAuB,iBAAvB,CAAd;;AAEAqM,wBAAYhJ,IAAZ,CAAiB8I,SAAjB;;AAEAC,yBAAa9L,MAAM0J,IAAN,CAAW7J,MAAX,CAAkBH,IAAlB,CAAuB,gBAAvB,CAAb;AACAoM,uBAAWlL,EAAX,CAAc,sBAAd,EAAsC,YAAW;AAC7C,oBAAIuL,SAASpQ,EAAE,IAAF,CAAb;AACAiE,sBAAM0J,IAAN,CAAW7L,KAAX,GAAmBsO,OAAOtO,KAAP,EAAnB;AACAmC,sBAAM0J,IAAN,CAAWpI,KAAX,CAAiBtB,MAAM0J,IAAN,CAAW7L,KAA5B,EAAmC,KAAnC,EAA0C,IAA1C,EAAgD,KAAhD;AACH,aAJD;;AAMAkO,wBAAYnL,EAAZ,CAAe,cAAf,EAA+B,YAAW;AACtCc,6BAAasK,OAAb;AACAD,4BAAYxP,QAAZ,CAAqB,gBAArB;AACH,aAHD;;AAKAwP,wBAAYnL,EAAZ,CAAe,aAAf,EAA8B,YAAW;AACrCoL,0BAAUvL,WAAW,YAAW;AAC5BsL,gCAAYtK,WAAZ,CAAwB,gBAAxB;AACH,iBAFS,CAAV;AAGH,aAJD;;AAMAzB,kBAAM0J,IAAN,CAAW9K,GAAX,CAAegC,EAAf,CAAkB,qBAAlB,EAAyC,UAASmF,CAAT,EAAYqG,SAAZ,EAAuBvO,KAAvB,EAA8B;AACnEiO,2BAAWrK,WAAX,CAAuB,iBAAvB;AACAqK,2BAAW5J,EAAX,CAAcrE,KAAd,EAAqBtB,QAArB,CAA8B,iBAA9B;AACH,aAHD;AAKH,SApDD;;AAsDAqP,cAAM7L,SAAN,CAAgBkH,OAAhB,GAA0B,YAAW,CAEpC,CAFD;;AAIAlL,UAAEoF,EAAF,CAAKC,YAAL,CAAkBlC,OAAlB,CAA0ByM,KAA1B,GAAkCC,KAAlC;AAEH,KAjFD;AAoFC,CApGA,CAAD;;AAsGA;;;;AAIC,WAAUrQ,IAAV,EAAgBC,OAAhB,EAAyB;AACxB,QAAI,OAAOC,MAAP,KAAkB,UAAlB,IAAgCA,OAAOC,GAA3C,EAAgD;AAC9C;AACAD,eAAO,CAAC,QAAD,CAAP,EAAmB,UAAUE,EAAV,EAAc;AAC/B,mBAAQH,QAAQG,EAAR,CAAR;AACD,SAFD;AAGD,KALD,MAKO,IAAI,QAAOC,OAAP,yCAAOA,OAAP,OAAmB,QAAvB,EAAiC;AACtC;AACA;AACA;AACAC,eAAOD,OAAP,GAAiBJ,QAAQM,QAAQ,QAAR,CAAR,CAAjB;AACD,KALM,MAKA;AACLN,gBAAQ0N,MAAR;AACD;AACF,CAdA,aAcO,UAAUnN,CAAV,EAAa;;AAErB,KAAC,YAAW;;AAER;;AAEA,YAAIC,WAAW;AACXqQ,uBAAW,IADA;;AAGXC,0BAAc,IAHH;AAIXC,kCAAsB,QAJX;;AAMXC,wBAAY,GAND;AAOXC,yBAAa,MAPF;AAQXC,6BAAiB,GARN;AASXC,yBAAa,CATF;;AAWXT,0BAAc,KAXH;AAYXU,gCAAoB,IAZT;AAaXC,yBAAa,IAbF;AAcXC,2BAAe,IAdJ;;AAgBXC,6BAAiB,IAhBN;AAiBXC,8BAAkB,IAjBP;AAkBX9O,4BAAgB,EAlBL;;AAoBX+O,kCAAsB,IApBX;AAqBXC,8BAAkB,CArBP;;AAuBXC,gCAAoB,IAvBT;AAwBXC,4BAAgB,iBAxBL;;AA0BXC,sCAA0B;AA1Bf,SAAf;;AA6BA,YAAIC,YAAY,SAAZA,SAAY,CAAS7O,OAAT,EAAkB;;AAE9B;AACA,iBAAKiL,IAAL,GAAY3N,EAAE0C,OAAF,EAAWuK,IAAX,CAAgB,cAAhB,CAAZ;;AAEA;AACA,iBAAKU,IAAL,CAAU7K,CAAV,GAAc9C,EAAE+C,MAAF,CAAS,EAAT,EAAa9C,QAAb,EAAuB,KAAK0N,IAAL,CAAU7K,CAAjC,CAAd;;AAEA,iBAAKD,GAAL,GAAW7C,EAAE0C,OAAF,CAAX;AACA,iBAAK8O,WAAL,GAAmB,IAAnB;AACA,iBAAKC,eAAL,GAAuB,CAAvB;AACA,iBAAKC,eAAL,GAAwB,KAAK/D,IAAL,CAAUjK,MAAV,CAAiBR,MAAjB,IAA2B,KAAKyK,IAAL,CAAU7K,CAAV,CAAY2N,UAAZ,GAAyB,KAAK9C,IAAL,CAAU7K,CAAV,CAAY8N,WAAhE,CAAxB;AACA,iBAAKe,UAAL,GAAkB,KAAKhE,IAAL,CAAU7L,KAA5B;;AAEA,gBAAI,KAAK6L,IAAL,CAAU7K,CAAV,CAAYyN,YAAhB,EAA8B;AAC1B,qBAAK5C,IAAL,CAAU7K,CAAV,CAAY4N,WAAZ,GAA0B,MAA1B;AACH;;AAED;AACA,iBAAKkB,IAAL,GAAY,CAAZ;;AAEA,iBAAK7N,IAAL;;AAEA,mBAAO,IAAP;AACH,SAxBD;;AA0BAwN,kBAAUvN,SAAV,CAAoBD,IAApB,GAA2B,YAAW;AAClC,gBAAIE,QAAQ,IAAZ;AACA,gBAAI,KAAK0J,IAAL,CAAU7K,CAAV,CAAYwN,SAAZ,IAAyB,KAAK3C,IAAL,CAAUjK,MAAV,CAAiBR,MAAjB,GAA0B,CAAvD,EAA0D;AACtD,oBAAI,KAAKyK,IAAL,CAAU7K,CAAV,CAAY+N,kBAAhB,EAAoC;AAChCnM,+BAAW,YAAU;AACjBT,8BAAM0J,IAAN,CAAW7J,MAAX,CAAkBtD,QAAlB,CAA2B,eAA3B;AACH,qBAFD,EAEG,GAFH;AAGH;;AAED,oBAAI,KAAKmN,IAAL,CAAU7K,CAAV,CAAYiO,aAAhB,EAA+B;AAC3B,yBAAKpD,IAAL,CAAU7J,MAAV,CAAiBtD,QAAjB,CAA0B,oBAA1B;AACH;;AAED,qBAAKmE,KAAL;AACA,oBAAI,KAAKgJ,IAAL,CAAU7K,CAAV,CAAYyN,YAAZ,IAA4B,KAAK5C,IAAL,CAAUvH,KAAV,EAAhC,EAAmD;AAC/C,wBAAI,KAAKuH,IAAL,CAAU7K,CAAV,CAAYkO,eAAhB,EAAiC;AAC7B,6BAAKA,eAAL;AACH;;AAED,wBAAI,KAAKrD,IAAL,CAAU7K,CAAV,CAAYmO,gBAAhB,EAAkC;AAC9B,6BAAKA,gBAAL;AACH;;AAED,yBAAKY,cAAL,GAAsB,KAAtB;AACH,iBAVD,MAUO;AACH,yBAAKA,cAAL,GAAsB,IAAtB;AACH;;AAED,qBAAKC,MAAL;AACA,qBAAKC,aAAL;AACH;AACJ,SA/BD;;AAiCAR,kBAAUvN,SAAV,CAAoBW,KAApB,GAA4B,YAAW;AACnC,gBAAIV,QAAQ,IAAZ;AACA,gBAAI+N,YAAY,EAAhB;AACA,gBAAIC,sBAAsB,EAA1B;AACA,gBAAIC,MAAJ;AACA,gBAAIlL,OAAO,iCACP,iCADO,GAEP,QAFO,GAGP,QAHJ;;AAKA,oBAAQ,KAAK2G,IAAL,CAAU7K,CAAV,CAAYuO,cAApB;AACI,qBAAK,iBAAL;AACIY,0CAAsB,KAAtB;AACA;AACJ,qBAAK,kBAAL;AACIA,0CAAsB,SAAtB;AACA;AACJ,qBAAK,iBAAL;AACIA,0CAAsB,QAAtB;AARR;;AAWAhO,kBAAM0J,IAAN,CAAW7J,MAAX,CAAkBtD,QAAlB,CAA2B,cAA3B;;AAEAyD,kBAAM0J,IAAN,CAAW7J,MAAX,CAAkBH,IAAlB,CAAuB,KAAvB,EAA8BqC,MAA9B,CAAqCgB,IAArC;;AAEA/C,kBAAMuN,WAAN,GAAoBvN,MAAM0J,IAAN,CAAW7J,MAAX,CAAkBH,IAAlB,CAAuB,iBAAvB,CAApB;AACAM,kBAAMwN,eAAN,GAAwBxN,MAAMuN,WAAN,CAAkBjR,KAAlB,EAAxB;;AAEA,gBAAI0D,MAAM0J,IAAN,CAAW7K,CAAX,CAAayN,YAAjB,EAA+B;AAC3BtM,sBAAM0J,IAAN,CAAW7J,MAAX,CAAkBH,IAAlB,CAAuB,WAAvB,EAAoCsC,GAApC,CAAwC;AACpC1F,2BAAO0D,MAAMyN,eAAN,GAAwB,IADK;AAEpCS,8BAAU;AAF0B,iBAAxC;AAIH;;AAED,gBAAI,KAAKxE,IAAL,CAAU7K,CAAV,CAAYyN,YAAhB,EAA8B;AAC1BtM,sBAAMuN,WAAN,CAAkBvL,GAAlB,CAAsB,QAAtB,EAAgChC,MAAM0J,IAAN,CAAW7K,CAAX,CAAa6N,eAAb,GAA+B,IAA/D;AACH;;AAED,qBAASyB,QAAT,CAAkBrL,GAAlB,EAAuBmJ,KAAvB,EAA8BpO,KAA9B,EAAqC;AACjC,oBAAIgF,UAAU7C,MAAM0J,IAAN,CAAW7G,OAAX,CAAmBC,GAAnB,EAAwBjF,KAAxB,KAAkC,EAAhD;AACA,oBAAIuQ,QAAJ;AACA,oBAAIC,UAAU,EAAd;;AAEA,oBAAIxL,QAAQO,OAAR,IAAmBP,QAAQS,KAA3B,IAAoCT,QAAQU,WAAhD,EAA6D;AACzD,wBAAIV,QAAQO,OAAZ,EAAqB;AACjB,4BAAIpD,MAAM0J,IAAN,CAAW7K,CAAX,CAAaoO,oBAAjB,EAAuC;AACnCmB,uCAAW,0BAA0BvL,QAAQO,OAAR,CAAgB,CAAhB,CAA1B,GAA+C,GAA/C,GAAqDpD,MAAM0J,IAAN,CAAW7K,CAAX,CAAaqO,gBAAlE,GAAqF,MAAhG;AACH,yBAFD,MAEO;AACHkB,uCAAWnC,KAAX;AACH;AACJ,qBAND,MAMO,IAAIpJ,QAAQS,KAAZ,EAAmB;AACtB,4BAAItD,MAAM0J,IAAN,CAAW7K,CAAX,CAAasO,kBAAjB,EAAqC;AACjCiB,uCAAW,kCAAkCJ,mBAAlC,GAAwD,MAAnE;AACAK,sCAAUxL,QAAQS,KAAR,CAAc,CAAd,CAAV;AACH,yBAHD,MAGO;AACH8K,uCAAWnC,KAAX;AACH;AACJ,qBAPM,MAOA,IAAIpJ,QAAQU,WAAZ,EAAyB;AAC5B,4BAAIvD,MAAM0J,IAAN,CAAW7K,CAAX,CAAawO,wBAAjB,EAA2C;AACvCe,uCAAW,2CAA2CvL,QAAQU,WAAR,CAAoB,CAApB,CAAtD;AACH,yBAFD,MAEO;AACH6K,uCAAWnC,KAAX;AACH;AACJ;AACJ,iBArBD,MAqBO;AACHmC,+BAAWnC,KAAX;AACH;;AAED8B,6BAAa,yBAAyBM,OAAzB,GAAmC,uCAAnC,GAA6ErO,MAAM0J,IAAN,CAAW7K,CAAX,CAAa2N,UAA1F,GAAuG,cAAvG,GAAwHxM,MAAM0J,IAAN,CAAW7K,CAAX,CAAa4N,WAArI,GAAmJ,kBAAnJ,GAAwKzM,MAAM0J,IAAN,CAAW7K,CAAX,CAAa8N,WAArL,GAAmM,gBAAnM,GAAsNyB,QAAtN,GAAiO,YAA9O;AACAC,0BAAU,EAAV;AACH;;AAED,gBAAIrO,MAAM0J,IAAN,CAAW7K,CAAX,CAAaR,OAAjB,EAA0B;AACtB,qBAAK,IAAIuD,IAAI,CAAb,EAAgBA,IAAI5B,MAAM0J,IAAN,CAAW7K,CAAX,CAAaP,SAAb,CAAuBW,MAA3C,EAAmD2C,GAAnD,EAAwD;AACpDuM,6BAASnO,MAAM0J,IAAN,CAAW7K,CAAX,CAAaP,SAAb,CAAuBsD,CAAvB,EAA0BkB,GAAnC,EAAwC9C,MAAM0J,IAAN,CAAW7K,CAAX,CAAaP,SAAb,CAAuBsD,CAAvB,EAA0BqK,KAAlE,EAAyErK,CAAzE;AACH;AACJ,aAJD,MAIO;AACH5B,sBAAM0J,IAAN,CAAWjK,MAAX,CAAkByB,IAAlB,CAAuB,UAASU,CAAT,EAAY;;AAE/B,wBAAI,CAAC5B,MAAM0J,IAAN,CAAW7K,CAAX,CAAaqN,YAAlB,EAAgC;AAC5BiC,iCAASpS,EAAE,IAAF,EAAQiH,IAAR,CAAa,MAAb,KAAwBjH,EAAE,IAAF,EAAQiH,IAAR,CAAa,UAAb,CAAjC,EAA2DjH,EAAE,IAAF,EAAQ2D,IAAR,CAAa,KAAb,EAAoBsD,IAApB,CAAyB,KAAzB,CAA3D,EAA4FpB,CAA5F;AACH,qBAFD,MAEO;AACHuM,iCAASpS,EAAE,IAAF,EAAQiH,IAAR,CAAa,MAAb,KAAwBjH,EAAE,IAAF,EAAQiH,IAAR,CAAa,UAAb,CAAjC,EAA2DjH,EAAE,IAAF,EAAQiH,IAAR,CAAahD,MAAM0J,IAAN,CAAW7K,CAAX,CAAaqN,YAA1B,CAA3D,EAAoGtK,CAApG;AACH;AAEJ,iBARD;AASH;;AAED5B,kBAAM0J,IAAN,CAAW7J,MAAX,CAAkBH,IAAlB,CAAuB,WAAvB,EAAoCqD,IAApC,CAAyCgL,SAAzC;;AAEAE,qBAASjO,MAAM0J,IAAN,CAAW7J,MAAX,CAAkBH,IAAlB,CAAuB,gBAAvB,CAAT;;AAEA;AACAuO,mBAAO/M,IAAP,CAAY,YAAW;AACnB,oBAAIoN,QAAQvS,EAAE,IAAF,CAAZ;AACA,oBAAIwS,eAAeD,MAAMtL,IAAN,CAAW,eAAX,CAAnB;;AAEA,oBAAIuL,YAAJ,EAAkB;AACdxS,sBAAEyS,OAAF,CAAU,kCAAkCD,YAAlC,GAAiD,kBAA3D,EAA+E;AAC3EE,gCAAQ;AADmE,qBAA/E,EAEG,UAASzF,IAAT,EAAe;AACdsF,8BAAM5O,IAAN,CAAW,KAAX,EAAkBsD,IAAlB,CAAuB,KAAvB,EAA8BgG,KAAK,CAAL,EAAQhJ,MAAM0J,IAAN,CAAW7K,CAAX,CAAauO,cAArB,CAA9B;AACH,qBAJD;AAKH;AACJ,aAXD;;AAaA;AACAa,mBAAO/L,EAAP,CAAUlC,MAAM0J,IAAN,CAAW7L,KAArB,EAA4BtB,QAA5B,CAAqC,QAArC;AACAyD,kBAAM0J,IAAN,CAAW9K,GAAX,CAAegC,EAAf,CAAkB,qBAAlB,EAAyC,YAAW;AAChDqN,uBAAOxM,WAAP,CAAmB,QAAnB;AACAwM,uBAAO/L,EAAP,CAAUlC,MAAM0J,IAAN,CAAW7L,KAArB,EAA4BtB,QAA5B,CAAqC,QAArC;AACH,aAHD;;AAKA0R,mBAAOrN,EAAP,CAAU,sBAAV,EAAkC,YAAW;AACzC,oBAAIuL,SAASpQ,EAAE,IAAF,CAAb;AACA0E,2BAAW,YAAW;;AAElB;AACA;AACA,wBAAKT,MAAM4N,cAAN,IAAwB,CAAC5N,MAAM0J,IAAN,CAAWtK,MAArC,IAAgD,CAACY,MAAM0J,IAAN,CAAWvH,KAAX,EAArD,EAAyE;AACrEnC,8BAAM0J,IAAN,CAAW7L,KAAX,GAAmBsO,OAAOtO,KAAP,EAAnB;AACAmC,8BAAM0J,IAAN,CAAWpI,KAAX,CAAiBtB,MAAM0J,IAAN,CAAW7L,KAA5B,EAAmC,KAAnC,EAA0C,IAA1C,EAAgD,KAAhD;AACH;AACJ,iBARD,EAQG,EARH;AASH,aAXD;;AAaAmC,kBAAM0J,IAAN,CAAW9K,GAAX,CAAegC,EAAf,CAAkB,qBAAlB,EAAyC,YAAW;AAChDZ,sBAAMsM,YAAN,CAAmBtM,MAAM0J,IAAN,CAAW7L,KAA9B;AACH,aAFD;;AAIA9B,cAAEmE,MAAF,EAAUU,EAAV,CAAa,4CAAb,EAA2D,YAAW;AAClEH,2BAAW,YAAW;AAClBT,0BAAMsM,YAAN,CAAmBtM,MAAM0J,IAAN,CAAW7L,KAA9B;AACAmC,0BAAMwN,eAAN,GAAwBxN,MAAMuN,WAAN,CAAkBjR,KAAlB,EAAxB;AACH,iBAHD,EAGG,GAHH;AAIH,aALD;AAOH,SA1ID;;AA4IAgR,kBAAUvN,SAAV,CAAoBoH,YAApB,GAAmC,UAASuH,KAAT,EAAgB;AAC/C;AACA,iBAAKhF,IAAL,CAAU7J,MAAV,CAAiBH,IAAjB,CAAsB,WAAtB,EAAmCsC,GAAnC,CAAuC;AACnCsF,2BAAW,kBAAmBoH,KAAnB,GAA4B;AADJ,aAAvC;AAGH,SALD;;AAOApB,kBAAUvN,SAAV,CAAoBuM,YAApB,GAAmC,UAASzO,KAAT,EAAgB;AAC/C,gBAAIoQ,SAAS,KAAKvE,IAAL,CAAU7J,MAAV,CAAiBH,IAAjB,CAAsB,WAAtB,CAAb;AACA,gBAAI,KAAKgK,IAAL,CAAU7K,CAAV,CAAYyN,YAAhB,EAA8B;AAC1B,oBAAI4B,QAAJ;AACA,wBAAQ,KAAKxE,IAAL,CAAU7K,CAAV,CAAY0N,oBAApB;AACI,yBAAK,MAAL;AACI2B,mCAAW,CAAX;AACA;AACJ,yBAAK,QAAL;AACIA,mCAAY,KAAKV,eAAL,GAAuB,CAAxB,GAA8B,KAAK9D,IAAL,CAAU7K,CAAV,CAAY2N,UAAZ,GAAyB,CAAlE;AACA;AACJ,yBAAK,OAAL;AACI0B,mCAAW,KAAKV,eAAL,GAAuB,KAAK9D,IAAL,CAAU7K,CAAV,CAAY2N,UAA9C;AARR;AAUA,qBAAKmB,IAAL,GAAa,CAAC,KAAKjE,IAAL,CAAU7K,CAAV,CAAY2N,UAAZ,GAAyB,KAAK9C,IAAL,CAAU7K,CAAV,CAAY8N,WAAtC,IAAqD9O,KAArD,GAA6D,CAA9D,GAAmEqQ,QAA/E;AACA,oBAAI,KAAKP,IAAL,GAAa,KAAKF,eAAL,GAAuB,KAAKD,eAA7C,EAA+D;AAC3D,yBAAKG,IAAL,GAAY,KAAKF,eAAL,GAAuB,KAAKD,eAAxC;AACH;;AAED,oBAAI,KAAKG,IAAL,GAAY,CAAhB,EAAmB;AACf,yBAAKA,IAAL,GAAY,CAAZ;AACH;;AAED,oBAAI,KAAKjE,IAAL,CAAUvK,UAAd,EAA0B;AACtB,wBAAI,CAAC8O,OAAOzN,QAAP,CAAgB,IAAhB,CAAL,EAA4B;AACxB,6BAAKkJ,IAAL,CAAU7J,MAAV,CAAiBH,IAAjB,CAAsB,WAAtB,EAAmCsC,GAAnC,CAAuC,qBAAvC,EAA8D,KAAK0H,IAAL,CAAU7K,CAAV,CAAYzC,KAAZ,GAAoB,IAAlF;AACH;;AAED,wBAAI,CAAC,KAAKsN,IAAL,CAAUvH,KAAV,EAAL,EAAwB;AACpB8L,+BAAOU,OAAP,CAAe;AACXhB,kCAAM,CAAC,KAAKA,IAAN,GAAa;AADR,yBAAf,EAEG,KAAKjE,IAAL,CAAU7K,CAAV,CAAYzC,KAFf;AAGH;AACJ,iBAVD,MAUO;AACH,wBAAI,CAAC,KAAKsN,IAAL,CAAUvH,KAAV,EAAL,EAAwB;AACpB8L,+BAAOjM,GAAP,CAAW,MAAX,EAAmB,CAAC,KAAK2L,IAAN,GAAa,IAAhC;AACH;AACJ;;AAED,qBAAKxG,YAAL,CAAkB,KAAKwG,IAAvB;AAEH;AACJ,SA1CD;;AA4CA;AACAL,kBAAUvN,SAAV,CAAoBgN,eAApB,GAAsC,YAAW;;AAE7C,gBAAI/M,QAAQ,IAAZ;AACA,gBAAIwH,cAAc,CAAlB;AACA,gBAAIC,YAAY,CAAhB;AACA,gBAAIW,YAAY,KAAhB;AACA,gBAAIL,UAAU,KAAd;AACA,gBAAI6G,WAAW,CAAf;;AAEA5O,kBAAMuN,WAAN,CAAkBhR,QAAlB,CAA2B,SAA3B;;AAEAyD,kBAAM0J,IAAN,CAAW7J,MAAX,CAAkBH,IAAlB,CAAuB,WAAvB,EAAoCkB,EAApC,CAAuC,oBAAvC,EAA6D,UAASmF,CAAT,EAAY;AACrE,oBAAI/F,MAAMyN,eAAN,GAAwBzN,MAAMwN,eAAlC,EAAmD;AAC/C;AACAzH,sBAAEjF,cAAF;AACA0G,kCAAczB,EAAEoC,KAAhB;AACAC,gCAAY,IAAZ;;AAEA;AACApI,0BAAM0J,IAAN,CAAW7J,MAAX,CAAkByI,UAAlB,IAAgC,CAAhC;AACAtI,0BAAM0J,IAAN,CAAW7J,MAAX,CAAkByI,UAAlB,IAAgC,CAAhC;;AAEA;AACAtI,0BAAM4N,cAAN,GAAuB,KAAvB;AACA5N,0BAAMuN,WAAN,CAAkB9L,WAAlB,CAA8B,SAA9B,EAAyClF,QAAzC,CAAkD,aAAlD;AACH;AACJ,aAfD;;AAiBAR,cAAEmE,MAAF,EAAUU,EAAV,CAAa,oBAAb,EAAmC,UAASmF,CAAT,EAAY;AAC3C,oBAAIqC,SAAJ,EAAe;AACXwG,+BAAW5O,MAAM2N,IAAjB;AACA5F,8BAAU,IAAV;AACAN,gCAAY1B,EAAEoC,KAAd;;AAEAnI,0BAAMuN,WAAN,CAAkBhR,QAAlB,CAA2B,aAA3B;;AAEAqS,+BAAWA,YAAYnH,YAAYD,WAAxB,CAAX;;AAEA,wBAAIoH,WAAY5O,MAAMyN,eAAN,GAAwBzN,MAAMwN,eAA9C,EAAgE;AAC5DoB,mCAAW5O,MAAMyN,eAAN,GAAwBzN,MAAMwN,eAAzC;AACH;;AAED,wBAAIoB,WAAW,CAAf,EAAkB;AACdA,mCAAW,CAAX;AACH;;AAED;AACA5O,0BAAMmH,YAAN,CAAmByH,QAAnB;AAEH;AACJ,aAtBD;;AAwBA7S,cAAEmE,MAAF,EAAUU,EAAV,CAAa,kBAAb,EAAiC,YAAW;AACxC,oBAAImH,OAAJ,EAAa;AACTA,8BAAU,KAAV;AACA/H,0BAAMuN,WAAN,CAAkB9L,WAAlB,CAA8B,aAA9B;;AAEAzB,0BAAM2N,IAAN,GAAaiB,QAAb;;AAEA,wBAAIjH,KAAKC,GAAL,CAASH,YAAYD,WAArB,IAAoCxH,MAAM0J,IAAN,CAAW7K,CAAX,CAAaX,cAArD,EAAqE;AACjE8B,8BAAM4N,cAAN,GAAuB,IAAvB;AACH;AAEJ,iBAVD,MAUO;AACH5N,0BAAM4N,cAAN,GAAuB,IAAvB;AACH;;AAED,oBAAIxF,SAAJ,EAAe;AACXA,gCAAY,KAAZ;AACApI,0BAAMuN,WAAN,CAAkB9L,WAAlB,CAA8B,aAA9B,EAA6ClF,QAA7C,CAAsD,SAAtD;AACH;AACJ,aAnBD;AAqBH,SAzED;;AA2EA+Q,kBAAUvN,SAAV,CAAoBiN,gBAApB,GAAuC,YAAW;AAC9C,gBAAIhN,QAAQ,IAAZ;AACA,gBAAIwH,cAAc,CAAlB;AACA,gBAAIC,YAAY,CAAhB;AACA,gBAAIM,UAAU,KAAd;AACA,gBAAI6G,WAAW,CAAf;;AAEA5O,kBAAM0J,IAAN,CAAW7J,MAAX,CAAkBH,IAAlB,CAAuB,WAAvB,EAAoCkB,EAApC,CAAuC,eAAvC,EAAwD,UAASmF,CAAT,EAAY;AAChE,oBAAI/F,MAAMyN,eAAN,GAAwBzN,MAAMwN,eAAlC,EAAmD;AAC/CzH,sBAAEjF,cAAF;AACA0G,kCAAczB,EAAEkC,aAAF,CAAgBC,aAAhB,CAA8B,CAA9B,EAAiCC,KAA/C;AACAnI,0BAAM4N,cAAN,GAAuB,KAAvB;AACH;AACJ,aAND;;AAQA5N,kBAAM0J,IAAN,CAAW7J,MAAX,CAAkBH,IAAlB,CAAuB,WAAvB,EAAoCkB,EAApC,CAAuC,cAAvC,EAAuD,UAASmF,CAAT,EAAY;AAC/D,oBAAI/F,MAAMyN,eAAN,GAAwBzN,MAAMwN,eAAlC,EAAmD;AAC/CzH,sBAAEjF,cAAF;AACA2G,gCAAY1B,EAAEkC,aAAF,CAAgBC,aAAhB,CAA8B,CAA9B,EAAiCC,KAA7C;AACAJ,8BAAU,IAAV;;AAEA/H,0BAAMuN,WAAN,CAAkBhR,QAAlB,CAA2B,aAA3B;;AAEAqS,+BAAW5O,MAAM2N,IAAjB;;AAEAiB,+BAAWA,YAAYnH,YAAYD,WAAxB,CAAX;;AAEA,wBAAIoH,WAAY5O,MAAMyN,eAAN,GAAwBzN,MAAMwN,eAA9C,EAAgE;AAC5DoB,mCAAW5O,MAAMyN,eAAN,GAAwBzN,MAAMwN,eAAzC;AACH;;AAED,wBAAIoB,WAAW,CAAf,EAAkB;AACdA,mCAAW,CAAX;AACH;;AAED;AACA5O,0BAAMmH,YAAN,CAAmByH,QAAnB;AAEH;AACJ,aAxBD;;AA0BA5O,kBAAM0J,IAAN,CAAW7J,MAAX,CAAkBH,IAAlB,CAAuB,WAAvB,EAAoCkB,EAApC,CAAuC,aAAvC,EAAsD,YAAW;AAC7D,oBAAIZ,MAAMyN,eAAN,GAAwBzN,MAAMwN,eAAlC,EAAmD;;AAE/C,wBAAIzF,OAAJ,EAAa;AACTA,kCAAU,KAAV;AACA/H,8BAAMuN,WAAN,CAAkB9L,WAAlB,CAA8B,aAA9B;AACA,4BAAIkG,KAAKC,GAAL,CAASH,YAAYD,WAArB,IAAoCxH,MAAM0J,IAAN,CAAW7K,CAAX,CAAaX,cAArD,EAAqE;AACjE8B,kCAAM4N,cAAN,GAAuB,IAAvB;AACH;;AAED5N,8BAAM2N,IAAN,GAAaiB,QAAb;AACH,qBARD,MAQO;AACH5O,8BAAM4N,cAAN,GAAuB,IAAvB;AACH;AACJ,iBAbD,MAaO;AACH5N,0BAAM4N,cAAN,GAAuB,IAAvB;AACH;AACJ,aAjBD;AAmBH,SA5DD;;AA8DAN,kBAAUvN,SAAV,CAAoB8N,MAApB,GAA6B,YAAW;AACpC,gBAAI7N,QAAQ,IAAZ;AACA,gBAAIA,MAAM0J,IAAN,CAAW7K,CAAX,CAAagO,WAAjB,EAA8B;AAC1B7M,sBAAM0J,IAAN,CAAW7J,MAAX,CAAkBtD,QAAlB,CAA2B,eAA3B;AACAyD,sBAAMuN,WAAN,CAAkBxL,MAAlB,CAAyB,+CAAzB;AACA/B,sBAAM0J,IAAN,CAAW7J,MAAX,CAAkBH,IAAlB,CAAuB,kBAAvB,EAA2CkB,EAA3C,CAA8C,UAA9C,EAA0D,YAAW;AACjEZ,0BAAM0J,IAAN,CAAW7J,MAAX,CAAkBwL,WAAlB,CAA8B,eAA9B;AACH,iBAFD;AAGH;AACJ,SATD;;AAWAiC,kBAAUvN,SAAV,CAAoB+N,aAApB,GAAoC,YAAW;AAC3C,gBAAI9N,QAAQ,IAAZ;AACAjE,cAAEmE,MAAF,EAAUU,EAAV,CAAa,kBAAb,EAAiC,UAASmF,CAAT,EAAY;AACzC,oBAAIA,EAAEiB,OAAF,KAAc,EAAlB,EAAsB;AAClBjB,sBAAEjF,cAAF;AACAd,0BAAM0J,IAAN,CAAW7J,MAAX,CAAkBtD,QAAlB,CAA2B,eAA3B;AACH,iBAHD,MAGO,IAAIwJ,EAAEiB,OAAF,KAAc,EAAlB,EAAsB;AACzBjB,sBAAEjF,cAAF;AACAd,0BAAM0J,IAAN,CAAW7J,MAAX,CAAkB4B,WAAlB,CAA8B,eAA9B;AACH;AACJ,aARD;AASH,SAXD;;AAaA6L,kBAAUvN,SAAV,CAAoBkH,OAApB,GAA8B,YAAW;AACrC,gBAAI,KAAKyC,IAAL,CAAU7K,CAAV,CAAYwN,SAAZ,IAAyB,KAAK3C,IAAL,CAAUjK,MAAV,CAAiBR,MAAjB,GAA0B,CAAvD,EAA0D;AACtDlD,kBAAEmE,MAAF,EAAU2I,GAAV,CAAc,6DAAd;AACA,qBAAK0E,WAAL,CAAiBxE,MAAjB;AACA,qBAAKW,IAAL,CAAU7J,MAAV,CAAiB4B,WAAjB,CAA6B,cAA7B;AACH;AACJ,SAND;;AAQA1F,UAAEoF,EAAF,CAAKC,YAAL,CAAkBlC,OAAlB,CAA0BoO,SAA1B,GAAsCA,SAAtC;AAEH,KAvcD;AAycC,CAzdA,CAAD;;AA2dA;;;;AAIC,WAAU/R,IAAV,EAAgBC,OAAhB,EAAyB;AACxB,QAAI,OAAOC,MAAP,KAAkB,UAAlB,IAAgCA,OAAOC,GAA3C,EAAgD;AAC9C;AACAD,eAAO,CAAC,QAAD,CAAP,EAAmB,UAAUE,EAAV,EAAc;AAC/B,mBAAQH,QAAQG,EAAR,CAAR;AACD,SAFD;AAGD,KALD,MAKO,IAAI,QAAOC,OAAP,yCAAOA,OAAP,OAAmB,QAAvB,EAAiC;AACtC;AACA;AACA;AACAC,eAAOD,OAAP,GAAiBJ,QAAQM,QAAQ,QAAR,CAAR,CAAjB;AACD,KALM,MAKA;AACLN,gBAAQ0N,MAAR;AACD;AACF,CAdA,aAcO,UAAUnN,CAAV,EAAa;;AAErB,KAAC,YAAW;;AAER;;AAEA,YAAIC,WAAW;AACX6S,2BAAe,OADJ;AAEXC,iCAAqB,KAFV;AAGXC,+BAAmB,KAHR;AAIXC,qCAAyB,KAJd;AAKXC,4BAAgB,KALL;AAMXC,qBAAS,KANE;AAOXC,4BAAgB;AAPL,SAAf;;AAUA,YAAIC,QAAQ,SAARA,KAAQ,CAAS3Q,OAAT,EAAkB;;AAE1B,iBAAKiL,IAAL,GAAY3N,EAAE0C,OAAF,EAAWuK,IAAX,CAAgB,cAAhB,CAAZ;;AAEA,iBAAKpK,GAAL,GAAW7C,EAAE0C,OAAF,CAAX;AACA,iBAAKiL,IAAL,CAAU7K,CAAV,GAAc9C,EAAE+C,MAAF,CAAS,EAAT,EAAa9C,QAAb,EAAuB,KAAK0N,IAAL,CAAU7K,CAAjC,CAAd;AACA,iBAAKwQ,WAAL,GAAmB,KAAnB;;AAEA,iBAAKvP,IAAL;;AAEA,mBAAO,IAAP;AACH,SAXD;;AAaAsP,cAAMrP,SAAN,CAAgBD,IAAhB,GAAuB,YAAW;AAC9B,gBAAIE,QAAQ,IAAZ;;AAEA;AACAA,kBAAM0J,IAAN,CAAW9K,GAAX,CAAegC,EAAf,CAAkB,gBAAlB,EAAoC,UAASC,KAAT,EAAgBhD,KAAhB,EAAuBiF,GAAvB,EAA4BC,IAA5B,EAAkC;AAClE/C,sBAAM0J,IAAN,CAAW9J,MAAX,CAAkBsC,EAAlB,CAAqBrE,KAArB,EAA4B6B,IAA5B,CAAiC,WAAjC,EAA8CqC,MAA9C,CAAqD/B,MAAMsP,SAAN,CAAgBxM,GAAhB,EAAqB,WAArB,EAAkC,IAAlC,EAAwCjF,KAAxC,EAA+CkF,IAA/C,CAArD;AACA,oBAAIA,IAAJ,EAAU;AACN,wBAAI/C,MAAM0J,IAAN,CAAW7K,CAAX,CAAaqQ,OAAjB,EAA0B;AACtB,4BAAI;AACAA,oCAAQlP,MAAM0J,IAAN,CAAW9J,MAAX,CAAkBsC,EAAlB,CAAqBrE,KAArB,EAA4B6B,IAA5B,CAAiC,WAAjC,EAA8C6P,GAA9C,CAAkD,CAAlD,CAAR,EAA8DvP,MAAM0J,IAAN,CAAW7K,CAAX,CAAasQ,cAA3E,EAA2F,YAAW;AAClG,oCAAI,CAACnP,MAAMqP,WAAX,EAAwB;AACpB,yCAAKG,IAAL;AACH;AACJ,6BAJD;AAKH,yBAND,CAME,OAAOzJ,CAAP,EAAU;AACR7C,oCAAQC,KAAR,CAAc,qCAAd;AACH;AACJ,qBAVD,MAUO;AACH,4BAAG,CAACnD,MAAMqP,WAAV,EAAuB;AACnBrP,kCAAM0J,IAAN,CAAW9J,MAAX,CAAkBsC,EAAlB,CAAqBrE,KAArB,EAA4B6B,IAA5B,CAAiC,WAAjC,EAA8C6P,GAA9C,CAAkD,CAAlD,EAAqDC,IAArD;AACH;AACJ;AACJ;AACJ,aAnBD;;AAqBA;AACAxP,kBAAM0J,IAAN,CAAW9K,GAAX,CAAegC,EAAf,CAAkB,yBAAlB,EAA6C,UAASC,KAAT,EAAgBhD,KAAhB,EAAuB;AAChE,oBAAI4R,aAAazP,MAAM0J,IAAN,CAAW9J,MAAX,CAAkBsC,EAAlB,CAAqBrE,KAArB,EAA4B6B,IAA5B,CAAiC,gBAAjC,CAAjB;AACA,oBAAI,CAAC+P,WAAWjP,QAAX,CAAoB,eAApB,CAAL,EAA2C;AACvCiP,+BAAWzN,GAAX,CAAe,WAAf,EAA4BhC,MAAM0J,IAAN,CAAW7K,CAAX,CAAagQ,aAAzC;AACA7O,0BAAMqP,WAAN,GAAoB,IAApB;AACH;AACJ,aAND;;AAQA,gBAAIK,cAAc,SAAdA,WAAc,CAAS9Q,GAAT,EAAc;AAC5B;AACA,oBAAIA,IAAIc,IAAJ,CAAS,YAAT,EAAuBc,QAAvB,CAAgC,eAAhC,KAAoD5B,IAAIc,IAAJ,CAAS,YAAT,EAAuBiJ,EAAvB,CAA0B,UAA1B,CAAxD,EAA+F;;AAE3F;AACA,wBAAI,CAAC/J,IAAI4B,QAAJ,CAAa,cAAb,CAAL,EAAmC;;AAE/B5B,4BAAIrC,QAAJ,CAAa,+BAAb;;AAEA,4BAAIgI,IAAJ;AACA,4BAAII,KAAJ;AACA,4BAAIgL,aAAa,SAAbA,UAAa,CAASpL,IAAT,EAAeI,KAAf,EAAsB;;AAEnC/F,gCAAIc,IAAJ,CAAS,WAAT,EAAsBqC,MAAtB,CAA6B/B,MAAMsP,SAAN,CAAgB/K,IAAhB,EAAsB,EAAtB,EAA0B,KAA1B,EAAiCvE,MAAM0J,IAAN,CAAW7L,KAA5C,EAAmD8G,KAAnD,CAA7B;;AAEA,gCAAIA,KAAJ,EAAW;AACP,oCAAI3E,MAAM0J,IAAN,CAAW7K,CAAX,CAAaqQ,OAAjB,EAA0B;AACtB,wCAAI;AACAA,gDAAQlP,MAAM0J,IAAN,CAAW9J,MAAX,CAAkBsC,EAAlB,CAAqBlC,MAAM0J,IAAN,CAAW7L,KAAhC,EAAuC6B,IAAvC,CAA4C,WAA5C,EAAyD6P,GAAzD,CAA6D,CAA7D,CAAR,EAAyEvP,MAAM0J,IAAN,CAAW7K,CAAX,CAAasQ,cAAtF,EAAsG,YAAW;AAC7G,iDAAKK,IAAL;AACH,yCAFD;AAGH,qCAJD,CAIE,OAAOzJ,CAAP,EAAU;AACR7C,gDAAQC,KAAR,CAAc,qCAAd;AACH;AACJ,iCARD,MAQO;AACHnD,0CAAM0J,IAAN,CAAW9J,MAAX,CAAkBsC,EAAlB,CAAqBlC,MAAM0J,IAAN,CAAW7L,KAAhC,EAAuC6B,IAAvC,CAA4C,WAA5C,EAAyD6P,GAAzD,CAA6D,CAA7D,EAAgEC,IAAhE;AACH;AACJ;AAEJ,yBAlBD;;AAoBA,4BAAIxP,MAAM0J,IAAN,CAAW7K,CAAX,CAAaR,OAAjB,EAA0B;;AAEtBkG,mCAAOvE,MAAM0J,IAAN,CAAW7K,CAAX,CAAaP,SAAb,CAAuB0B,MAAM0J,IAAN,CAAW7L,KAAlC,EAAyCiF,GAAhD;AACA6B,oCAAQ3E,MAAM0J,IAAN,CAAW7K,CAAX,CAAaP,SAAb,CAAuB0B,MAAM0J,IAAN,CAAW7L,KAAlC,EAAyCkF,IAAjD;;AAEA4M,uCAAWpL,IAAX,EAAiBI,KAAjB;AAEH,yBAPD,MAOO;;AAEHJ,mCAAOvE,MAAM0J,IAAN,CAAWjK,MAAX,CAAkByC,EAAlB,CAAqBlC,MAAM0J,IAAN,CAAW7L,KAAhC,EAAuCmF,IAAvC,CAA4C,MAA5C,KAAuDhD,MAAM0J,IAAN,CAAWjK,MAAX,CAAkByC,EAAlB,CAAqBlC,MAAM0J,IAAN,CAAW7L,KAAhC,EAAuCmF,IAAvC,CAA4C,UAA5C,CAA9D;AACA2B,oCAAQ3E,MAAM0J,IAAN,CAAWjK,MAAX,CAAkByC,EAAlB,CAAqBlC,MAAM0J,IAAN,CAAW7L,KAAhC,EAAuCmF,IAAvC,CAA4C,WAA5C,CAAR;;AAEA2M,uCAAWpL,IAAX,EAAiBI,KAAjB;AAEH;;AAED,4BAAIiL,WAAWhR,IAAIc,IAAJ,CAAS,YAAT,CAAf;AACAd,4BAAIc,IAAJ,CAAS,WAAT,EAAsBqC,MAAtB,CAA6B6N,QAA7B;;AAEA;AACA;AACA,4BAAI,CAAChR,IAAIc,IAAJ,CAAS,kBAAT,EAA6Bc,QAA7B,CAAsC,UAAtC,CAAL,EAAwD;AACpD5B,gCAAI6C,WAAJ,CAAgB,aAAhB;AACA7C,gCAAIc,IAAJ,CAAS,kBAAT,EAA6BkB,EAA7B,CAAgC,kBAAhC,EAAoD,YAAW;AAC3DhC,oCAAIrC,QAAJ,CAAa,aAAb;AACH,6BAFD;AAGH;AAEJ,qBAtDD,MAsDO;;AAEH,4BAAIsT,gBAAgBjR,IAAIc,IAAJ,CAAS,aAAT,EAAwB6P,GAAxB,CAA4B,CAA5B,CAApB;AACA,4BAAIO,cAAclR,IAAIc,IAAJ,CAAS,WAAT,EAAsB6P,GAAtB,CAA0B,CAA1B,CAAlB;AACA,4BAAIQ,oBAAoBnR,IAAIc,IAAJ,CAAS,iBAAT,EAA4B6P,GAA5B,CAAgC,CAAhC,CAAxB;AACA,4BAAIS,cAAcpR,IAAIc,IAAJ,CAAS,WAAT,EAAsB6P,GAAtB,CAA0B,CAA1B,CAAlB;AACA,4BAAIM,aAAJ,EAAmB;AACfA,0CAAcI,aAAd,CAA4BC,WAA5B,CAAwC,kDAAxC,EAA4F,GAA5F;AACH,yBAFD,MAEO,IAAIJ,WAAJ,EAAiB;AACpB,gCAAI;AACAK,mCAAGL,WAAH,EAAgBM,GAAhB,CAAoB,MAApB;AACH,6BAFD,CAEE,OAAOrK,CAAP,EAAU;AACR7C,wCAAQC,KAAR,CAAc,4CAAd;AACH;AACJ,yBANM,MAMA,IAAI4M,iBAAJ,EAAuB;AAC1BA,8CAAkBE,aAAlB,CAAgCC,WAAhC,CAA4C,MAA5C,EAAoD,GAApD;AAEH,yBAHM,MAGA,IAAIF,WAAJ,EAAiB;AACpB,gCAAIhQ,MAAM0J,IAAN,CAAW7K,CAAX,CAAaqQ,OAAjB,EAA0B;AACtB,oCAAI;AACAA,4CAAQc,WAAR,EAAqBR,IAArB;AACH,iCAFD,CAEE,OAAOzJ,CAAP,EAAU;AACR7C,4CAAQC,KAAR,CAAc,qCAAd;AACH;AACJ,6BAND,MAMO;AACH6M,4CAAYR,IAAZ;AACH;AACJ;;AAED5Q,4BAAIrC,QAAJ,CAAa,kBAAb;AAEH;AACJ;AACJ,aA5FD;;AA8FA,gBAAIyD,MAAM0J,IAAN,CAAWvH,KAAX,MAAuBnC,MAAM0J,IAAN,CAAWjK,MAAX,CAAkBR,MAAlB,GAA2B,CAAlD,KAAyDe,MAAM0J,IAAN,CAAW7K,CAAX,CAAaV,WAAb,IAA4B6B,MAAM0J,IAAN,CAAW7K,CAAX,CAAaT,UAAlG,CAAJ,EAAmH;AAC/G4B,sBAAM0J,IAAN,CAAW9K,GAAX,CAAegC,EAAf,CAAkB,oBAAlB,EAAwC,YAAW;AAC/C,wBAAIhC,MAAMoB,MAAM0J,IAAN,CAAW9J,MAAX,CAAkBsC,EAAlB,CAAqBlC,MAAM0J,IAAN,CAAW7L,KAAhC,CAAV;AACA6R,gCAAY9Q,GAAZ;AACH,iBAHD;AAIH,aALD,MAKO;;AAEH;AACAoB,sBAAM0J,IAAN,CAAW9J,MAAX,CAAkBgB,EAAlB,CAAqB,UAArB,EAAiC,YAAW;AACxC8O,gCAAY3T,EAAE,IAAF,CAAZ;AACH,iBAFD;AAGH;;AAEDiE,kBAAM0J,IAAN,CAAW9K,GAAX,CAAegC,EAAf,CAAkB,qBAAlB,EAAyC,UAASC,KAAT,EAAgBuL,SAAhB,EAA2BvO,KAA3B,EAAkC;;AAEvE,oBAAIwS,cAAcrQ,MAAM0J,IAAN,CAAW9J,MAAX,CAAkBsC,EAAlB,CAAqBkK,SAArB,CAAlB;AACA,oBAAIyD,gBAAgBQ,YAAY3Q,IAAZ,CAAiB,aAAjB,EAAgC6P,GAAhC,CAAoC,CAApC,CAApB;AACA,oBAAIO,cAAcO,YAAY3Q,IAAZ,CAAiB,WAAjB,EAA8B6P,GAA9B,CAAkC,CAAlC,CAAlB;AACA,oBAAIQ,oBAAoBM,YAAY3Q,IAAZ,CAAiB,iBAAjB,EAAoC6P,GAApC,CAAwC,CAAxC,CAAxB;AACA,oBAAIe,WAAWD,YAAY3Q,IAAZ,CAAiB,QAAjB,EAA2B6P,GAA3B,CAA+B,CAA/B,CAAf;AACA,oBAAIS,cAAcK,YAAY3Q,IAAZ,CAAiB,WAAjB,EAA8B6P,GAA9B,CAAkC,CAAlC,CAAlB;AACA,oBAAIM,aAAJ,EAAmB;AACfA,kCAAcI,aAAd,CAA4BC,WAA5B,CAAwC,mDAAxC,EAA6F,GAA7F;AACH,iBAFD,MAEO,IAAIJ,WAAJ,EAAiB;AACpB,wBAAI;AACAK,2BAAGL,WAAH,EAAgBM,GAAhB,CAAoB,OAApB;AACH,qBAFD,CAEE,OAAOrK,CAAP,EAAU;AACR7C,gCAAQC,KAAR,CAAc,4CAAd;AACH;AACJ,iBANM,MAMA,IAAI4M,iBAAJ,EAAuB;AAC1BA,sCAAkBE,aAAlB,CAAgCC,WAAhC,CAA4C,OAA5C,EAAqD,GAArD;AAEH,iBAHM,MAGA,IAAIF,WAAJ,EAAiB;AACpB,wBAAIhQ,MAAM0J,IAAN,CAAW7K,CAAX,CAAaqQ,OAAjB,EAA0B;AACtB,4BAAI;AACAA,oCAAQc,WAAR,EAAqB5G,KAArB;AACH,yBAFD,CAEE,OAAOrD,CAAP,EAAU;AACR7C,oCAAQC,KAAR,CAAc,qCAAd;AACH;AACJ,qBAND,MAMO;AACH6M,oCAAY5G,KAAZ;AACH;AACJ,iBAAC,IAAIkH,QAAJ,EAAc;AACZvU,sBAAEuU,QAAF,EAAYtN,IAAZ,CAAiB,KAAjB,EAAwBjH,EAAEuU,QAAF,EAAYtN,IAAZ,CAAiB,KAAjB,EAAwBuN,OAAxB,CAAgC,WAAhC,EAA6C,SAA7C,CAAxB;AACH;;AAED,oBAAIhM,IAAJ;AACA,oBAAIvE,MAAM0J,IAAN,CAAW7K,CAAX,CAAaR,OAAjB,EAA0B;AACtBkG,2BAAOvE,MAAM0J,IAAN,CAAW7K,CAAX,CAAaP,SAAb,CAAuBT,KAAvB,EAA8BiF,GAArC;AACH,iBAFD,MAEO;AACHyB,2BAAOvE,MAAM0J,IAAN,CAAWjK,MAAX,CAAkByC,EAAlB,CAAqBrE,KAArB,EAA4BmF,IAA5B,CAAiC,MAAjC,KAA4ChD,MAAM0J,IAAN,CAAWjK,MAAX,CAAkByC,EAAlB,CAAqBrE,KAArB,EAA4BmF,IAA5B,CAAiC,UAAjC,CAAnD;AAEH;;AAED,oBAAI0C,WAAW1F,MAAM0J,IAAN,CAAW7G,OAAX,CAAmB0B,IAAnB,EAAyB1G,KAAzB,KAAmC,EAAlD;AACA,oBAAI6H,SAAStC,OAAT,IAAoBsC,SAASpC,KAA7B,IAAsCoC,SAASnC,WAA/C,IAA8DmC,SAASlC,EAA3E,EAA+E;AAC3ExD,0BAAM0J,IAAN,CAAW7J,MAAX,CAAkBtD,QAAlB,CAA2B,kBAA3B;AACH;;AAED;AAEH,aAhDD;;AAkDAyD,kBAAM0J,IAAN,CAAW9K,GAAX,CAAegC,EAAf,CAAkB,oBAAlB,EAAwC,UAASC,KAAT,EAAgBuL,SAAhB,EAA2B;AAC/DpM,sBAAM0J,IAAN,CAAW9J,MAAX,CAAkBsC,EAAlB,CAAqBkK,SAArB,EAAgC3K,WAAhC,CAA4C,kBAA5C;AACH,aAFD;AAGH,SAlMD;;AAoMA2N,cAAMrP,SAAN,CAAgBuP,SAAhB,GAA4B,UAASxM,GAAT,EAAcvG,QAAd,EAAwBiU,QAAxB,EAAkC3S,KAAlC,EAAyCkF,IAAzC,EAA+C;AACvE,gBAAI0N,QAAQ,EAAZ;AACA,gBAAItH,WAAW,CAAf;AACA,gBAAIuH,IAAI,EAAR;AACA,gBAAI7N,UAAU,KAAK6G,IAAL,CAAU7G,OAAV,CAAkBC,GAAlB,EAAuBjF,KAAvB,KAAiC,EAA/C;;AAEA;AACA,gBAAI2S,QAAJ,EAAc;AACV,oBAAI,KAAKnB,WAAT,EAAsB;AAClBlG,+BAAW,CAAX;AACH,iBAFD,MAEO;AACHA,+BAAW,CAAX;AACH;AACJ;;AAED,gBAAItG,QAAQO,OAAZ,EAAqB;;AAEjBsN,oBAAI,4BAA4BvH,QAA5B,GAAuC,gBAA3C;AACA,oBAAI,KAAKO,IAAL,CAAU7K,CAAV,CAAYiQ,mBAAhB,EAAqC;AACjC4B,wBAAIA,IAAI,GAAJ,GAAU3U,EAAE4U,KAAF,CAAQ,KAAKjH,IAAL,CAAU7K,CAAV,CAAYiQ,mBAApB,CAAd;AACH;;AAED2B,wBAAQ,+CAA+ClU,QAA/C,GAA0D,0DAA1D,GAAuHsG,QAAQO,OAAR,CAAgB,CAAhB,CAAvH,GAA4IsN,CAA5I,GAAgJ,6CAAxJ;AAEH,aATD,MASO,IAAI7N,QAAQS,KAAZ,EAAmB;;AAEtBoN,oBAAI,eAAevH,QAAf,GAA0B,QAA9B;AACA,oBAAI,KAAKO,IAAL,CAAU7K,CAAV,CAAYkQ,iBAAhB,EAAmC;AAC/B2B,wBAAIA,IAAI,GAAJ,GAAU3U,EAAE4U,KAAF,CAAQ,KAAKjH,IAAL,CAAU7K,CAAV,CAAYkQ,iBAApB,CAAd;AACH;;AAED0B,wBAAQ,6CAA6ClU,QAA7C,GAAwD,4DAAxD,GAAuHsG,QAAQS,KAAR,CAAc,CAAd,CAAvH,GAA0IoN,CAA1I,GAA8I,sFAAtJ;AAEH,aATM,MASA,IAAI7N,QAAQU,WAAZ,EAAyB;;AAE5BmN,oBAAI,4BAA4BvH,QAA5B,GAAuC,kBAA3C;AACA,oBAAI,KAAKO,IAAL,CAAU7K,CAAV,CAAYmQ,uBAAhB,EAAyC;AACrC0B,wBAAIA,IAAI,GAAJ,GAAU3U,EAAE4U,KAAF,CAAQ,KAAKjH,IAAL,CAAU7K,CAAV,CAAYmQ,uBAApB,CAAd;AACH;;AAEDyB,wBAAQ,mDAAmDlU,QAAnD,GAA8D,oEAA9D,GAAqIsG,QAAQU,WAAR,CAAoB,CAApB,CAArI,GAA8JmN,CAA9J,GAAkK,6CAA1K;AAEH,aATM,MASA,IAAI7N,QAAQI,KAAZ,EAAmB;AACtB,oBAAIa,KAAKf,KAAKgB,SAAL,CAAe,CAAf,EAAkB,CAAlB,CAAT;AACA,oBAAID,OAAO,GAAP,IAAcA,OAAO,GAAzB,EAA8B;AAC1Bf,2BAAOhH,EAAEgH,IAAF,EAAQA,IAAR,EAAP;AACH;;AAED0N,wBAAQ1N,IAAR;AAEH,aARM,MAQA,IAAIF,QAAQW,EAAZ,EAAgB;;AAEnBkN,oBAAI,eAAevH,QAAnB;AACA,oBAAI,KAAKO,IAAL,CAAU7K,CAAV,CAAYoQ,cAAhB,EAAgC;AAC5ByB,wBAAIA,IAAI,GAAJ,GAAU3U,EAAE4U,KAAF,CAAQ,KAAKjH,IAAL,CAAU7K,CAAV,CAAYoQ,cAApB,CAAd;AACH;;AAEDwB,wBAAQ,0CAA0ClU,QAA1C,GAAqD,8DAArD,GAAsHsG,QAAQW,EAAR,CAAW,CAAX,CAAtH,GAAsIkN,CAAtI,GAA0I,6CAAlJ;AAEH;;AAED,mBAAOD,KAAP;AACH,SA9DD;;AAgEArB,cAAMrP,SAAN,CAAgBkH,OAAhB,GAA0B,YAAW;AACjC,iBAAKoI,WAAL,GAAmB,KAAnB;AACH,SAFD;;AAIAtT,UAAEoF,EAAF,CAAKC,YAAL,CAAkBlC,OAAlB,CAA0BuR,KAA1B,GAAkCrB,KAAlC;AAEH,KArSD;AAwSC,CAxTA,CAAD;;AA0TA;;;;AAIC,WAAU7T,IAAV,EAAgBC,OAAhB,EAAyB;AACxB,QAAI,OAAOC,MAAP,KAAkB,UAAlB,IAAgCA,OAAOC,GAA3C,EAAgD;AAC9C;AACAD,eAAO,CAAC,QAAD,CAAP,EAAmB,UAAUE,EAAV,EAAc;AAC/B,mBAAQH,QAAQG,EAAR,CAAR;AACD,SAFD;AAGD,KALD,MAKO,IAAI,QAAOC,OAAP,yCAAOA,OAAP,OAAmB,QAAvB,EAAiC;AACtC;AACA;AACA;AACAC,eAAOD,OAAP,GAAiBJ,QAAQM,QAAQ,QAAR,CAAR,CAAjB;AACD,KALM,MAKA;AACLN,gBAAQ0N,MAAR;AACD;AACF,CAdA,aAcO,UAAUnN,CAAV,EAAa;;AAErB,KAAC,YAAW;;AAER;;AAEA,YAAI6U,aAAa,SAAbA,UAAa,GAAW;AACxB,gBAAIjU,UAAU,KAAd;AACA,gBAAIkU,WAAWC,UAAUC,SAAV,CAAoB1N,KAApB,CAA0B,0BAA1B,CAAf;AACA,gBAAIwN,YAAYvQ,SAASuQ,SAAS,CAAT,CAAT,EAAsB,EAAtB,IAA4B,EAA5C,EAAgD;AAC5ClU,0BAAU,IAAV;AACH;;AAED,mBAAOA,OAAP;AACH,SARD;;AAUA,YAAIX,WAAW;AACXgV,mBAAO,CADI;AAEXC,kBAAM,IAFK;AAGXC,wBAAY,IAHD;AAIXC,6BAAiB,GAJN;AAKXC,4BAAgBR;AALL,SAAf;;AAQA,YAAIS,OAAO,SAAPA,IAAO,CAAS5S,OAAT,EAAkB;;AAEzB,iBAAKiL,IAAL,GAAY3N,EAAE0C,OAAF,EAAWuK,IAAX,CAAgB,cAAhB,CAAZ;;AAEA,iBAAKU,IAAL,CAAU7K,CAAV,GAAc9C,EAAE+C,MAAF,CAAS,EAAT,EAAa9C,QAAb,EAAuB,KAAK0N,IAAL,CAAU7K,CAAjC,CAAd;;AAEA,gBAAI,KAAK6K,IAAL,CAAU7K,CAAV,CAAYoS,IAAZ,IAAoB,KAAKvH,IAAL,CAAUvH,KAAV,EAAxB,EAA2C;AACvC,qBAAKrC,IAAL;;AAEA;AACA,qBAAKwR,eAAL,GAAuB,KAAvB;;AAEA;AACA,qBAAKnJ,KAAL,GAAapM,EAAEmE,MAAF,EAAU5D,KAAV,KAAoB,CAAjC;AACA,qBAAKiV,KAAL,GAAcxV,EAAEmE,MAAF,EAAU7D,MAAV,KAAqB,CAAtB,GAA2BN,EAAEmE,MAAF,EAAUoC,SAAV,EAAxC;AACH;;AAED,mBAAO,IAAP;AACH,SAlBD;;AAoBA+O,aAAKtR,SAAL,CAAeD,IAAf,GAAsB,YAAW;;AAE7B,gBAAIE,QAAQ,IAAZ;AACA,gBAAIwR,YAAY,6FAAhB;;AAEA,gBAAIxR,MAAM0J,IAAN,CAAW7K,CAAX,CAAaqS,UAAjB,EAA6B;AACzBM,6BAAa,mDAAb;AACH;;AAED,gBAAIxR,MAAM0J,IAAN,CAAW7K,CAAX,CAAauS,cAAjB,EAAiC;AAC7BpR,sBAAM0J,IAAN,CAAW7J,MAAX,CAAkBtD,QAAlB,CAA2B,sBAA3B;AACH,aAFD,MAEO;AACHyD,sBAAM0J,IAAN,CAAW7J,MAAX,CAAkBtD,QAAlB,CAA2B,4BAA3B;AACH;;AAED,iBAAKmN,IAAL,CAAU7J,MAAV,CAAiBH,IAAjB,CAAsB,aAAtB,EAAqCqC,MAArC,CAA4CyP,SAA5C;;AAEA;AACAxR,kBAAM0J,IAAN,CAAW9K,GAAX,CAAegC,EAAf,CAAkB,4BAAlB,EAAgD,UAASC,KAAT,EAAgBhD,KAAhB,EAAuBuG,KAAvB,EAA8B;;AAE1E;AACA,oBAAI6B,SAASjG,MAAM0J,IAAN,CAAW7K,CAAX,CAAasS,eAAb,GAA+B/M,KAA5C;;AAEA;AACA,oBAAIrI,EAAE,MAAF,EAAUyE,QAAV,CAAmB,cAAnB,KAAsC4D,KAA1C,EAAiD;;AAE7C;AACA6B,6BAAS,CAAT;AACH,iBAJD,MAIO;;AAEH;AACAlK,sBAAE,MAAF,EAAU0F,WAAV,CAAsB,cAAtB;AACH;;AAEDzB,sBAAMsR,eAAN,GAAwB7Q,WAAW,YAAW;AAC1CT,0BAAM0J,IAAN,CAAW9J,MAAX,CAAkBsC,EAAlB,CAAqBrE,KAArB,EAA4BtB,QAA5B,CAAqC,aAArC;AACH,iBAFuB,EAErB0J,SAAS,EAFY,CAAxB;AAGH,aAnBD;;AAqBA,gBAAI+K,QAAQ,CAAZ;AACA;;;;;;AAMA,gBAAIC,OAAO,SAAPA,IAAO,CAASQ,QAAT,EAAmB;;AAE1B,oBAAIC,SAAS1R,MAAM0J,IAAN,CAAW7J,MAAX,CAAkBH,IAAlB,CAAuB,uBAAvB,CAAb;AACA,oBAAIiS,EAAJ;AACA,oBAAIC,EAAJ;;AAEA;AACA,oBAAIC,UAAU,CAAC9V,EAAEmE,MAAF,EAAU5D,KAAV,KAAoBoV,OAAOI,IAAP,CAAY,aAAZ,CAArB,IAAmD,CAAjE;AACA,oBAAIC,UAAW,CAAChW,EAAEmE,MAAF,EAAU7D,MAAV,KAAqBqV,OAAOI,IAAP,CAAY,cAAZ,CAAtB,IAAqD,CAAtD,GAA2D/V,EAAEmE,MAAF,EAAUoC,SAAV,EAAzE;;AAEAqP,qBAAK3R,MAAMmI,KAAN,GAAc0J,OAAnB;AACAD,qBAAK5R,MAAMuR,KAAN,GAAcQ,OAAnB;;AAEA,oBAAIC,IAAI,CAACP,WAAW,CAAZ,IAAkBE,EAA1B;AACA,oBAAIM,IAAI,CAACR,WAAW,CAAZ,IAAkBG,EAA1B;;AAEAF,uBAAO1P,GAAP,CAAW,WAAX,EAAwB,aAAayP,QAAb,GAAwB,IAAxB,GAA+BA,QAA/B,GAA0C,MAAlE,EAA0EzO,IAA1E,CAA+E,YAA/E,EAA6FyO,QAA7F;;AAEA,oBAAIzR,MAAM0J,IAAN,CAAW7K,CAAX,CAAauS,cAAjB,EAAiC;AAC7BM,2BAAOQ,MAAP,GAAgBlQ,GAAhB,CAAoB;AAChB2L,8BAAM,CAACqE,CAAD,GAAK,IADK;AAEhBxP,6BAAK,CAACyP,CAAD,GAAK;AAFM,qBAApB,EAGGjP,IAHH,CAGQ,QAHR,EAGkBgP,CAHlB,EAGqBhP,IAHrB,CAG0B,QAH1B,EAGoCiP,CAHpC;AAIH,iBALD,MAKO;AACHP,2BAAOQ,MAAP,GAAgBlQ,GAAhB,CAAoB,WAApB,EAAiC,kBAAkBgQ,CAAlB,GAAsB,OAAtB,GAAgCC,CAAhC,GAAoC,QAArE,EAA+EjP,IAA/E,CAAoF,QAApF,EAA8FgP,CAA9F,EAAiGhP,IAAjG,CAAsG,QAAtG,EAAgHiP,CAAhH;AACH;AACJ,aA1BD;;AA4BA,gBAAIE,YAAY,SAAZA,SAAY,GAAW;AACvB,oBAAInB,QAAQ,CAAZ,EAAe;AACXhR,0BAAM0J,IAAN,CAAW7J,MAAX,CAAkBtD,QAAlB,CAA2B,WAA3B;AACH,iBAFD,MAEO;AACHyD,0BAAMoS,SAAN;AACH;;AAED,oBAAIpB,QAAQ,CAAZ,EAAe;AACXA,4BAAQ,CAAR;AACH;;AAEDC,qBAAKD,KAAL;AACH,aAZD;;AAcA,gBAAIE,aAAa,SAAbA,UAAa,CAASrQ,KAAT,EAAgB6Q,MAAhB,EAAwB7T,KAAxB,EAA+BwU,QAA/B,EAAyC;AACtD,oBAAIC,IAAIZ,OAAOI,IAAP,CAAY,aAAZ,CAAR;AACA,oBAAIS,EAAJ;AACA,oBAAIvS,MAAM0J,IAAN,CAAW7K,CAAX,CAAaR,OAAjB,EAA0B;AACtBkU,yBAAKvS,MAAM0J,IAAN,CAAW7K,CAAX,CAAaP,SAAb,CAAuBT,KAAvB,EAA8BvB,KAA9B,IAAuCoV,OAAO,CAAP,EAAUc,YAAjD,IAAiEF,CAAtE;AACH,iBAFD,MAEO;AACHC,yBAAKvS,MAAM0J,IAAN,CAAWjK,MAAX,CAAkByC,EAAlB,CAAqBrE,KAArB,EAA4BmF,IAA5B,CAAiC,YAAjC,KAAkD0O,OAAO,CAAP,EAAUc,YAA5D,IAA4EF,CAAjF;AACH;;AAED,oBAAIG,MAAJ;;AAEA,oBAAIzS,MAAM0J,IAAN,CAAW7J,MAAX,CAAkBW,QAAlB,CAA2B,WAA3B,CAAJ,EAA6C;AACzCwQ,4BAAQ,CAAR;AACH,iBAFD,MAEO;AACH,wBAAIuB,KAAKD,CAAT,EAAY;AACRG,iCAASF,KAAKD,CAAd;AACAtB,gCAAQyB,UAAU,CAAlB;AACH;AACJ;;AAED,oBAAIJ,QAAJ,EAAc;AACVrS,0BAAMmI,KAAN,GAAcpM,EAAEmE,MAAF,EAAU5D,KAAV,KAAoB,CAAlC;AACA0D,0BAAMuR,KAAN,GAAexV,EAAEmE,MAAF,EAAU7D,MAAV,KAAqB,CAAtB,GAA2BN,EAAEmE,MAAF,EAAUoC,SAAV,EAAzC;AACH,iBAHD,MAGO;AACHtC,0BAAMmI,KAAN,GAActH,MAAMsH,KAAN,IAAetH,MAAMoH,aAAN,CAAoBC,aAApB,CAAkC,CAAlC,EAAqCC,KAAlE;AACAnI,0BAAMuR,KAAN,GAAc1Q,MAAM0Q,KAAN,IAAe1Q,MAAMoH,aAAN,CAAoBC,aAApB,CAAkC,CAAlC,EAAqCqJ,KAAlE;AACH;;AAEDY;AACA1R,2BAAW,YAAW;AAClBT,0BAAM0J,IAAN,CAAW7J,MAAX,CAAkB4B,WAAlB,CAA8B,aAA9B,EAA6ClF,QAA7C,CAAsD,SAAtD;AACH,iBAFD,EAEG,EAFH;AAGH,aAhCD;;AAkCA,gBAAImW,SAAS,KAAb;;AAEA;AACA1S,kBAAM0J,IAAN,CAAW9K,GAAX,CAAegC,EAAf,CAAkB,8BAAlB,EAAkD,UAASC,KAAT,EAAgBhD,KAAhB,EAAuB;;AAErE;AACA,oBAAI6T,SAAS1R,MAAM0J,IAAN,CAAW9J,MAAX,CAAkBsC,EAAlB,CAAqBrE,KAArB,EAA4B6B,IAA5B,CAAiC,WAAjC,CAAb;;AAEAgS,uBAAO9Q,EAAP,CAAU,UAAV,EAAsB,UAASC,KAAT,EAAgB;AAClCqQ,+BAAWrQ,KAAX,EAAkB6Q,MAAlB,EAA0B7T,KAA1B;AACH,iBAFD;;AAIA6T,uBAAO9Q,EAAP,CAAU,YAAV,EAAwB,UAASC,KAAT,EAAgB;AACpC,wBAAI,CAAC6R,MAAL,EAAa;AACTA,iCAASjS,WAAW,YAAW;AAC3BiS,qCAAS,IAAT;AACH,yBAFQ,EAEN,GAFM,CAAT;AAGH,qBAJD,MAIO;AACHhR,qCAAagR,MAAb;AACAA,iCAAS,IAAT;AACAxB,mCAAWrQ,KAAX,EAAkB6Q,MAAlB,EAA0B7T,KAA1B;AACH;;AAEDgD,0BAAMC,cAAN;AACH,iBAZD;AAcH,aAvBD;;AAyBA;AACA/E,cAAEmE,MAAF,EAAUU,EAAV,CAAa,yDAAb,EAAwE,YAAW;AAC/EZ,sBAAMmI,KAAN,GAAcpM,EAAEmE,MAAF,EAAU5D,KAAV,KAAoB,CAAlC;AACA0D,sBAAMuR,KAAN,GAAexV,EAAEmE,MAAF,EAAU7D,MAAV,KAAqB,CAAtB,GAA2BN,EAAEmE,MAAF,EAAUoC,SAAV,EAAzC;AACA2O,qBAAKD,KAAL;AACH,aAJD;;AAMAjV,cAAE,cAAF,EAAkB6E,EAAlB,CAAqB,UAArB,EAAiC,YAAW;AACxC,oBAAIZ,MAAM0J,IAAN,CAAW7J,MAAX,CAAkBH,IAAlB,CAAuB,uBAAvB,EAAgDT,MAApD,EAA4D;AACxD+R,6BAAShR,MAAM0J,IAAN,CAAW7K,CAAX,CAAamS,KAAtB;AACAmB;AACH;AACJ,aALD;;AAOApW,cAAE,aAAF,EAAiB6E,EAAjB,CAAoB,UAApB,EAAgC,YAAW;AACvC,oBAAIZ,MAAM0J,IAAN,CAAW7J,MAAX,CAAkBH,IAAlB,CAAuB,uBAAvB,EAAgDT,MAApD,EAA4D;AACxD+R,6BAAShR,MAAM0J,IAAN,CAAW7K,CAAX,CAAamS,KAAtB;AACAmB;AACH;AACJ,aALD;;AAOApW,cAAE,iBAAF,EAAqB6E,EAArB,CAAwB,UAAxB,EAAoC,UAASC,KAAT,EAAgB;AAChDqQ,2BAAWrQ,KAAX,EAAkBb,MAAM0J,IAAN,CAAW9J,MAAX,CAAkBsC,EAAlB,CAAqBlC,MAAM0J,IAAN,CAAW7L,KAAhC,EAAuC6B,IAAvC,CAA4C,WAA5C,CAAlB,EAA4EM,MAAM0J,IAAN,CAAW7L,KAAvF,EAA8F,IAA9F;AACH,aAFD;;AAIA;AACAmC,kBAAM0J,IAAN,CAAW9K,GAAX,CAAegC,EAAf,CAAkB,qBAAlB,EAAyC,YAAW;AAChDoQ,wBAAQ,CAAR;AACAhR,sBAAMoS,SAAN;AACH,aAHD;;AAKA;AACApS,kBAAM2S,QAAN;;AAEA3S,kBAAM4S,SAAN;AAEH,SA1LD;;AA4LA;AACAvB,aAAKtR,SAAL,CAAeqS,SAAf,GAA2B,YAAW;AAClC,iBAAK1I,IAAL,CAAU7J,MAAV,CAAiB4B,WAAjB,CAA6B,WAA7B;AACA,iBAAKiI,IAAL,CAAU9J,MAAV,CAAiBF,IAAjB,CAAsB,cAAtB,EAAsCwH,UAAtC,CAAiD,qBAAjD;AACA,iBAAKwC,IAAL,CAAU9J,MAAV,CAAiBF,IAAjB,CAAsB,WAAtB,EAAmCwH,UAAnC,CAA8C,kBAA9C;;AAEA;AACA,iBAAKiB,KAAL,GAAapM,EAAEmE,MAAF,EAAU5D,KAAV,KAAoB,CAAjC;AACA,iBAAKiV,KAAL,GAAcxV,EAAEmE,MAAF,EAAU7D,MAAV,KAAqB,CAAtB,GAA2BN,EAAEmE,MAAF,EAAUoC,SAAV,EAAxC;AACH,SARD;;AAUA+O,aAAKtR,SAAL,CAAe6S,SAAf,GAA2B,YAAW;AAClC,gBAAI5S,QAAQ,IAAZ;AACA,gBAAIwH,cAAc,EAAlB;AACA,gBAAIC,YAAY,EAAhB;AACA,gBAAIM,UAAU,KAAd;;AAEA;AACA,gBAAI8K,SAAS,KAAb;;AAEA;AACA,gBAAIC,SAAS,KAAb;;AAEA9S,kBAAM0J,IAAN,CAAW9J,MAAX,CAAkBgB,EAAlB,CAAqB,eAArB,EAAsC,UAASmF,CAAT,EAAY;;AAE9C,oBAAI/F,MAAM0J,IAAN,CAAW7J,MAAX,CAAkBW,QAAlB,CAA2B,WAA3B,CAAJ,EAA6C;AACzC,wBAAIkR,SAAS1R,MAAM0J,IAAN,CAAW9J,MAAX,CAAkBsC,EAAlB,CAAqBlC,MAAM0J,IAAN,CAAW7L,KAAhC,EAAuC6B,IAAvC,CAA4C,YAA5C,CAAb;;AAEAoT,6BAASpB,OAAOI,IAAP,CAAY,cAAZ,IAA8BJ,OAAO1O,IAAP,CAAY,YAAZ,CAA9B,GAA0DhD,MAAM0J,IAAN,CAAW7J,MAAX,CAAkBH,IAAlB,CAAuB,KAAvB,EAA8BrD,MAA9B,EAAnE;AACAwW,6BAASnB,OAAOI,IAAP,CAAY,aAAZ,IAA6BJ,OAAO1O,IAAP,CAAY,YAAZ,CAA7B,GAAyDhD,MAAM0J,IAAN,CAAW7J,MAAX,CAAkBH,IAAlB,CAAuB,KAAvB,EAA8BpD,KAA9B,EAAlE;AACA,wBAAKuW,UAAUC,MAAf,EAAwB;AACpB/M,0BAAEjF,cAAF;AACA0G,sCAAc;AACVwK,+BAAGjM,EAAEkC,aAAF,CAAgBC,aAAhB,CAA8B,CAA9B,EAAiCC,KAD1B;AAEV8J,+BAAGlM,EAAEkC,aAAF,CAAgBC,aAAhB,CAA8B,CAA9B,EAAiCqJ;AAF1B,yBAAd;AAIH;AACJ;AAEJ,aAhBD;;AAkBAvR,kBAAM0J,IAAN,CAAW9J,MAAX,CAAkBgB,EAAlB,CAAqB,cAArB,EAAqC,UAASmF,CAAT,EAAY;;AAE7C,oBAAI/F,MAAM0J,IAAN,CAAW7J,MAAX,CAAkBW,QAAlB,CAA2B,WAA3B,CAAJ,EAA6C;;AAEzC,wBAAIuS,OAAO/S,MAAM0J,IAAN,CAAW9J,MAAX,CAAkBsC,EAAlB,CAAqBlC,MAAM0J,IAAN,CAAW7L,KAAhC,EAAuC6B,IAAvC,CAA4C,cAA5C,CAAX;AACA,wBAAIsT,SAAJ;AACA,wBAAIC,SAAJ;;AAEAlN,sBAAEjF,cAAF;AACAiH,8BAAU,IAAV;;AAEAN,gCAAY;AACRuK,2BAAGjM,EAAEkC,aAAF,CAAgBC,aAAhB,CAA8B,CAA9B,EAAiCC,KAD5B;AAER8J,2BAAGlM,EAAEkC,aAAF,CAAgBC,aAAhB,CAA8B,CAA9B,EAAiCqJ;AAF5B,qBAAZ;;AAKA;AACAvR,0BAAM0J,IAAN,CAAW7J,MAAX,CAAkBtD,QAAlB,CAA2B,kBAA3B;;AAEA,wBAAIuW,MAAJ,EAAY;AACRG,oCAAa,CAACtL,KAAKC,GAAL,CAASmL,KAAK/P,IAAL,CAAU,QAAV,CAAT,CAAF,IAAoCyE,UAAUwK,CAAV,GAAczK,YAAYyK,CAA9D,CAAZ;AACH,qBAFD,MAEO;AACHgB,oCAAY,CAACtL,KAAKC,GAAL,CAASmL,KAAK/P,IAAL,CAAU,QAAV,CAAT,CAAb;AACH;;AAED,wBAAI6P,MAAJ,EAAY;AACRG,oCAAa,CAACrL,KAAKC,GAAL,CAASmL,KAAK/P,IAAL,CAAU,QAAV,CAAT,CAAF,IAAoCyE,UAAUuK,CAAV,GAAcxK,YAAYwK,CAA9D,CAAZ;AACH,qBAFD,MAEO;AACHgB,oCAAY,CAACrL,KAAKC,GAAL,CAASmL,KAAK/P,IAAL,CAAU,QAAV,CAAT,CAAb;AACH;;AAED,wBAAK2E,KAAKC,GAAL,CAASH,UAAUuK,CAAV,GAAcxK,YAAYwK,CAAnC,IAAwC,EAAzC,IAAiDrK,KAAKC,GAAL,CAASH,UAAUwK,CAAV,GAAczK,YAAYyK,CAAnC,IAAwC,EAA7F,EAAkG;;AAE9F,4BAAIjS,MAAM0J,IAAN,CAAW7K,CAAX,CAAauS,cAAjB,EAAiC;AAC7B2B,iCAAK/Q,GAAL,CAAS;AACL2L,sCAAMqF,YAAY,IADb;AAELxQ,qCAAKyQ,YAAY;AAFZ,6BAAT;AAIH,yBALD,MAKO;AACHF,iCAAK/Q,GAAL,CAAS,WAAT,EAAsB,iBAAiBgR,SAAjB,GAA6B,MAA7B,GAAsCC,SAAtC,GAAkD,QAAxE;AACH;AACJ;AAEJ;AAEJ,aA7CD;;AA+CAjT,kBAAM0J,IAAN,CAAW9J,MAAX,CAAkBgB,EAAlB,CAAqB,aAArB,EAAoC,YAAW;AAC3C,oBAAIZ,MAAM0J,IAAN,CAAW7J,MAAX,CAAkBW,QAAlB,CAA2B,WAA3B,CAAJ,EAA6C;AACzC,wBAAIuH,OAAJ,EAAa;AACTA,kCAAU,KAAV;AACA/H,8BAAM0J,IAAN,CAAW7J,MAAX,CAAkB4B,WAAlB,CAA8B,kBAA9B;AACAzB,8BAAMkT,YAAN,CAAmB1L,WAAnB,EAAgCC,SAAhC,EAA2CoL,MAA3C,EAAmDC,MAAnD;AAEH;AACJ;AACJ,aATD;AAWH,SAxFD;;AA0FAzB,aAAKtR,SAAL,CAAe4S,QAAf,GAA0B,YAAW;;AAEjC,gBAAI3S,QAAQ,IAAZ;AACA,gBAAIwH,cAAc,EAAlB;AACA,gBAAIC,YAAY,EAAhB;AACA,gBAAIW,YAAY,KAAhB;AACA,gBAAIL,UAAU,KAAd;;AAEA;AACA,gBAAI8K,SAAS,KAAb;;AAEA;AACA,gBAAIC,SAAS,KAAb;;AAEA9S,kBAAM0J,IAAN,CAAW9J,MAAX,CAAkBgB,EAAlB,CAAqB,mBAArB,EAA0C,UAASmF,CAAT,EAAY;;AAElD;AACA,oBAAI2L,SAAS1R,MAAM0J,IAAN,CAAW9J,MAAX,CAAkBsC,EAAlB,CAAqBlC,MAAM0J,IAAN,CAAW7L,KAAhC,EAAuC6B,IAAvC,CAA4C,YAA5C,CAAb;;AAEAoT,yBAASpB,OAAOI,IAAP,CAAY,cAAZ,IAA8BJ,OAAO1O,IAAP,CAAY,YAAZ,CAA9B,GAA0DhD,MAAM0J,IAAN,CAAW7J,MAAX,CAAkBH,IAAlB,CAAuB,KAAvB,EAA8BrD,MAA9B,EAAnE;AACAwW,yBAASnB,OAAOI,IAAP,CAAY,aAAZ,IAA6BJ,OAAO1O,IAAP,CAAY,YAAZ,CAA7B,GAAyDhD,MAAM0J,IAAN,CAAW7J,MAAX,CAAkBH,IAAlB,CAAuB,KAAvB,EAA8BpD,KAA9B,EAAlE;;AAEA,oBAAI0D,MAAM0J,IAAN,CAAW7J,MAAX,CAAkBW,QAAlB,CAA2B,WAA3B,CAAJ,EAA6C;AACzC,wBAAIzE,EAAEgK,EAAEsC,MAAJ,EAAY7H,QAAZ,CAAqB,WAArB,MAAsCqS,UAAUC,MAAhD,CAAJ,EAA6D;AACzD/M,0BAAEjF,cAAF;AACA0G,sCAAc;AACVwK,+BAAGjM,EAAEoC,KADK;AAEV8J,+BAAGlM,EAAEwL;AAFK,yBAAd;;AAKAnJ,oCAAY,IAAZ;;AAEA;AACApI,8BAAM0J,IAAN,CAAW7J,MAAX,CAAkByI,UAAlB,IAAgC,CAAhC;AACAtI,8BAAM0J,IAAN,CAAW7J,MAAX,CAAkByI,UAAlB,IAAgC,CAAhC;;AAEAtI,8BAAM0J,IAAN,CAAW7J,MAAX,CAAkB4B,WAAlB,CAA8B,SAA9B,EAAyClF,QAAzC,CAAkD,aAAlD;AACH;AACJ;AACJ,aAzBD;;AA2BAR,cAAEmE,MAAF,EAAUU,EAAV,CAAa,mBAAb,EAAkC,UAASmF,CAAT,EAAY;AAC1C,oBAAIqC,SAAJ,EAAe;AACX,wBAAI2K,OAAO/S,MAAM0J,IAAN,CAAW9J,MAAX,CAAkBsC,EAAlB,CAAqBlC,MAAM0J,IAAN,CAAW7L,KAAhC,EAAuC6B,IAAvC,CAA4C,cAA5C,CAAX;AACA,wBAAIsT,SAAJ;AACA,wBAAIC,SAAJ;;AAEAlL,8BAAU,IAAV;AACAN,gCAAY;AACRuK,2BAAGjM,EAAEoC,KADG;AAER8J,2BAAGlM,EAAEwL;AAFG,qBAAZ;;AAKA;AACAvR,0BAAM0J,IAAN,CAAW7J,MAAX,CAAkBtD,QAAlB,CAA2B,kBAA3B;;AAEA,wBAAIuW,MAAJ,EAAY;AACRG,oCAAa,CAACtL,KAAKC,GAAL,CAASmL,KAAK/P,IAAL,CAAU,QAAV,CAAT,CAAF,IAAoCyE,UAAUwK,CAAV,GAAczK,YAAYyK,CAA9D,CAAZ;AACH,qBAFD,MAEO;AACHgB,oCAAY,CAACtL,KAAKC,GAAL,CAASmL,KAAK/P,IAAL,CAAU,QAAV,CAAT,CAAb;AACH;;AAED,wBAAI6P,MAAJ,EAAY;AACRG,oCAAa,CAACrL,KAAKC,GAAL,CAASmL,KAAK/P,IAAL,CAAU,QAAV,CAAT,CAAF,IAAoCyE,UAAUuK,CAAV,GAAcxK,YAAYwK,CAA9D,CAAZ;AACH,qBAFD,MAEO;AACHgB,oCAAY,CAACrL,KAAKC,GAAL,CAASmL,KAAK/P,IAAL,CAAU,QAAV,CAAT,CAAb;AACH;;AAED,wBAAIhD,MAAM0J,IAAN,CAAW7K,CAAX,CAAauS,cAAjB,EAAiC;AAC7B2B,6BAAK/Q,GAAL,CAAS;AACL2L,kCAAMqF,YAAY,IADb;AAELxQ,iCAAKyQ,YAAY;AAFZ,yBAAT;AAIH,qBALD,MAKO;AACHF,6BAAK/Q,GAAL,CAAS,WAAT,EAAsB,iBAAiBgR,SAAjB,GAA6B,MAA7B,GAAsCC,SAAtC,GAAkD,QAAxE;AACH;AACJ;AACJ,aApCD;;AAsCAlX,cAAEmE,MAAF,EAAUU,EAAV,CAAa,iBAAb,EAAgC,UAASmF,CAAT,EAAY;;AAExC,oBAAIqC,SAAJ,EAAe;AACXA,gCAAY,KAAZ;AACApI,0BAAM0J,IAAN,CAAW7J,MAAX,CAAkB4B,WAAlB,CAA8B,kBAA9B;;AAEA;AACA,wBAAIsG,YAAaP,YAAYwK,CAAZ,KAAkBvK,UAAUuK,CAA7B,IAAoCxK,YAAYyK,CAAZ,KAAkBxK,UAAUwK,CAA5E,CAAJ,EAAqF;AACjFxK,oCAAY;AACRuK,+BAAGjM,EAAEoC,KADG;AAER8J,+BAAGlM,EAAEwL;AAFG,yBAAZ;AAIAvR,8BAAMkT,YAAN,CAAmB1L,WAAnB,EAAgCC,SAAhC,EAA2CoL,MAA3C,EAAmDC,MAAnD;AAEH;;AAED/K,8BAAU,KAAV;AACH;;AAED/H,sBAAM0J,IAAN,CAAW7J,MAAX,CAAkB4B,WAAlB,CAA8B,aAA9B,EAA6ClF,QAA7C,CAAsD,SAAtD;AAEH,aArBD;AAsBH,SArGD;;AAuGA8U,aAAKtR,SAAL,CAAemT,YAAf,GAA8B,UAAS1L,WAAT,EAAsBC,SAAtB,EAAiCoL,MAAjC,EAAyCC,MAAzC,EAAiD;;AAE3E,gBAAI9S,QAAQ,IAAZ;AACA,gBAAI+S,OAAO/S,MAAM0J,IAAN,CAAW9J,MAAX,CAAkBsC,EAAlB,CAAqBlC,MAAM0J,IAAN,CAAW7L,KAAhC,EAAuC6B,IAAvC,CAA4C,cAA5C,CAAX;AACA,gBAAIgS,SAAS1R,MAAM0J,IAAN,CAAW9J,MAAX,CAAkBsC,EAAlB,CAAqBlC,MAAM0J,IAAN,CAAW7L,KAAhC,EAAuC6B,IAAvC,CAA4C,YAA5C,CAAb;AACA,gBAAIsT,YAAa,CAACrL,KAAKC,GAAL,CAASmL,KAAK/P,IAAL,CAAU,QAAV,CAAT,CAAF,IAAoCyE,UAAUuK,CAAV,GAAcxK,YAAYwK,CAA9D,CAAhB;AACA,gBAAIiB,YAAa,CAACtL,KAAKC,GAAL,CAASmL,KAAK/P,IAAL,CAAU,QAAV,CAAT,CAAF,IAAoCyE,UAAUwK,CAAV,GAAczK,YAAYyK,CAA9D,CAAhB;AACA,gBAAIkB,OAAO,CAACnT,MAAM0J,IAAN,CAAW7J,MAAX,CAAkBH,IAAlB,CAAuB,KAAvB,EAA8BrD,MAA9B,KAAyCqV,OAAOI,IAAP,CAAY,cAAZ,CAA1C,IAAyE,CAApF;AACA,gBAAIsB,OAAOzL,KAAKC,GAAL,CAAU8J,OAAOI,IAAP,CAAY,cAAZ,IAA8BnK,KAAKC,GAAL,CAAS8J,OAAO1O,IAAP,CAAY,YAAZ,CAAT,CAA/B,GAAsEhD,MAAM0J,IAAN,CAAW7J,MAAX,CAAkBH,IAAlB,CAAuB,KAAvB,EAA8BrD,MAA9B,EAAtE,GAA+G8W,IAAxH,CAAX;AACA,gBAAIE,OAAO,CAACrT,MAAM0J,IAAN,CAAW7J,MAAX,CAAkBH,IAAlB,CAAuB,KAAvB,EAA8BpD,KAA9B,KAAwCoV,OAAOI,IAAP,CAAY,aAAZ,CAAzC,IAAuE,CAAlF;AACA,gBAAIwB,OAAO3L,KAAKC,GAAL,CAAU8J,OAAOI,IAAP,CAAY,aAAZ,IAA6BnK,KAAKC,GAAL,CAAS8J,OAAO1O,IAAP,CAAY,YAAZ,CAAT,CAA9B,GAAqEhD,MAAM0J,IAAN,CAAW7J,MAAX,CAAkBH,IAAlB,CAAuB,KAAvB,EAA8BpD,KAA9B,EAArE,GAA6G+W,IAAtH,CAAX;;AAEA,gBAAK1L,KAAKC,GAAL,CAASH,UAAUuK,CAAV,GAAcxK,YAAYwK,CAAnC,IAAwC,EAAzC,IAAiDrK,KAAKC,GAAL,CAASH,UAAUwK,CAAV,GAAczK,YAAYyK,CAAnC,IAAwC,EAA7F,EAAkG;AAC9F,oBAAIa,MAAJ,EAAY;AACR,wBAAIG,aAAa,CAACG,IAAlB,EAAwB;AACpBH,oCAAY,CAACG,IAAb;AACH,qBAFD,MAEO,IAAIH,aAAa,CAACE,IAAlB,EAAwB;AAC3BF,oCAAY,CAACE,IAAb;AACH;AACJ;;AAED,oBAAIN,MAAJ,EAAY;AACR,wBAAIG,aAAa,CAACM,IAAlB,EAAwB;AACpBN,oCAAY,CAACM,IAAb;AACH,qBAFD,MAEO,IAAIN,aAAa,CAACK,IAAlB,EAAwB;AAC3BL,oCAAY,CAACK,IAAb;AACH;AACJ;;AAED,oBAAIP,MAAJ,EAAY;AACRC,yBAAK/P,IAAL,CAAU,QAAV,EAAoB2E,KAAKC,GAAL,CAASqL,SAAT,CAApB;AACH,iBAFD,MAEO;AACHA,gCAAY,CAACtL,KAAKC,GAAL,CAASmL,KAAK/P,IAAL,CAAU,QAAV,CAAT,CAAb;AACH;;AAED,oBAAI6P,MAAJ,EAAY;AACRE,yBAAK/P,IAAL,CAAU,QAAV,EAAoB2E,KAAKC,GAAL,CAASoL,SAAT,CAApB;AACH,iBAFD,MAEO;AACHA,gCAAY,CAACrL,KAAKC,GAAL,CAASmL,KAAK/P,IAAL,CAAU,QAAV,CAAT,CAAb;AACH;;AAED,oBAAIhD,MAAM0J,IAAN,CAAW7K,CAAX,CAAauS,cAAjB,EAAiC;AAC7B2B,yBAAK/Q,GAAL,CAAS;AACL2L,8BAAMqF,YAAY,IADb;AAELxQ,6BAAKyQ,YAAY;AAFZ,qBAAT;AAIH,iBALD,MAKO;AACHF,yBAAK/Q,GAAL,CAAS,WAAT,EAAsB,iBAAiBgR,SAAjB,GAA6B,MAA7B,GAAsCC,SAAtC,GAAkD,QAAxE;AACH;AAEJ;AACJ,SAnDD;;AAqDA5B,aAAKtR,SAAL,CAAekH,OAAf,GAAyB,YAAW;;AAEhC,gBAAIjH,QAAQ,IAAZ;;AAEA;AACAA,kBAAM0J,IAAN,CAAW9K,GAAX,CAAeiK,GAAf,CAAmB,UAAnB;AACA9M,cAAEmE,MAAF,EAAU2I,GAAV,CAAc,UAAd;AACA7I,kBAAM0J,IAAN,CAAW9J,MAAX,CAAkBiJ,GAAlB,CAAsB,UAAtB;AACA7I,kBAAM0J,IAAN,CAAW9K,GAAX,CAAeiK,GAAf,CAAmB,aAAnB;AACA7I,kBAAMoS,SAAN;AACA1Q,yBAAa1B,MAAMsR,eAAnB;AACAtR,kBAAMsR,eAAN,GAAwB,KAAxB;AACH,SAZD;;AAcAvV,UAAEoF,EAAF,CAAKC,YAAL,CAAkBlC,OAAlB,CAA0B+R,IAA1B,GAAiCI,IAAjC;AAEH,KAvfD;AA0fC,CA1gBA,CAAD;;AA4gBA;;;;AAIC,WAAU9V,IAAV,EAAgBC,OAAhB,EAAyB;AACxB,QAAI,OAAOC,MAAP,KAAkB,UAAlB,IAAgCA,OAAOC,GAA3C,EAAgD;AAC9C;AACAD,eAAO,CAAC,QAAD,CAAP,EAAmB,UAAUE,EAAV,EAAc;AAC/B,mBAAQH,QAAQG,EAAR,CAAR;AACD,SAFD;AAGD,KALD,MAKO,IAAI,QAAOC,OAAP,yCAAOA,OAAP,OAAmB,QAAvB,EAAiC;AACtC;AACA;AACA;AACAC,eAAOD,OAAP,GAAiBJ,QAAQM,QAAQ,QAAR,CAAR,CAAjB;AACD,KALM,MAKA;AACLN,gBAAQ0N,MAAR;AACD;AACF,CAdA,aAcO,UAAUnN,CAAV,EAAa;;AAErB,KAAC,YAAW;;AAER;;AAEA,YAAIC,WAAW;AACXoE,kBAAM;AADK,SAAf;;AAIA,YAAImT,OAAO,SAAPA,IAAO,CAAS9U,OAAT,EAAkB;;AAEzB,iBAAKiL,IAAL,GAAY3N,EAAE0C,OAAF,EAAWuK,IAAX,CAAgB,cAAhB,CAAZ;;AAEA,iBAAKU,IAAL,CAAU7K,CAAV,GAAc9C,EAAE+C,MAAF,CAAS,EAAT,EAAa9C,QAAb,EAAuB,KAAK0N,IAAL,CAAU7K,CAAjC,CAAd;;AAEA,gBAAI,KAAK6K,IAAL,CAAU7K,CAAV,CAAYuB,IAAhB,EAAsB;AAClB,qBAAKoT,OAAL,GAAetT,OAAOC,QAAP,CAAgBC,IAA/B;AACA,qBAAKN,IAAL;AACH;;AAED,mBAAO,IAAP;AACH,SAZD;;AAcAyT,aAAKxT,SAAL,CAAeD,IAAf,GAAsB,YAAW;AAC7B,gBAAIE,QAAQ,IAAZ;AACA,gBAAIC,KAAJ;;AAEA;AACAD,kBAAM0J,IAAN,CAAW9K,GAAX,CAAegC,EAAf,CAAkB,oBAAlB,EAAwC,UAASC,KAAT,EAAgBuL,SAAhB,EAA2BvO,KAA3B,EAAkC;AACtE,oBAAI4V,QAAQC,YAAZ,EAA0B;AACtBD,4BAAQC,YAAR,CAAqB,IAArB,EAA2B,IAA3B,EAAiC,SAAS1T,MAAM0J,IAAN,CAAW7K,CAAX,CAAaN,SAAtB,GAAkC,SAAlC,GAA8CV,KAA/E;AACH,iBAFD,MAEO;AACHqC,2BAAOC,QAAP,CAAgBC,IAAhB,GAAuB,QAAQJ,MAAM0J,IAAN,CAAW7K,CAAX,CAAaN,SAArB,GAAiC,SAAjC,GAA6CV,KAApE;AACH;AACJ,aAND;;AAQA;AACA9B,cAAEmE,MAAF,EAAUU,EAAV,CAAa,oBAAb,EAAmC,YAAW;AAC1CX,wBAAQC,OAAOC,QAAP,CAAgBC,IAAxB;AACA,oBAAIuT,OAAOrT,SAASL,MAAMM,KAAN,CAAY,SAAZ,EAAuB,CAAvB,CAAT,EAAoC,EAApC,CAAX;;AAEA;AACA,oBAAKN,MAAMI,OAAN,CAAc,QAAQL,MAAM0J,IAAN,CAAW7K,CAAX,CAAaN,SAAnC,IAAgD,CAAC,CAAtD,EAA0D;AACtDyB,0BAAM0J,IAAN,CAAWpI,KAAX,CAAiBqS,IAAjB,EAAuB,KAAvB,EAA8B,KAA9B;AACH,iBAFD,MAEO,IAAI3T,MAAM0J,IAAN,CAAWvK,UAAf,EAA2B;AAC9Ba,0BAAM0J,IAAN,CAAWzC,OAAX;AACH;AAEJ,aAXD;AAYH,SA1BD;;AA4BAsM,aAAKxT,SAAL,CAAekH,OAAf,GAAyB,YAAW;;AAEhC,gBAAI,CAAC,KAAKyC,IAAL,CAAU7K,CAAV,CAAYuB,IAAjB,EAAuB;AACnB;AACH;;AAED;AACA,gBAAI,KAAKoT,OAAL,IAAgB,KAAKA,OAAL,CAAanT,OAAb,CAAqB,QAAQ,KAAKqJ,IAAL,CAAU7K,CAAV,CAAYN,SAAzC,IAAsD,CAA1E,EAA6E;AACzE,oBAAIkV,QAAQC,YAAZ,EAA0B;AACtBD,4BAAQC,YAAR,CAAqB,IAArB,EAA2B,IAA3B,EAAiC,KAAKF,OAAtC;AACH,iBAFD,MAEO;AACHtT,2BAAOC,QAAP,CAAgBC,IAAhB,GAAuB,KAAKoT,OAA5B;AACH;AACJ,aAND,MAMO;AACH,oBAAIC,QAAQC,YAAZ,EAA0B;AACtBD,4BAAQC,YAAR,CAAqB,IAArB,EAA2BnU,SAASqU,KAApC,EAA2C1T,OAAOC,QAAP,CAAgB0T,QAAhB,GAA2B3T,OAAOC,QAAP,CAAgB2T,MAAtF;AACH,iBAFD,MAEO;AACH5T,2BAAOC,QAAP,CAAgBC,IAAhB,GAAuB,EAAvB;AACH;AACJ;;AAED,iBAAKsJ,IAAL,CAAU9K,GAAV,CAAciK,GAAd,CAAkB,UAAlB;AAEH,SAvBD;;AAyBA9M,UAAEoF,EAAF,CAAKC,YAAL,CAAkBlC,OAAlB,CAA0BkB,IAA1B,GAAiCmT,IAAjC;AAEH,KA7ED;AA+EC,CA/FA,CAAD;;AAiGA;;;;AAIC,WAAUhY,IAAV,EAAgBC,OAAhB,EAAyB;AACxB,QAAI,OAAOC,MAAP,KAAkB,UAAlB,IAAgCA,OAAOC,GAA3C,EAAgD;AAC9C;AACAD,eAAO,CAAC,QAAD,CAAP,EAAmB,UAAUE,EAAV,EAAc;AAC/B,mBAAQH,QAAQG,EAAR,CAAR;AACD,SAFD;AAGD,KALD,MAKO,IAAI,QAAOC,OAAP,yCAAOA,OAAP,OAAmB,QAAvB,EAAiC;AACtC;AACA;AACA;AACAC,eAAOD,OAAP,GAAiBJ,QAAQM,QAAQ,QAAR,CAAR,CAAjB;AACD,KALM,MAKA;AACLN,gBAAQ0N,MAAR;AACD;AACF,CAdA,aAcO,UAAUnN,CAAV,EAAa;;AAErB,KAAC,YAAW;;AAER;;AAEA,YAAIC,WAAW;AACX+X,mBAAO,IADI;AAEXC,sBAAU,IAFC;AAGXC,kCAAsB,UAHX;AAIXC,qBAAS,IAJE;AAKXC,iCAAqB,SALV;AAMXC,wBAAY,IAND;AAOXC,oCAAwB,YAPb;AAQXC,uBAAW,IARA;AASXC,mCAAuB;AATZ,SAAf;;AAYA,YAAIC,QAAQ,SAARA,KAAQ,CAAS/V,OAAT,EAAkB;;AAE1B,iBAAKiL,IAAL,GAAY3N,EAAE0C,OAAF,EAAWuK,IAAX,CAAgB,cAAhB,CAAZ;;AAEA,iBAAKU,IAAL,CAAU7K,CAAV,GAAc9C,EAAE+C,MAAF,CAAS,EAAT,EAAa9C,QAAb,EAAuB,KAAK0N,IAAL,CAAU7K,CAAjC,CAAd;AACA,gBAAI,KAAK6K,IAAL,CAAU7K,CAAV,CAAYkV,KAAhB,EAAuB;AACnB,qBAAKjU,IAAL;AACH;;AAED,mBAAO,IAAP;AACH,SAVD;;AAYA0U,cAAMzU,SAAN,CAAgBD,IAAhB,GAAuB,YAAW;AAC9B,gBAAIE,QAAQ,IAAZ;AACA,gBAAIyU,YAAY,yCACZ,sDADJ;AAEAA,yBAAazU,MAAM0J,IAAN,CAAW7K,CAAX,CAAamV,QAAb,GAAwB,+GAA+G,KAAKtK,IAAL,CAAU7K,CAAV,CAAYoV,oBAA3H,GAAkJ,kBAA1K,GAA+L,EAA5M;AACAQ,yBAAazU,MAAM0J,IAAN,CAAW7K,CAAX,CAAaqV,OAAb,GAAuB,8GAA8G,KAAKxK,IAAL,CAAU7K,CAAV,CAAYsV,mBAA1H,GAAgJ,kBAAvK,GAA4L,EAAzM;AACAM,yBAAazU,MAAM0J,IAAN,CAAW7K,CAAX,CAAauV,UAAb,GAA0B,iHAAiH,KAAK1K,IAAL,CAAU7K,CAAV,CAAYwV,sBAA7H,GAAsJ,kBAAhL,GAAqM,EAAlN;AACAI,yBAAazU,MAAM0J,IAAN,CAAW7K,CAAX,CAAayV,SAAb,GAAyB,gHAAgH,KAAK5K,IAAL,CAAU7K,CAAV,CAAY0V,qBAA5H,GAAoJ,kBAA7K,GAAkM,EAA/M;AACAE,yBAAa,cAAb;;AAEA,iBAAK/K,IAAL,CAAU7J,MAAV,CAAiBH,IAAjB,CAAsB,aAAtB,EAAqCqC,MAArC,CAA4C0S,SAA5C;AACA,iBAAK/K,IAAL,CAAU7J,MAAV,CAAiBH,IAAjB,CAAsB,KAAtB,EAA6BqC,MAA7B,CAAoC,sCAApC;AACAhG,cAAE,WAAF,EAAe6E,EAAf,CAAkB,UAAlB,EAA8B,YAAU;AACpCZ,sBAAM0J,IAAN,CAAW7J,MAAX,CAAkBwL,WAAlB,CAA8B,oBAA9B;AACH,aAFD;;AAIAtP,cAAE,sBAAF,EAA0B6E,EAA1B,CAA6B,UAA7B,EAAyC,YAAU;AAC/CZ,sBAAM0J,IAAN,CAAW7J,MAAX,CAAkB4B,WAAlB,CAA8B,oBAA9B;AACH,aAFD;;AAIAzB,kBAAM0J,IAAN,CAAW9K,GAAX,CAAegC,EAAf,CAAkB,oBAAlB,EAAwC,UAASC,KAAT,EAAgBuL,SAAhB,EAA2BvO,KAA3B,EAAkC;;AAEtE4C,2BAAW,YAAW;AAClB1E,sBAAE,oBAAF,EAAwBiH,IAAxB,CAA6B,MAA7B,EAAqC,kDAAmD0R,mBAAmB1U,MAAM0J,IAAN,CAAWjK,MAAX,CAAkByC,EAAlB,CAAqBrE,KAArB,EAA4BmF,IAA5B,CAAiC,yBAAjC,KAA+D9C,OAAOC,QAAP,CAAgBwU,IAAlG,CAAxF;;AAEA5Y,sBAAE,mBAAF,EAAuBiH,IAAvB,CAA4B,MAA5B,EAAoC,2CAA2ChD,MAAM0J,IAAN,CAAWjK,MAAX,CAAkByC,EAAlB,CAAqBrE,KAArB,EAA4BmF,IAA5B,CAAiC,iBAAjC,CAA3C,GAAiG,OAAjG,GAA4G0R,mBAAmB1U,MAAM0J,IAAN,CAAWjK,MAAX,CAAkByC,EAAlB,CAAqBrE,KAArB,EAA4BmF,IAA5B,CAAiC,wBAAjC,KAA8D9C,OAAOC,QAAP,CAAgBwU,IAAjG,CAAhJ;;AAEA5Y,sBAAE,sBAAF,EAA0BiH,IAA1B,CAA+B,MAA/B,EAAuC,uCAAwC0R,mBAAmB1U,MAAM0J,IAAN,CAAWjK,MAAX,CAAkByC,EAAlB,CAAqBrE,KAArB,EAA4BmF,IAA5B,CAAiC,2BAAjC,KAAiE9C,OAAOC,QAAP,CAAgBwU,IAApG,CAA/E;;AAEA5Y,sBAAE,qBAAF,EAAyBiH,IAAzB,CAA8B,MAA9B,EAAsC,qDAAsD0R,mBAAmB1U,MAAM0J,IAAN,CAAWjK,MAAX,CAAkByC,EAAlB,CAAqBrE,KAArB,EAA4BmF,IAA5B,CAAiC,0BAAjC,KAAgE9C,OAAOC,QAAP,CAAgBwU,IAAnG,CAAtD,GAAkK,SAAlK,GAA8KD,mBAAmB1U,MAAM0J,IAAN,CAAWjK,MAAX,CAAkByC,EAAlB,CAAqBrE,KAArB,EAA4BmF,IAA5B,CAAiC,MAAjC,KAA4ChD,MAAM0J,IAAN,CAAWjK,MAAX,CAAkByC,EAAlB,CAAqBrE,KAArB,EAA4BmF,IAA5B,CAAiC,UAAjC,CAA/D,CAA9K,GAA6R,eAA7R,GAA+ShD,MAAM0J,IAAN,CAAWjK,MAAX,CAAkByC,EAAlB,CAAqBrE,KAArB,EAA4BmF,IAA5B,CAAiC,qBAAjC,CAArV;AAEH,iBATD,EASG,GATH;AAUH,aAZD;AAaH,SAjCD;;AAmCAwR,cAAMzU,SAAN,CAAgBkH,OAAhB,GAA0B,YAAW,CAEpC,CAFD;;AAIAlL,UAAEoF,EAAF,CAAKC,YAAL,CAAkBlC,OAAlB,CAA0B6U,KAA1B,GAAkCS,KAAlC;AAEH,KArED;AAyEC,CAzFA,CAAD","file":"lightgallery-all.js","sourcesContent":["/*! lightgallery - v1.6.0 - 2017-08-08\n* http://sachinchoolur.github.io/lightGallery/\n* Copyright (c) 2017 Sachin N; Licensed GPLv3 */\n/*! lightgallery - v1.6.0 - 2017-08-08\n* http://sachinchoolur.github.io/lightGallery/\n* Copyright (c) 2017 Sachin N; Licensed GPLv3 */\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module unless amdModuleId is set\n    define(['jquery'], function (a0) {\n      return (factory(a0));\n    });\n  } else if (typeof exports === 'object') {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like environments that support module.exports,\n    // like Node.\n    module.exports = factory(require('jquery'));\n  } else {\n    factory(root[\"jQuery\"]);\n  }\n}(this, function ($) {\n\n(function() {\n    'use strict';\n\n    var defaults = {\n\n        mode: 'lg-slide',\n\n        // Ex : 'ease'\n        cssEasing: 'ease',\n\n        //'for jquery animation'\n        easing: 'linear',\n        speed: 600,\n        height: '100%',\n        width: '100%',\n        addClass: '',\n        startClass: 'lg-start-zoom',\n        backdropDuration: 150,\n        hideBarsDelay: 6000,\n\n        useLeft: false,\n\n        closable: true,\n        loop: true,\n        escKey: true,\n        keyPress: true,\n        controls: true,\n        slideEndAnimatoin: true,\n        hideControlOnEnd: false,\n        mousewheel: true,\n\n        getCaptionFromTitleOrAlt: true,\n\n        // .lg-item || '.lg-sub-html'\n        appendSubHtmlTo: '.lg-sub-html',\n\n        subHtmlSelectorRelative: false,\n\n        /**\n         * @desc number of preload slides\n         * will exicute only after the current slide is fully loaded.\n         *\n         * @ex you clicked on 4th image and if preload = 1 then 3rd slide and 5th\n         * slide will be loaded in the background after the 4th slide is fully loaded..\n         * if preload is 2 then 2nd 3rd 5th 6th slides will be preloaded.. ... ...\n         *\n         */\n        preload: 1,\n        showAfterLoad: true,\n        selector: '',\n        selectWithin: '',\n        nextHtml: '',\n        prevHtml: '',\n\n        // 0, 1\n        index: false,\n\n        iframeMaxWidth: '100%',\n\n        download: true,\n        counter: true,\n        appendCounterTo: '.lg-toolbar',\n\n        swipeThreshold: 50,\n        enableSwipe: true,\n        enableDrag: true,\n\n        dynamic: false,\n        dynamicEl: [],\n        galleryId: 1\n    };\n\n    function Plugin(element, options) {\n\n        // Current lightGallery element\n        this.el = element;\n\n        // Current jquery element\n        this.$el = $(element);\n\n        // lightGallery settings\n        this.s = $.extend({}, defaults, options);\n\n        // When using dynamic mode, ensure dynamicEl is an array\n        if (this.s.dynamic && this.s.dynamicEl !== 'undefined' && this.s.dynamicEl.constructor === Array && !this.s.dynamicEl.length) {\n            throw ('When using dynamic mode, you must also define dynamicEl as an Array.');\n        }\n\n        // lightGallery modules\n        this.modules = {};\n\n        // false when lightgallery complete first slide;\n        this.lGalleryOn = false;\n\n        this.lgBusy = false;\n\n        // Timeout function for hiding controls;\n        this.hideBartimeout = false;\n\n        // To determine browser supports for touch events;\n        this.isTouch = ('ontouchstart' in document.documentElement);\n\n        // Disable hideControlOnEnd if sildeEndAnimation is true\n        if (this.s.slideEndAnimatoin) {\n            this.s.hideControlOnEnd = false;\n        }\n\n        // Gallery items\n        if (this.s.dynamic) {\n            this.$items = this.s.dynamicEl;\n        } else {\n            if (this.s.selector === 'this') {\n                this.$items = this.$el;\n            } else if (this.s.selector !== '') {\n                if (this.s.selectWithin) {\n                    this.$items = $(this.s.selectWithin).find(this.s.selector);\n                } else {\n                    this.$items = this.$el.find($(this.s.selector));\n                }\n            } else {\n                this.$items = this.$el.children();\n            }\n        }\n\n        // .lg-item\n        this.$slide = '';\n\n        // .lg-outer\n        this.$outer = '';\n\n        this.init();\n\n        return this;\n    }\n\n    Plugin.prototype.init = function() {\n\n        var _this = this;\n\n        // s.preload should not be more than $item.length\n        if (_this.s.preload > _this.$items.length) {\n            _this.s.preload = _this.$items.length;\n        }\n\n        // if dynamic option is enabled execute immediately\n        var _hash = window.location.hash;\n        if (_hash.indexOf('lg=' + this.s.galleryId) > 0) {\n\n            _this.index = parseInt(_hash.split('&slide=')[1], 10);\n\n            $('body').addClass('lg-from-hash');\n            if (!$('body').hasClass('lg-on')) {\n                setTimeout(function() {\n                    _this.build(_this.index);\n                });\n\n                $('body').addClass('lg-on');\n            }\n        }\n\n        if (_this.s.dynamic) {\n\n            _this.$el.trigger('onBeforeOpen.lg');\n\n            _this.index = _this.s.index || 0;\n\n            // prevent accidental double execution\n            if (!$('body').hasClass('lg-on')) {\n                setTimeout(function() {\n                    _this.build(_this.index);\n                    $('body').addClass('lg-on');\n                });\n            }\n        } else {\n\n            // Using different namespace for click because click event should not unbind if selector is same object('this')\n            _this.$items.on('click.lgcustom', function(event) {\n\n                // For IE8\n                try {\n                    event.preventDefault();\n                    event.preventDefault();\n                } catch (er) {\n                    event.returnValue = false;\n                }\n\n                _this.$el.trigger('onBeforeOpen.lg');\n\n                _this.index = _this.s.index || _this.$items.index(this);\n\n                // prevent accidental double execution\n                if (!$('body').hasClass('lg-on')) {\n                    _this.build(_this.index);\n                    $('body').addClass('lg-on');\n                }\n            });\n        }\n\n    };\n\n    Plugin.prototype.build = function(index) {\n\n        var _this = this;\n\n        _this.structure();\n\n        // module constructor\n        $.each($.fn.lightGallery.modules, function(key) {\n            _this.modules[key] = new $.fn.lightGallery.modules[key](_this.el);\n        });\n\n        // initiate slide function\n        _this.slide(index, false, false, false);\n\n        if (_this.s.keyPress) {\n            _this.keyPress();\n        }\n\n        if (_this.$items.length > 1) {\n\n            _this.arrow();\n\n            setTimeout(function() {\n                _this.enableDrag();\n                _this.enableSwipe();\n            }, 50);\n\n            if (_this.s.mousewheel) {\n                _this.mousewheel();\n            }\n        } else {\n            _this.$slide.on('click.lg', function() {\n                _this.$el.trigger('onSlideClick.lg');\n            });\n        }\n\n        _this.counter();\n\n        _this.closeGallery();\n\n        _this.$el.trigger('onAfterOpen.lg');\n\n        // Hide controllers if mouse doesn't move for some period\n        _this.$outer.on('mousemove.lg click.lg touchstart.lg', function() {\n\n            _this.$outer.removeClass('lg-hide-items');\n\n            clearTimeout(_this.hideBartimeout);\n\n            // Timeout will be cleared on each slide movement also\n            _this.hideBartimeout = setTimeout(function() {\n                _this.$outer.addClass('lg-hide-items');\n            }, _this.s.hideBarsDelay);\n\n        });\n\n        _this.$outer.trigger('mousemove.lg');\n\n    };\n\n    Plugin.prototype.structure = function() {\n        var list = '';\n        var controls = '';\n        var i = 0;\n        var subHtmlCont = '';\n        var template;\n        var _this = this;\n\n        $('body').append('<div class=\"lg-backdrop\"></div>');\n        $('.lg-backdrop').css('transition-duration', this.s.backdropDuration + 'ms');\n\n        // Create gallery items\n        for (i = 0; i < this.$items.length; i++) {\n            list += '<div class=\"lg-item\"></div>';\n        }\n\n        // Create controlls\n        if (this.s.controls && this.$items.length > 1) {\n            controls = '<div class=\"lg-actions\">' +\n                '<button class=\"lg-prev lg-icon\">' + this.s.prevHtml + '</button>' +\n                '<button class=\"lg-next lg-icon\">' + this.s.nextHtml + '</button>' +\n                '</div>';\n        }\n\n        if (this.s.appendSubHtmlTo === '.lg-sub-html') {\n            subHtmlCont = '<div class=\"lg-sub-html\"></div>';\n        }\n\n        template = '<div class=\"lg-outer ' + this.s.addClass + ' ' + this.s.startClass + '\">' +\n            '<div class=\"lg\" style=\"width:' + this.s.width + '; height:' + this.s.height + '\">' +\n            '<div class=\"lg-inner\">' + list + '</div>' +\n            '<div class=\"lg-toolbar lg-group\">' +\n            '<span class=\"lg-close lg-icon\"></span>' +\n            '</div>' +\n            controls +\n            subHtmlCont +\n            '</div>' +\n            '</div>';\n\n        $('body').append(template);\n        this.$outer = $('.lg-outer');\n        this.$slide = this.$outer.find('.lg-item');\n\n        if (this.s.useLeft) {\n            this.$outer.addClass('lg-use-left');\n\n            // Set mode lg-slide if use left is true;\n            this.s.mode = 'lg-slide';\n        } else {\n            this.$outer.addClass('lg-use-css3');\n        }\n\n        // For fixed height gallery\n        _this.setTop();\n        $(window).on('resize.lg orientationchange.lg', function() {\n            setTimeout(function() {\n                _this.setTop();\n            }, 100);\n        });\n\n        // add class lg-current to remove initial transition\n        this.$slide.eq(this.index).addClass('lg-current');\n\n        // add Class for css support and transition mode\n        if (this.doCss()) {\n            this.$outer.addClass('lg-css3');\n        } else {\n            this.$outer.addClass('lg-css');\n\n            // Set speed 0 because no animation will happen if browser doesn't support css3\n            this.s.speed = 0;\n        }\n\n        this.$outer.addClass(this.s.mode);\n\n        if (this.s.enableDrag && this.$items.length > 1) {\n            this.$outer.addClass('lg-grab');\n        }\n\n        if (this.s.showAfterLoad) {\n            this.$outer.addClass('lg-show-after-load');\n        }\n\n        if (this.doCss()) {\n            var $inner = this.$outer.find('.lg-inner');\n            $inner.css('transition-timing-function', this.s.cssEasing);\n            $inner.css('transition-duration', this.s.speed + 'ms');\n        }\n\n        setTimeout(function() {\n            $('.lg-backdrop').addClass('in');\n        });\n\n        setTimeout(function() {\n            _this.$outer.addClass('lg-visible');\n        }, this.s.backdropDuration);\n\n        if (this.s.download) {\n            this.$outer.find('.lg-toolbar').append('<a id=\"lg-download\" target=\"_blank\" download class=\"lg-download lg-icon\"></a>');\n        }\n\n        // Store the current scroll top value to scroll back after closing the gallery..\n        this.prevScrollTop = $(window).scrollTop();\n\n    };\n\n    // For fixed height gallery\n    Plugin.prototype.setTop = function() {\n        if (this.s.height !== '100%') {\n            var wH = $(window).height();\n            var top = (wH - parseInt(this.s.height, 10)) / 2;\n            var $lGallery = this.$outer.find('.lg');\n            if (wH >= parseInt(this.s.height, 10)) {\n                $lGallery.css('top', top + 'px');\n            } else {\n                $lGallery.css('top', '0px');\n            }\n        }\n    };\n\n    // Find css3 support\n    Plugin.prototype.doCss = function() {\n        // check for css animation support\n        var support = function() {\n            var transition = ['transition', 'MozTransition', 'WebkitTransition', 'OTransition', 'msTransition', 'KhtmlTransition'];\n            var root = document.documentElement;\n            var i = 0;\n            for (i = 0; i < transition.length; i++) {\n                if (transition[i] in root.style) {\n                    return true;\n                }\n            }\n        };\n\n        if (support()) {\n            return true;\n        }\n\n        return false;\n    };\n\n    /**\n     *  @desc Check the given src is video\n     *  @param {String} src\n     *  @return {Object} video type\n     *  Ex:{ youtube  :  [\"//www.youtube.com/watch?v=c0asJgSyxcY\", \"c0asJgSyxcY\"] }\n     */\n    Plugin.prototype.isVideo = function(src, index) {\n\n        var html;\n        if (this.s.dynamic) {\n            html = this.s.dynamicEl[index].html;\n        } else {\n            html = this.$items.eq(index).attr('data-html');\n        }\n\n        if (!src) {\n            if(html) {\n                return {\n                    html5: true\n                };\n            } else {\n                console.error('lightGallery :- data-src is not pvovided on slide item ' + (index + 1) + '. Please make sure the selector property is properly configured. More info - http://sachinchoolur.github.io/lightGallery/demos/html-markup.html');\n                return false;\n            }\n        }\n\n        var youtube = src.match(/\\/\\/(?:www\\.)?youtu(?:\\.be|be\\.com)\\/(?:watch\\?v=|embed\\/)?([a-z0-9\\-\\_\\%]+)/i);\n        var vimeo = src.match(/\\/\\/(?:www\\.)?vimeo.com\\/([0-9a-z\\-_]+)/i);\n        var dailymotion = src.match(/\\/\\/(?:www\\.)?dai.ly\\/([0-9a-z\\-_]+)/i);\n        var vk = src.match(/\\/\\/(?:www\\.)?(?:vk\\.com|vkontakte\\.ru)\\/(?:video_ext\\.php\\?)(.*)/i);\n\n        if (youtube) {\n            return {\n                youtube: youtube\n            };\n        } else if (vimeo) {\n            return {\n                vimeo: vimeo\n            };\n        } else if (dailymotion) {\n            return {\n                dailymotion: dailymotion\n            };\n        } else if (vk) {\n            return {\n                vk: vk\n            };\n        }\n    };\n\n    /**\n     *  @desc Create image counter\n     *  Ex: 1/10\n     */\n    Plugin.prototype.counter = function() {\n        if (this.s.counter) {\n            $(this.s.appendCounterTo).append('<div id=\"lg-counter\"><span id=\"lg-counter-current\">' + (parseInt(this.index, 10) + 1) + '</span> / <span id=\"lg-counter-all\">' + this.$items.length + '</span></div>');\n        }\n    };\n\n    /**\n     *  @desc add sub-html into the slide\n     *  @param {Number} index - index of the slide\n     */\n    Plugin.prototype.addHtml = function(index) {\n        var subHtml = null;\n        var subHtmlUrl;\n        var $currentEle;\n        if (this.s.dynamic) {\n            if (this.s.dynamicEl[index].subHtmlUrl) {\n                subHtmlUrl = this.s.dynamicEl[index].subHtmlUrl;\n            } else {\n                subHtml = this.s.dynamicEl[index].subHtml;\n            }\n        } else {\n            $currentEle = this.$items.eq(index);\n            if ($currentEle.attr('data-sub-html-url')) {\n                subHtmlUrl = $currentEle.attr('data-sub-html-url');\n            } else {\n                subHtml = $currentEle.attr('data-sub-html');\n                if (this.s.getCaptionFromTitleOrAlt && !subHtml) {\n                    subHtml = $currentEle.attr('title') || $currentEle.find('img').first().attr('alt');\n                }\n            }\n        }\n\n        if (!subHtmlUrl) {\n            if (typeof subHtml !== 'undefined' && subHtml !== null) {\n\n                // get first letter of subhtml\n                // if first letter starts with . or # get the html form the jQuery object\n                var fL = subHtml.substring(0, 1);\n                if (fL === '.' || fL === '#') {\n                    if (this.s.subHtmlSelectorRelative && !this.s.dynamic) {\n                        subHtml = $currentEle.find(subHtml).html();\n                    } else {\n                        subHtml = $(subHtml).html();\n                    }\n                }\n            } else {\n                subHtml = '';\n            }\n        }\n\n        if (this.s.appendSubHtmlTo === '.lg-sub-html') {\n\n            if (subHtmlUrl) {\n                this.$outer.find(this.s.appendSubHtmlTo).load(subHtmlUrl);\n            } else {\n                this.$outer.find(this.s.appendSubHtmlTo).html(subHtml);\n            }\n\n        } else {\n\n            if (subHtmlUrl) {\n                this.$slide.eq(index).load(subHtmlUrl);\n            } else {\n                this.$slide.eq(index).append(subHtml);\n            }\n        }\n\n        // Add lg-empty-html class if title doesn't exist\n        if (typeof subHtml !== 'undefined' && subHtml !== null) {\n            if (subHtml === '') {\n                this.$outer.find(this.s.appendSubHtmlTo).addClass('lg-empty-html');\n            } else {\n                this.$outer.find(this.s.appendSubHtmlTo).removeClass('lg-empty-html');\n            }\n        }\n\n        this.$el.trigger('onAfterAppendSubHtml.lg', [index]);\n    };\n\n    /**\n     *  @desc Preload slides\n     *  @param {Number} index - index of the slide\n     */\n    Plugin.prototype.preload = function(index) {\n        var i = 1;\n        var j = 1;\n        for (i = 1; i <= this.s.preload; i++) {\n            if (i >= this.$items.length - index) {\n                break;\n            }\n\n            this.loadContent(index + i, false, 0);\n        }\n\n        for (j = 1; j <= this.s.preload; j++) {\n            if (index - j < 0) {\n                break;\n            }\n\n            this.loadContent(index - j, false, 0);\n        }\n    };\n\n    /**\n     *  @desc Load slide content into slide.\n     *  @param {Number} index - index of the slide.\n     *  @param {Boolean} rec - if true call loadcontent() function again.\n     *  @param {Boolean} delay - delay for adding complete class. it is 0 except first time.\n     */\n    Plugin.prototype.loadContent = function(index, rec, delay) {\n\n        var _this = this;\n        var _hasPoster = false;\n        var _$img;\n        var _src;\n        var _poster;\n        var _srcset;\n        var _sizes;\n        var _html;\n        var getResponsiveSrc = function(srcItms) {\n            var rsWidth = [];\n            var rsSrc = [];\n            for (var i = 0; i < srcItms.length; i++) {\n                var __src = srcItms[i].split(' ');\n\n                // Manage empty space\n                if (__src[0] === '') {\n                    __src.splice(0, 1);\n                }\n\n                rsSrc.push(__src[0]);\n                rsWidth.push(__src[1]);\n            }\n\n            var wWidth = $(window).width();\n            for (var j = 0; j < rsWidth.length; j++) {\n                if (parseInt(rsWidth[j], 10) > wWidth) {\n                    _src = rsSrc[j];\n                    break;\n                }\n            }\n        };\n\n        if (_this.s.dynamic) {\n\n            if (_this.s.dynamicEl[index].poster) {\n                _hasPoster = true;\n                _poster = _this.s.dynamicEl[index].poster;\n            }\n\n            _html = _this.s.dynamicEl[index].html;\n            _src = _this.s.dynamicEl[index].src;\n\n            if (_this.s.dynamicEl[index].responsive) {\n                var srcDyItms = _this.s.dynamicEl[index].responsive.split(',');\n                getResponsiveSrc(srcDyItms);\n            }\n\n            _srcset = _this.s.dynamicEl[index].srcset;\n            _sizes = _this.s.dynamicEl[index].sizes;\n\n        } else {\n\n            if (_this.$items.eq(index).attr('data-poster')) {\n                _hasPoster = true;\n                _poster = _this.$items.eq(index).attr('data-poster');\n            }\n\n            _html = _this.$items.eq(index).attr('data-html');\n            _src = _this.$items.eq(index).attr('href') || _this.$items.eq(index).attr('data-src');\n\n            if (_this.$items.eq(index).attr('data-responsive')) {\n                var srcItms = _this.$items.eq(index).attr('data-responsive').split(',');\n                getResponsiveSrc(srcItms);\n            }\n\n            _srcset = _this.$items.eq(index).attr('data-srcset');\n            _sizes = _this.$items.eq(index).attr('data-sizes');\n\n        }\n\n        //if (_src || _srcset || _sizes || _poster) {\n\n        var iframe = false;\n        if (_this.s.dynamic) {\n            if (_this.s.dynamicEl[index].iframe) {\n                iframe = true;\n            }\n        } else {\n            if (_this.$items.eq(index).attr('data-iframe') === 'true') {\n                iframe = true;\n            }\n        }\n\n        var _isVideo = _this.isVideo(_src, index);\n        if (!_this.$slide.eq(index).hasClass('lg-loaded')) {\n            if (iframe) {\n                _this.$slide.eq(index).prepend('<div class=\"lg-video-cont lg-has-iframe\" style=\"max-width:' + _this.s.iframeMaxWidth + '\"><div class=\"lg-video\"><iframe class=\"lg-object\" frameborder=\"0\" src=\"' + _src + '\"  allowfullscreen=\"true\"></iframe></div></div>');\n            } else if (_hasPoster) {\n                var videoClass = '';\n                if (_isVideo && _isVideo.youtube) {\n                    videoClass = 'lg-has-youtube';\n                } else if (_isVideo && _isVideo.vimeo) {\n                    videoClass = 'lg-has-vimeo';\n                } else {\n                    videoClass = 'lg-has-html5';\n                }\n\n                _this.$slide.eq(index).prepend('<div class=\"lg-video-cont ' + videoClass + ' \"><div class=\"lg-video\"><span class=\"lg-video-play\"></span><img class=\"lg-object lg-has-poster\" src=\"' + _poster + '\" /></div></div>');\n\n            } else if (_isVideo) {\n                _this.$slide.eq(index).prepend('<div class=\"lg-video-cont \"><div class=\"lg-video\"></div></div>');\n                _this.$el.trigger('hasVideo.lg', [index, _src, _html]);\n            } else {\n                _this.$slide.eq(index).prepend('<div class=\"lg-img-wrap\"><img class=\"lg-object lg-image\" src=\"' + _src + '\" /></div>');\n            }\n\n            _this.$el.trigger('onAferAppendSlide.lg', [index]);\n\n            _$img = _this.$slide.eq(index).find('.lg-object');\n            if (_sizes) {\n                _$img.attr('sizes', _sizes);\n            }\n\n            if (_srcset) {\n                _$img.attr('srcset', _srcset);\n                try {\n                    picturefill({\n                        elements: [_$img[0]]\n                    });\n                } catch (e) {\n                    console.warn('lightGallery :- If you want srcset to be supported for older browser please include picturefil version 2 javascript library in your document.');\n                }\n            }\n\n            if (this.s.appendSubHtmlTo !== '.lg-sub-html') {\n                _this.addHtml(index);\n            }\n\n            _this.$slide.eq(index).addClass('lg-loaded');\n        }\n\n        _this.$slide.eq(index).find('.lg-object').on('load.lg error.lg', function() {\n\n            // For first time add some delay for displaying the start animation.\n            var _speed = 0;\n\n            // Do not change the delay value because it is required for zoom plugin.\n            // If gallery opened from direct url (hash) speed value should be 0\n            if (delay && !$('body').hasClass('lg-from-hash')) {\n                _speed = delay;\n            }\n\n            setTimeout(function() {\n                _this.$slide.eq(index).addClass('lg-complete');\n                _this.$el.trigger('onSlideItemLoad.lg', [index, delay || 0]);\n            }, _speed);\n\n        });\n\n        // @todo check load state for html5 videos\n        if (_isVideo && _isVideo.html5 && !_hasPoster) {\n            _this.$slide.eq(index).addClass('lg-complete');\n        }\n\n        if (rec === true) {\n            if (!_this.$slide.eq(index).hasClass('lg-complete')) {\n                _this.$slide.eq(index).find('.lg-object').on('load.lg error.lg', function() {\n                    _this.preload(index);\n                });\n            } else {\n                _this.preload(index);\n            }\n        }\n\n        //}\n    };\n\n    /**\n    *   @desc slide function for lightgallery\n        ** Slide() gets call on start\n        ** ** Set lg.on true once slide() function gets called.\n        ** Call loadContent() on slide() function inside setTimeout\n        ** ** On first slide we do not want any animation like slide of fade\n        ** ** So on first slide( if lg.on if false that is first slide) loadContent() should start loading immediately\n        ** ** Else loadContent() should wait for the transition to complete.\n        ** ** So set timeout s.speed + 50\n    <=> ** loadContent() will load slide content in to the particular slide\n        ** ** It has recursion (rec) parameter. if rec === true loadContent() will call preload() function.\n        ** ** preload will execute only when the previous slide is fully loaded (images iframe)\n        ** ** avoid simultaneous image load\n    <=> ** Preload() will check for s.preload value and call loadContent() again accoring to preload value\n        ** loadContent()  <====> Preload();\n\n    *   @param {Number} index - index of the slide\n    *   @param {Boolean} fromTouch - true if slide function called via touch event or mouse drag\n    *   @param {Boolean} fromThumb - true if slide function called via thumbnail click\n    *   @param {String} direction - Direction of the slide(next/prev)\n    */\n    Plugin.prototype.slide = function(index, fromTouch, fromThumb, direction) {\n\n        var _prevIndex = this.$outer.find('.lg-current').index();\n        var _this = this;\n\n        // Prevent if multiple call\n        // Required for hsh plugin\n        if (_this.lGalleryOn && (_prevIndex === index)) {\n            return;\n        }\n\n        var _length = this.$slide.length;\n        var _time = _this.lGalleryOn ? this.s.speed : 0;\n\n        if (!_this.lgBusy) {\n\n            if (this.s.download) {\n                var _src;\n                if (_this.s.dynamic) {\n                    _src = _this.s.dynamicEl[index].downloadUrl !== false && (_this.s.dynamicEl[index].downloadUrl || _this.s.dynamicEl[index].src);\n                } else {\n                    _src = _this.$items.eq(index).attr('data-download-url') !== 'false' && (_this.$items.eq(index).attr('data-download-url') || _this.$items.eq(index).attr('href') || _this.$items.eq(index).attr('data-src'));\n\n                }\n\n                if (_src) {\n                    $('#lg-download').attr('href', _src);\n                    _this.$outer.removeClass('lg-hide-download');\n                } else {\n                    _this.$outer.addClass('lg-hide-download');\n                }\n            }\n\n            this.$el.trigger('onBeforeSlide.lg', [_prevIndex, index, fromTouch, fromThumb]);\n\n            _this.lgBusy = true;\n\n            clearTimeout(_this.hideBartimeout);\n\n            // Add title if this.s.appendSubHtmlTo === lg-sub-html\n            if (this.s.appendSubHtmlTo === '.lg-sub-html') {\n\n                // wait for slide animation to complete\n                setTimeout(function() {\n                    _this.addHtml(index);\n                }, _time);\n            }\n\n            this.arrowDisable(index);\n\n            if (!direction) {\n                if (index < _prevIndex) {\n                    direction = 'prev';\n                } else if (index > _prevIndex) {\n                    direction = 'next';\n                }\n            }\n\n            if (!fromTouch) {\n\n                // remove all transitions\n                _this.$outer.addClass('lg-no-trans');\n\n                this.$slide.removeClass('lg-prev-slide lg-next-slide');\n\n                if (direction === 'prev') {\n\n                    //prevslide\n                    this.$slide.eq(index).addClass('lg-prev-slide');\n                    this.$slide.eq(_prevIndex).addClass('lg-next-slide');\n                } else {\n\n                    // next slide\n                    this.$slide.eq(index).addClass('lg-next-slide');\n                    this.$slide.eq(_prevIndex).addClass('lg-prev-slide');\n                }\n\n                // give 50 ms for browser to add/remove class\n                setTimeout(function() {\n                    _this.$slide.removeClass('lg-current');\n\n                    //_this.$slide.eq(_prevIndex).removeClass('lg-current');\n                    _this.$slide.eq(index).addClass('lg-current');\n\n                    // reset all transitions\n                    _this.$outer.removeClass('lg-no-trans');\n                }, 50);\n            } else {\n\n                this.$slide.removeClass('lg-prev-slide lg-current lg-next-slide');\n                var touchPrev;\n                var touchNext;\n                if (_length > 2) {\n                    touchPrev = index - 1;\n                    touchNext = index + 1;\n\n                    if ((index === 0) && (_prevIndex === _length - 1)) {\n\n                        // next slide\n                        touchNext = 0;\n                        touchPrev = _length - 1;\n                    } else if ((index === _length - 1) && (_prevIndex === 0)) {\n\n                        // prev slide\n                        touchNext = 0;\n                        touchPrev = _length - 1;\n                    }\n\n                } else {\n                    touchPrev = 0;\n                    touchNext = 1;\n                }\n\n                if (direction === 'prev') {\n                    _this.$slide.eq(touchNext).addClass('lg-next-slide');\n                } else {\n                    _this.$slide.eq(touchPrev).addClass('lg-prev-slide');\n                }\n\n                _this.$slide.eq(index).addClass('lg-current');\n            }\n\n            if (_this.lGalleryOn) {\n                setTimeout(function() {\n                    _this.loadContent(index, true, 0);\n                }, this.s.speed + 50);\n\n                setTimeout(function() {\n                    _this.lgBusy = false;\n                    _this.$el.trigger('onAfterSlide.lg', [_prevIndex, index, fromTouch, fromThumb]);\n                }, this.s.speed);\n\n            } else {\n                _this.loadContent(index, true, _this.s.backdropDuration);\n\n                _this.lgBusy = false;\n                _this.$el.trigger('onAfterSlide.lg', [_prevIndex, index, fromTouch, fromThumb]);\n            }\n\n            _this.lGalleryOn = true;\n\n            if (this.s.counter) {\n                $('#lg-counter-current').text(index + 1);\n            }\n\n        }\n\n    };\n\n    /**\n     *  @desc Go to next slide\n     *  @param {Boolean} fromTouch - true if slide function called via touch event\n     */\n    Plugin.prototype.goToNextSlide = function(fromTouch) {\n        var _this = this;\n        var _loop = _this.s.loop;\n        if (fromTouch && _this.$slide.length < 3) {\n            _loop = false;\n        }\n\n        if (!_this.lgBusy) {\n            if ((_this.index + 1) < _this.$slide.length) {\n                _this.index++;\n                _this.$el.trigger('onBeforeNextSlide.lg', [_this.index]);\n                _this.slide(_this.index, fromTouch, false, 'next');\n            } else {\n                if (_loop) {\n                    _this.index = 0;\n                    _this.$el.trigger('onBeforeNextSlide.lg', [_this.index]);\n                    _this.slide(_this.index, fromTouch, false, 'next');\n                } else if (_this.s.slideEndAnimatoin && !fromTouch) {\n                    _this.$outer.addClass('lg-right-end');\n                    setTimeout(function() {\n                        _this.$outer.removeClass('lg-right-end');\n                    }, 400);\n                }\n            }\n        }\n    };\n\n    /**\n     *  @desc Go to previous slide\n     *  @param {Boolean} fromTouch - true if slide function called via touch event\n     */\n    Plugin.prototype.goToPrevSlide = function(fromTouch) {\n        var _this = this;\n        var _loop = _this.s.loop;\n        if (fromTouch && _this.$slide.length < 3) {\n            _loop = false;\n        }\n\n        if (!_this.lgBusy) {\n            if (_this.index > 0) {\n                _this.index--;\n                _this.$el.trigger('onBeforePrevSlide.lg', [_this.index, fromTouch]);\n                _this.slide(_this.index, fromTouch, false, 'prev');\n            } else {\n                if (_loop) {\n                    _this.index = _this.$items.length - 1;\n                    _this.$el.trigger('onBeforePrevSlide.lg', [_this.index, fromTouch]);\n                    _this.slide(_this.index, fromTouch, false, 'prev');\n                } else if (_this.s.slideEndAnimatoin && !fromTouch) {\n                    _this.$outer.addClass('lg-left-end');\n                    setTimeout(function() {\n                        _this.$outer.removeClass('lg-left-end');\n                    }, 400);\n                }\n            }\n        }\n    };\n\n    Plugin.prototype.keyPress = function() {\n        var _this = this;\n        if (this.$items.length > 1) {\n            $(window).on('keyup.lg', function(e) {\n                if (_this.$items.length > 1) {\n                    if (e.keyCode === 37) {\n                        e.preventDefault();\n                        _this.goToPrevSlide();\n                    }\n\n                    if (e.keyCode === 39) {\n                        e.preventDefault();\n                        _this.goToNextSlide();\n                    }\n                }\n            });\n        }\n\n        $(window).on('keydown.lg', function(e) {\n            if (_this.s.escKey === true && e.keyCode === 27) {\n                e.preventDefault();\n                if (!_this.$outer.hasClass('lg-thumb-open')) {\n                    _this.destroy();\n                } else {\n                    _this.$outer.removeClass('lg-thumb-open');\n                }\n            }\n        });\n    };\n\n    Plugin.prototype.arrow = function() {\n        var _this = this;\n        this.$outer.find('.lg-prev').on('click.lg', function() {\n            _this.goToPrevSlide();\n        });\n\n        this.$outer.find('.lg-next').on('click.lg', function() {\n            _this.goToNextSlide();\n        });\n    };\n\n    Plugin.prototype.arrowDisable = function(index) {\n\n        // Disable arrows if s.hideControlOnEnd is true\n        if (!this.s.loop && this.s.hideControlOnEnd) {\n            if ((index + 1) < this.$slide.length) {\n                this.$outer.find('.lg-next').removeAttr('disabled').removeClass('disabled');\n            } else {\n                this.$outer.find('.lg-next').attr('disabled', 'disabled').addClass('disabled');\n            }\n\n            if (index > 0) {\n                this.$outer.find('.lg-prev').removeAttr('disabled').removeClass('disabled');\n            } else {\n                this.$outer.find('.lg-prev').attr('disabled', 'disabled').addClass('disabled');\n            }\n        }\n    };\n\n    Plugin.prototype.setTranslate = function($el, xValue, yValue) {\n        // jQuery supports Automatic CSS prefixing since jQuery 1.8.0\n        if (this.s.useLeft) {\n            $el.css('left', xValue);\n        } else {\n            $el.css({\n                transform: 'translate3d(' + (xValue) + 'px, ' + yValue + 'px, 0px)'\n            });\n        }\n    };\n\n    Plugin.prototype.touchMove = function(startCoords, endCoords) {\n\n        var distance = endCoords - startCoords;\n\n        if (Math.abs(distance) > 15) {\n            // reset opacity and transition duration\n            this.$outer.addClass('lg-dragging');\n\n            // move current slide\n            this.setTranslate(this.$slide.eq(this.index), distance, 0);\n\n            // move next and prev slide with current slide\n            this.setTranslate($('.lg-prev-slide'), -this.$slide.eq(this.index).width() + distance, 0);\n            this.setTranslate($('.lg-next-slide'), this.$slide.eq(this.index).width() + distance, 0);\n        }\n    };\n\n    Plugin.prototype.touchEnd = function(distance) {\n        var _this = this;\n\n        // keep slide animation for any mode while dragg/swipe\n        if (_this.s.mode !== 'lg-slide') {\n            _this.$outer.addClass('lg-slide');\n        }\n\n        this.$slide.not('.lg-current, .lg-prev-slide, .lg-next-slide').css('opacity', '0');\n\n        // set transition duration\n        setTimeout(function() {\n            _this.$outer.removeClass('lg-dragging');\n            if ((distance < 0) && (Math.abs(distance) > _this.s.swipeThreshold)) {\n                _this.goToNextSlide(true);\n            } else if ((distance > 0) && (Math.abs(distance) > _this.s.swipeThreshold)) {\n                _this.goToPrevSlide(true);\n            } else if (Math.abs(distance) < 5) {\n\n                // Trigger click if distance is less than 5 pix\n                _this.$el.trigger('onSlideClick.lg');\n            }\n\n            _this.$slide.removeAttr('style');\n        });\n\n        // remove slide class once drag/swipe is completed if mode is not slide\n        setTimeout(function() {\n            if (!_this.$outer.hasClass('lg-dragging') && _this.s.mode !== 'lg-slide') {\n                _this.$outer.removeClass('lg-slide');\n            }\n        }, _this.s.speed + 100);\n\n    };\n\n    Plugin.prototype.enableSwipe = function() {\n        var _this = this;\n        var startCoords = 0;\n        var endCoords = 0;\n        var isMoved = false;\n\n        if (_this.s.enableSwipe && _this.doCss()) {\n\n            _this.$slide.on('touchstart.lg', function(e) {\n                if (!_this.$outer.hasClass('lg-zoomed') && !_this.lgBusy) {\n                    e.preventDefault();\n                    _this.manageSwipeClass();\n                    startCoords = e.originalEvent.targetTouches[0].pageX;\n                }\n            });\n\n            _this.$slide.on('touchmove.lg', function(e) {\n                if (!_this.$outer.hasClass('lg-zoomed')) {\n                    e.preventDefault();\n                    endCoords = e.originalEvent.targetTouches[0].pageX;\n                    _this.touchMove(startCoords, endCoords);\n                    isMoved = true;\n                }\n            });\n\n            _this.$slide.on('touchend.lg', function() {\n                if (!_this.$outer.hasClass('lg-zoomed')) {\n                    if (isMoved) {\n                        isMoved = false;\n                        _this.touchEnd(endCoords - startCoords);\n                    } else {\n                        _this.$el.trigger('onSlideClick.lg');\n                    }\n                }\n            });\n        }\n\n    };\n\n    Plugin.prototype.enableDrag = function() {\n        var _this = this;\n        var startCoords = 0;\n        var endCoords = 0;\n        var isDraging = false;\n        var isMoved = false;\n        if (_this.s.enableDrag && _this.doCss()) {\n            _this.$slide.on('mousedown.lg', function(e) {\n                // execute only on .lg-object\n                if (!_this.$outer.hasClass('lg-zoomed')) {\n                    if ($(e.target).hasClass('lg-object') || $(e.target).hasClass('lg-video-play')) {\n                        e.preventDefault();\n\n                        if (!_this.lgBusy) {\n                            _this.manageSwipeClass();\n                            startCoords = e.pageX;\n                            isDraging = true;\n\n                            // ** Fix for webkit cursor issue https://code.google.com/p/chromium/issues/detail?id=26723\n                            _this.$outer.scrollLeft += 1;\n                            _this.$outer.scrollLeft -= 1;\n\n                            // *\n\n                            _this.$outer.removeClass('lg-grab').addClass('lg-grabbing');\n\n                            _this.$el.trigger('onDragstart.lg');\n                        }\n\n                    }\n                }\n            });\n\n            $(window).on('mousemove.lg', function(e) {\n                if (isDraging) {\n                    isMoved = true;\n                    endCoords = e.pageX;\n                    _this.touchMove(startCoords, endCoords);\n                    _this.$el.trigger('onDragmove.lg');\n                }\n            });\n\n            $(window).on('mouseup.lg', function(e) {\n                if (isMoved) {\n                    isMoved = false;\n                    _this.touchEnd(endCoords - startCoords);\n                    _this.$el.trigger('onDragend.lg');\n                } else if ($(e.target).hasClass('lg-object') || $(e.target).hasClass('lg-video-play')) {\n                    _this.$el.trigger('onSlideClick.lg');\n                }\n\n                // Prevent execution on click\n                if (isDraging) {\n                    isDraging = false;\n                    _this.$outer.removeClass('lg-grabbing').addClass('lg-grab');\n                }\n            });\n\n        }\n    };\n\n    Plugin.prototype.manageSwipeClass = function() {\n        var _touchNext = this.index + 1;\n        var _touchPrev = this.index - 1;\n        if (this.s.loop && this.$slide.length > 2) {\n            if (this.index === 0) {\n                _touchPrev = this.$slide.length - 1;\n            } else if (this.index === this.$slide.length - 1) {\n                _touchNext = 0;\n            }\n        }\n\n        this.$slide.removeClass('lg-next-slide lg-prev-slide');\n        if (_touchPrev > -1) {\n            this.$slide.eq(_touchPrev).addClass('lg-prev-slide');\n        }\n\n        this.$slide.eq(_touchNext).addClass('lg-next-slide');\n    };\n\n    Plugin.prototype.mousewheel = function() {\n        var _this = this;\n        _this.$outer.on('mousewheel.lg', function(e) {\n\n            if (!e.deltaY) {\n                return;\n            }\n\n            if (e.deltaY > 0) {\n                _this.goToPrevSlide();\n            } else {\n                _this.goToNextSlide();\n            }\n\n            e.preventDefault();\n        });\n\n    };\n\n    Plugin.prototype.closeGallery = function() {\n\n        var _this = this;\n        var mousedown = false;\n        this.$outer.find('.lg-close').on('click.lg', function() {\n            _this.destroy();\n        });\n\n        if (_this.s.closable) {\n\n            // If you drag the slide and release outside gallery gets close on chrome\n            // for preventing this check mousedown and mouseup happened on .lg-item or lg-outer\n            _this.$outer.on('mousedown.lg', function(e) {\n\n                if ($(e.target).is('.lg-outer') || $(e.target).is('.lg-item ') || $(e.target).is('.lg-img-wrap')) {\n                    mousedown = true;\n                } else {\n                    mousedown = false;\n                }\n\n            });\n\n            _this.$outer.on('mouseup.lg', function(e) {\n\n                if ($(e.target).is('.lg-outer') || $(e.target).is('.lg-item ') || $(e.target).is('.lg-img-wrap') && mousedown) {\n                    if (!_this.$outer.hasClass('lg-dragging')) {\n                        _this.destroy();\n                    }\n                }\n\n            });\n\n        }\n\n    };\n\n    Plugin.prototype.destroy = function(d) {\n\n        var _this = this;\n\n        if (!d) {\n            _this.$el.trigger('onBeforeClose.lg');\n            $(window).scrollTop(_this.prevScrollTop);\n        }\n\n\n        /**\n         * if d is false or undefined destroy will only close the gallery\n         * plugins instance remains with the element\n         *\n         * if d is true destroy will completely remove the plugin\n         */\n\n        if (d) {\n            if (!_this.s.dynamic) {\n                // only when not using dynamic mode is $items a jquery collection\n                this.$items.off('click.lg click.lgcustom');\n            }\n\n            $.removeData(_this.el, 'lightGallery');\n        }\n\n        // Unbind all events added by lightGallery\n        this.$el.off('.lg.tm');\n\n        // Distroy all lightGallery modules\n        $.each($.fn.lightGallery.modules, function(key) {\n            if (_this.modules[key]) {\n                _this.modules[key].destroy();\n            }\n        });\n\n        this.lGalleryOn = false;\n\n        clearTimeout(_this.hideBartimeout);\n        this.hideBartimeout = false;\n        $(window).off('.lg');\n        $('body').removeClass('lg-on lg-from-hash');\n\n        if (_this.$outer) {\n            _this.$outer.removeClass('lg-visible');\n        }\n\n        $('.lg-backdrop').removeClass('in');\n\n        setTimeout(function() {\n            if (_this.$outer) {\n                _this.$outer.remove();\n            }\n\n            $('.lg-backdrop').remove();\n\n            if (!d) {\n                _this.$el.trigger('onCloseAfter.lg');\n            }\n\n        }, _this.s.backdropDuration + 50);\n    };\n\n    $.fn.lightGallery = function(options) {\n        return this.each(function() {\n            if (!$.data(this, 'lightGallery')) {\n                $.data(this, 'lightGallery', new Plugin(this, options));\n            } else {\n                try {\n                    $(this).data('lightGallery').init();\n                } catch (err) {\n                    console.error('lightGallery has not initiated properly');\n                }\n            }\n        });\n    };\n\n    $.fn.lightGallery.modules = {};\n\n})();\n\n\n}));\n\n/*! lg-autoplay - v1.0.4 - 2017-03-28\n* http://sachinchoolur.github.io/lightGallery\n* Copyright (c) 2017 Sachin N; Licensed GPLv3 */\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module unless amdModuleId is set\n    define(['jquery'], function (a0) {\n      return (factory(a0));\n    });\n  } else if (typeof exports === 'object') {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like environments that support module.exports,\n    // like Node.\n    module.exports = factory(require('jquery'));\n  } else {\n    factory(jQuery);\n  }\n}(this, function ($) {\n\n\n(function() {\n\n    'use strict';\n\n    var defaults = {\n        autoplay: false,\n        pause: 5000,\n        progressBar: true,\n        fourceAutoplay: false,\n        autoplayControls: true,\n        appendAutoplayControlsTo: '.lg-toolbar'\n    };\n\n    /**\n     * Creates the autoplay plugin.\n     * @param {object} element - lightGallery element\n     */\n    var Autoplay = function(element) {\n\n        this.core = $(element).data('lightGallery');\n\n        this.$el = $(element);\n\n        // Execute only if items are above 1\n        if (this.core.$items.length < 2) {\n            return false;\n        }\n\n        this.core.s = $.extend({}, defaults, this.core.s);\n        this.interval = false;\n\n        // Identify if slide happened from autoplay\n        this.fromAuto = true;\n\n        // Identify if autoplay canceled from touch/drag\n        this.canceledOnTouch = false;\n\n        // save fourceautoplay value\n        this.fourceAutoplayTemp = this.core.s.fourceAutoplay;\n\n        // do not allow progress bar if browser does not support css3 transitions\n        if (!this.core.doCss()) {\n            this.core.s.progressBar = false;\n        }\n\n        this.init();\n\n        return this;\n    };\n\n    Autoplay.prototype.init = function() {\n        var _this = this;\n\n        // append autoplay controls\n        if (_this.core.s.autoplayControls) {\n            _this.controls();\n        }\n\n        // Create progress bar\n        if (_this.core.s.progressBar) {\n            _this.core.$outer.find('.lg').append('<div class=\"lg-progress-bar\"><div class=\"lg-progress\"></div></div>');\n        }\n\n        // set progress\n        _this.progress();\n\n        // Start autoplay\n        if (_this.core.s.autoplay) {\n            _this.$el.one('onSlideItemLoad.lg.tm', function() {\n                _this.startlAuto();\n            });\n        }\n\n        // cancel interval on touchstart and dragstart\n        _this.$el.on('onDragstart.lg.tm touchstart.lg.tm', function() {\n            if (_this.interval) {\n                _this.cancelAuto();\n                _this.canceledOnTouch = true;\n            }\n        });\n\n        // restore autoplay if autoplay canceled from touchstart / dragstart\n        _this.$el.on('onDragend.lg.tm touchend.lg.tm onSlideClick.lg.tm', function() {\n            if (!_this.interval && _this.canceledOnTouch) {\n                _this.startlAuto();\n                _this.canceledOnTouch = false;\n            }\n        });\n\n    };\n\n    Autoplay.prototype.progress = function() {\n\n        var _this = this;\n        var _$progressBar;\n        var _$progress;\n\n        _this.$el.on('onBeforeSlide.lg.tm', function() {\n\n            // start progress bar animation\n            if (_this.core.s.progressBar && _this.fromAuto) {\n                _$progressBar = _this.core.$outer.find('.lg-progress-bar');\n                _$progress = _this.core.$outer.find('.lg-progress');\n                if (_this.interval) {\n                    _$progress.removeAttr('style');\n                    _$progressBar.removeClass('lg-start');\n                    setTimeout(function() {\n                        _$progress.css('transition', 'width ' + (_this.core.s.speed + _this.core.s.pause) + 'ms ease 0s');\n                        _$progressBar.addClass('lg-start');\n                    }, 20);\n                }\n            }\n\n            // Remove setinterval if slide is triggered manually and fourceautoplay is false\n            if (!_this.fromAuto && !_this.core.s.fourceAutoplay) {\n                _this.cancelAuto();\n            }\n\n            _this.fromAuto = false;\n\n        });\n    };\n\n    // Manage autoplay via play/stop buttons\n    Autoplay.prototype.controls = function() {\n        var _this = this;\n        var _html = '<span class=\"lg-autoplay-button lg-icon\"></span>';\n\n        // Append autoplay controls\n        $(this.core.s.appendAutoplayControlsTo).append(_html);\n\n        _this.core.$outer.find('.lg-autoplay-button').on('click.lg', function() {\n            if ($(_this.core.$outer).hasClass('lg-show-autoplay')) {\n                _this.cancelAuto();\n                _this.core.s.fourceAutoplay = false;\n            } else {\n                if (!_this.interval) {\n                    _this.startlAuto();\n                    _this.core.s.fourceAutoplay = _this.fourceAutoplayTemp;\n                }\n            }\n        });\n    };\n\n    // Autostart gallery\n    Autoplay.prototype.startlAuto = function() {\n        var _this = this;\n\n        _this.core.$outer.find('.lg-progress').css('transition', 'width ' + (_this.core.s.speed + _this.core.s.pause) + 'ms ease 0s');\n        _this.core.$outer.addClass('lg-show-autoplay');\n        _this.core.$outer.find('.lg-progress-bar').addClass('lg-start');\n\n        _this.interval = setInterval(function() {\n            if (_this.core.index + 1 < _this.core.$items.length) {\n                _this.core.index++;\n            } else {\n                _this.core.index = 0;\n            }\n\n            _this.fromAuto = true;\n            _this.core.slide(_this.core.index, false, false, 'next');\n        }, _this.core.s.speed + _this.core.s.pause);\n    };\n\n    // cancel Autostart\n    Autoplay.prototype.cancelAuto = function() {\n        clearInterval(this.interval);\n        this.interval = false;\n        this.core.$outer.find('.lg-progress').removeAttr('style');\n        this.core.$outer.removeClass('lg-show-autoplay');\n        this.core.$outer.find('.lg-progress-bar').removeClass('lg-start');\n    };\n\n    Autoplay.prototype.destroy = function() {\n\n        this.cancelAuto();\n        this.core.$outer.find('.lg-progress-bar').remove();\n    };\n\n    $.fn.lightGallery.modules.autoplay = Autoplay;\n\n})();\n\n\n}));\n\n/*! lg-fullscreen - v1.0.1 - 2016-09-30\n* http://sachinchoolur.github.io/lightGallery\n* Copyright (c) 2016 Sachin N; Licensed GPLv3 */\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module unless amdModuleId is set\n    define(['jquery'], function (a0) {\n      return (factory(a0));\n    });\n  } else if (typeof exports === 'object') {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like environments that support module.exports,\n    // like Node.\n    module.exports = factory(require('jquery'));\n  } else {\n    factory(jQuery);\n  }\n}(this, function ($) {\n\n(function() {\n\n    'use strict';\n\n    var defaults = {\n        fullScreen: true\n    };\n\n    var Fullscreen = function(element) {\n\n        // get lightGallery core plugin data\n        this.core = $(element).data('lightGallery');\n\n        this.$el = $(element);\n\n        // extend module defalut settings with lightGallery core settings\n        this.core.s = $.extend({}, defaults, this.core.s);\n\n        this.init();\n\n        return this;\n    };\n\n    Fullscreen.prototype.init = function() {\n        var fullScreen = '';\n        if (this.core.s.fullScreen) {\n\n            // check for fullscreen browser support\n            if (!document.fullscreenEnabled && !document.webkitFullscreenEnabled &&\n                !document.mozFullScreenEnabled && !document.msFullscreenEnabled) {\n                return;\n            } else {\n                fullScreen = '<span class=\"lg-fullscreen lg-icon\"></span>';\n                this.core.$outer.find('.lg-toolbar').append(fullScreen);\n                this.fullScreen();\n            }\n        }\n    };\n\n    Fullscreen.prototype.requestFullscreen = function() {\n        var el = document.documentElement;\n        if (el.requestFullscreen) {\n            el.requestFullscreen();\n        } else if (el.msRequestFullscreen) {\n            el.msRequestFullscreen();\n        } else if (el.mozRequestFullScreen) {\n            el.mozRequestFullScreen();\n        } else if (el.webkitRequestFullscreen) {\n            el.webkitRequestFullscreen();\n        }\n    };\n\n    Fullscreen.prototype.exitFullscreen = function() {\n        if (document.exitFullscreen) {\n            document.exitFullscreen();\n        } else if (document.msExitFullscreen) {\n            document.msExitFullscreen();\n        } else if (document.mozCancelFullScreen) {\n            document.mozCancelFullScreen();\n        } else if (document.webkitExitFullscreen) {\n            document.webkitExitFullscreen();\n        }\n    };\n\n    // https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Using_full_screen_mode\n    Fullscreen.prototype.fullScreen = function() {\n        var _this = this;\n\n        $(document).on('fullscreenchange.lg webkitfullscreenchange.lg mozfullscreenchange.lg MSFullscreenChange.lg', function() {\n            _this.core.$outer.toggleClass('lg-fullscreen-on');\n        });\n\n        this.core.$outer.find('.lg-fullscreen').on('click.lg', function() {\n            if (!document.fullscreenElement &&\n                !document.mozFullScreenElement && !document.webkitFullscreenElement && !document.msFullscreenElement) {\n                _this.requestFullscreen();\n            } else {\n                _this.exitFullscreen();\n            }\n        });\n\n    };\n\n    Fullscreen.prototype.destroy = function() {\n\n        // exit from fullscreen if activated\n        this.exitFullscreen();\n\n        $(document).off('fullscreenchange.lg webkitfullscreenchange.lg mozfullscreenchange.lg MSFullscreenChange.lg');\n    };\n\n    $.fn.lightGallery.modules.fullscreen = Fullscreen;\n\n})();\n\n}));\n\n/*! lg-pager - v1.0.2 - 2017-01-22\n* http://sachinchoolur.github.io/lightGallery\n* Copyright (c) 2017 Sachin N; Licensed GPLv3 */\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module unless amdModuleId is set\n    define(['jquery'], function (a0) {\n      return (factory(a0));\n    });\n  } else if (typeof exports === 'object') {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like environments that support module.exports,\n    // like Node.\n    module.exports = factory(require('jquery'));\n  } else {\n    factory(jQuery);\n  }\n}(this, function ($) {\n\n(function() {\n\n    'use strict';\n\n    var defaults = {\n        pager: false\n    };\n\n    var Pager = function(element) {\n\n        this.core = $(element).data('lightGallery');\n\n        this.$el = $(element);\n        this.core.s = $.extend({}, defaults, this.core.s);\n        if (this.core.s.pager && this.core.$items.length > 1) {\n            this.init();\n        }\n\n        return this;\n    };\n\n    Pager.prototype.init = function() {\n        var _this = this;\n        var pagerList = '';\n        var $pagerCont;\n        var $pagerOuter;\n        var timeout;\n\n        _this.core.$outer.find('.lg').append('<div class=\"lg-pager-outer\"></div>');\n\n        if (_this.core.s.dynamic) {\n            for (var i = 0; i < _this.core.s.dynamicEl.length; i++) {\n                pagerList += '<span class=\"lg-pager-cont\"> <span class=\"lg-pager\"></span><div class=\"lg-pager-thumb-cont\"><span class=\"lg-caret\"></span> <img src=\"' + _this.core.s.dynamicEl[i].thumb + '\" /></div></span>';\n            }\n        } else {\n            _this.core.$items.each(function() {\n\n                if (!_this.core.s.exThumbImage) {\n                    pagerList += '<span class=\"lg-pager-cont\"> <span class=\"lg-pager\"></span><div class=\"lg-pager-thumb-cont\"><span class=\"lg-caret\"></span> <img src=\"' + $(this).find('img').attr('src') + '\" /></div></span>';\n                } else {\n                    pagerList += '<span class=\"lg-pager-cont\"> <span class=\"lg-pager\"></span><div class=\"lg-pager-thumb-cont\"><span class=\"lg-caret\"></span> <img src=\"' + $(this).attr(_this.core.s.exThumbImage) + '\" /></div></span>';\n                }\n\n            });\n        }\n\n        $pagerOuter = _this.core.$outer.find('.lg-pager-outer');\n\n        $pagerOuter.html(pagerList);\n\n        $pagerCont = _this.core.$outer.find('.lg-pager-cont');\n        $pagerCont.on('click.lg touchend.lg', function() {\n            var _$this = $(this);\n            _this.core.index = _$this.index();\n            _this.core.slide(_this.core.index, false, true, false);\n        });\n\n        $pagerOuter.on('mouseover.lg', function() {\n            clearTimeout(timeout);\n            $pagerOuter.addClass('lg-pager-hover');\n        });\n\n        $pagerOuter.on('mouseout.lg', function() {\n            timeout = setTimeout(function() {\n                $pagerOuter.removeClass('lg-pager-hover');\n            });\n        });\n\n        _this.core.$el.on('onBeforeSlide.lg.tm', function(e, prevIndex, index) {\n            $pagerCont.removeClass('lg-pager-active');\n            $pagerCont.eq(index).addClass('lg-pager-active');\n        });\n\n    };\n\n    Pager.prototype.destroy = function() {\n\n    };\n\n    $.fn.lightGallery.modules.pager = Pager;\n\n})();\n\n\n}));\n\n/*! lg-thumbnail - v1.1.0 - 2017-08-08\n* http://sachinchoolur.github.io/lightGallery\n* Copyright (c) 2017 Sachin N; Licensed GPLv3 */\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module unless amdModuleId is set\n    define(['jquery'], function (a0) {\n      return (factory(a0));\n    });\n  } else if (typeof exports === 'object') {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like environments that support module.exports,\n    // like Node.\n    module.exports = factory(require('jquery'));\n  } else {\n    factory(jQuery);\n  }\n}(this, function ($) {\n\n(function() {\n\n    'use strict';\n\n    var defaults = {\n        thumbnail: true,\n\n        animateThumb: true,\n        currentPagerPosition: 'middle',\n\n        thumbWidth: 100,\n        thumbHeight: '80px',\n        thumbContHeight: 100,\n        thumbMargin: 5,\n\n        exThumbImage: false,\n        showThumbByDefault: true,\n        toogleThumb: true,\n        pullCaptionUp: true,\n\n        enableThumbDrag: true,\n        enableThumbSwipe: true,\n        swipeThreshold: 50,\n\n        loadYoutubeThumbnail: true,\n        youtubeThumbSize: 1,\n\n        loadVimeoThumbnail: true,\n        vimeoThumbSize: 'thumbnail_small',\n\n        loadDailymotionThumbnail: true\n    };\n\n    var Thumbnail = function(element) {\n\n        // get lightGallery core plugin data\n        this.core = $(element).data('lightGallery');\n\n        // extend module default settings with lightGallery core settings\n        this.core.s = $.extend({}, defaults, this.core.s);\n\n        this.$el = $(element);\n        this.$thumbOuter = null;\n        this.thumbOuterWidth = 0;\n        this.thumbTotalWidth = (this.core.$items.length * (this.core.s.thumbWidth + this.core.s.thumbMargin));\n        this.thumbIndex = this.core.index;\n\n        if (this.core.s.animateThumb) {\n            this.core.s.thumbHeight = '100%';\n        }\n\n        // Thumbnail animation value\n        this.left = 0;\n\n        this.init();\n\n        return this;\n    };\n\n    Thumbnail.prototype.init = function() {\n        var _this = this;\n        if (this.core.s.thumbnail && this.core.$items.length > 1) {\n            if (this.core.s.showThumbByDefault) {\n                setTimeout(function(){\n                    _this.core.$outer.addClass('lg-thumb-open');\n                }, 700);\n            }\n\n            if (this.core.s.pullCaptionUp) {\n                this.core.$outer.addClass('lg-pull-caption-up');\n            }\n\n            this.build();\n            if (this.core.s.animateThumb && this.core.doCss()) {\n                if (this.core.s.enableThumbDrag) {\n                    this.enableThumbDrag();\n                }\n\n                if (this.core.s.enableThumbSwipe) {\n                    this.enableThumbSwipe();\n                }\n\n                this.thumbClickable = false;\n            } else {\n                this.thumbClickable = true;\n            }\n\n            this.toogle();\n            this.thumbkeyPress();\n        }\n    };\n\n    Thumbnail.prototype.build = function() {\n        var _this = this;\n        var thumbList = '';\n        var vimeoErrorThumbSize = '';\n        var $thumb;\n        var html = '<div class=\"lg-thumb-outer\">' +\n            '<div class=\"lg-thumb lg-group\">' +\n            '</div>' +\n            '</div>';\n\n        switch (this.core.s.vimeoThumbSize) {\n            case 'thumbnail_large':\n                vimeoErrorThumbSize = '640';\n                break;\n            case 'thumbnail_medium':\n                vimeoErrorThumbSize = '200x150';\n                break;\n            case 'thumbnail_small':\n                vimeoErrorThumbSize = '100x75';\n        }\n\n        _this.core.$outer.addClass('lg-has-thumb');\n\n        _this.core.$outer.find('.lg').append(html);\n\n        _this.$thumbOuter = _this.core.$outer.find('.lg-thumb-outer');\n        _this.thumbOuterWidth = _this.$thumbOuter.width();\n\n        if (_this.core.s.animateThumb) {\n            _this.core.$outer.find('.lg-thumb').css({\n                width: _this.thumbTotalWidth + 'px',\n                position: 'relative'\n            });\n        }\n\n        if (this.core.s.animateThumb) {\n            _this.$thumbOuter.css('height', _this.core.s.thumbContHeight + 'px');\n        }\n\n        function getThumb(src, thumb, index) {\n            var isVideo = _this.core.isVideo(src, index) || {};\n            var thumbImg;\n            var vimeoId = '';\n\n            if (isVideo.youtube || isVideo.vimeo || isVideo.dailymotion) {\n                if (isVideo.youtube) {\n                    if (_this.core.s.loadYoutubeThumbnail) {\n                        thumbImg = '//img.youtube.com/vi/' + isVideo.youtube[1] + '/' + _this.core.s.youtubeThumbSize + '.jpg';\n                    } else {\n                        thumbImg = thumb;\n                    }\n                } else if (isVideo.vimeo) {\n                    if (_this.core.s.loadVimeoThumbnail) {\n                        thumbImg = '//i.vimeocdn.com/video/error_' + vimeoErrorThumbSize + '.jpg';\n                        vimeoId = isVideo.vimeo[1];\n                    } else {\n                        thumbImg = thumb;\n                    }\n                } else if (isVideo.dailymotion) {\n                    if (_this.core.s.loadDailymotionThumbnail) {\n                        thumbImg = '//www.dailymotion.com/thumbnail/video/' + isVideo.dailymotion[1];\n                    } else {\n                        thumbImg = thumb;\n                    }\n                }\n            } else {\n                thumbImg = thumb;\n            }\n\n            thumbList += '<div data-vimeo-id=\"' + vimeoId + '\" class=\"lg-thumb-item\" style=\"width:' + _this.core.s.thumbWidth + 'px; height: ' + _this.core.s.thumbHeight + '; margin-right: ' + _this.core.s.thumbMargin + 'px\"><img src=\"' + thumbImg + '\" /></div>';\n            vimeoId = '';\n        }\n\n        if (_this.core.s.dynamic) {\n            for (var i = 0; i < _this.core.s.dynamicEl.length; i++) {\n                getThumb(_this.core.s.dynamicEl[i].src, _this.core.s.dynamicEl[i].thumb, i);\n            }\n        } else {\n            _this.core.$items.each(function(i) {\n\n                if (!_this.core.s.exThumbImage) {\n                    getThumb($(this).attr('href') || $(this).attr('data-src'), $(this).find('img').attr('src'), i);\n                } else {\n                    getThumb($(this).attr('href') || $(this).attr('data-src'), $(this).attr(_this.core.s.exThumbImage), i);\n                }\n\n            });\n        }\n\n        _this.core.$outer.find('.lg-thumb').html(thumbList);\n\n        $thumb = _this.core.$outer.find('.lg-thumb-item');\n\n        // Load vimeo thumbnails\n        $thumb.each(function() {\n            var $this = $(this);\n            var vimeoVideoId = $this.attr('data-vimeo-id');\n\n            if (vimeoVideoId) {\n                $.getJSON('//www.vimeo.com/api/v2/video/' + vimeoVideoId + '.json?callback=?', {\n                    format: 'json'\n                }, function(data) {\n                    $this.find('img').attr('src', data[0][_this.core.s.vimeoThumbSize]);\n                });\n            }\n        });\n\n        // manage active class for thumbnail\n        $thumb.eq(_this.core.index).addClass('active');\n        _this.core.$el.on('onBeforeSlide.lg.tm', function() {\n            $thumb.removeClass('active');\n            $thumb.eq(_this.core.index).addClass('active');\n        });\n\n        $thumb.on('click.lg touchend.lg', function() {\n            var _$this = $(this);\n            setTimeout(function() {\n\n                // In IE9 and bellow touch does not support\n                // Go to slide if browser does not support css transitions\n                if ((_this.thumbClickable && !_this.core.lgBusy) || !_this.core.doCss()) {\n                    _this.core.index = _$this.index();\n                    _this.core.slide(_this.core.index, false, true, false);\n                }\n            }, 50);\n        });\n\n        _this.core.$el.on('onBeforeSlide.lg.tm', function() {\n            _this.animateThumb(_this.core.index);\n        });\n\n        $(window).on('resize.lg.thumb orientationchange.lg.thumb', function() {\n            setTimeout(function() {\n                _this.animateThumb(_this.core.index);\n                _this.thumbOuterWidth = _this.$thumbOuter.width();\n            }, 200);\n        });\n\n    };\n\n    Thumbnail.prototype.setTranslate = function(value) {\n        // jQuery supports Automatic CSS prefixing since jQuery 1.8.0\n        this.core.$outer.find('.lg-thumb').css({\n            transform: 'translate3d(-' + (value) + 'px, 0px, 0px)'\n        });\n    };\n\n    Thumbnail.prototype.animateThumb = function(index) {\n        var $thumb = this.core.$outer.find('.lg-thumb');\n        if (this.core.s.animateThumb) {\n            var position;\n            switch (this.core.s.currentPagerPosition) {\n                case 'left':\n                    position = 0;\n                    break;\n                case 'middle':\n                    position = (this.thumbOuterWidth / 2) - (this.core.s.thumbWidth / 2);\n                    break;\n                case 'right':\n                    position = this.thumbOuterWidth - this.core.s.thumbWidth;\n            }\n            this.left = ((this.core.s.thumbWidth + this.core.s.thumbMargin) * index - 1) - position;\n            if (this.left > (this.thumbTotalWidth - this.thumbOuterWidth)) {\n                this.left = this.thumbTotalWidth - this.thumbOuterWidth;\n            }\n\n            if (this.left < 0) {\n                this.left = 0;\n            }\n\n            if (this.core.lGalleryOn) {\n                if (!$thumb.hasClass('on')) {\n                    this.core.$outer.find('.lg-thumb').css('transition-duration', this.core.s.speed + 'ms');\n                }\n\n                if (!this.core.doCss()) {\n                    $thumb.animate({\n                        left: -this.left + 'px'\n                    }, this.core.s.speed);\n                }\n            } else {\n                if (!this.core.doCss()) {\n                    $thumb.css('left', -this.left + 'px');\n                }\n            }\n\n            this.setTranslate(this.left);\n\n        }\n    };\n\n    // Enable thumbnail dragging and swiping\n    Thumbnail.prototype.enableThumbDrag = function() {\n\n        var _this = this;\n        var startCoords = 0;\n        var endCoords = 0;\n        var isDraging = false;\n        var isMoved = false;\n        var tempLeft = 0;\n\n        _this.$thumbOuter.addClass('lg-grab');\n\n        _this.core.$outer.find('.lg-thumb').on('mousedown.lg.thumb', function(e) {\n            if (_this.thumbTotalWidth > _this.thumbOuterWidth) {\n                // execute only on .lg-object\n                e.preventDefault();\n                startCoords = e.pageX;\n                isDraging = true;\n\n                // ** Fix for webkit cursor issue https://code.google.com/p/chromium/issues/detail?id=26723\n                _this.core.$outer.scrollLeft += 1;\n                _this.core.$outer.scrollLeft -= 1;\n\n                // *\n                _this.thumbClickable = false;\n                _this.$thumbOuter.removeClass('lg-grab').addClass('lg-grabbing');\n            }\n        });\n\n        $(window).on('mousemove.lg.thumb', function(e) {\n            if (isDraging) {\n                tempLeft = _this.left;\n                isMoved = true;\n                endCoords = e.pageX;\n\n                _this.$thumbOuter.addClass('lg-dragging');\n\n                tempLeft = tempLeft - (endCoords - startCoords);\n\n                if (tempLeft > (_this.thumbTotalWidth - _this.thumbOuterWidth)) {\n                    tempLeft = _this.thumbTotalWidth - _this.thumbOuterWidth;\n                }\n\n                if (tempLeft < 0) {\n                    tempLeft = 0;\n                }\n\n                // move current slide\n                _this.setTranslate(tempLeft);\n\n            }\n        });\n\n        $(window).on('mouseup.lg.thumb', function() {\n            if (isMoved) {\n                isMoved = false;\n                _this.$thumbOuter.removeClass('lg-dragging');\n\n                _this.left = tempLeft;\n\n                if (Math.abs(endCoords - startCoords) < _this.core.s.swipeThreshold) {\n                    _this.thumbClickable = true;\n                }\n\n            } else {\n                _this.thumbClickable = true;\n            }\n\n            if (isDraging) {\n                isDraging = false;\n                _this.$thumbOuter.removeClass('lg-grabbing').addClass('lg-grab');\n            }\n        });\n\n    };\n\n    Thumbnail.prototype.enableThumbSwipe = function() {\n        var _this = this;\n        var startCoords = 0;\n        var endCoords = 0;\n        var isMoved = false;\n        var tempLeft = 0;\n\n        _this.core.$outer.find('.lg-thumb').on('touchstart.lg', function(e) {\n            if (_this.thumbTotalWidth > _this.thumbOuterWidth) {\n                e.preventDefault();\n                startCoords = e.originalEvent.targetTouches[0].pageX;\n                _this.thumbClickable = false;\n            }\n        });\n\n        _this.core.$outer.find('.lg-thumb').on('touchmove.lg', function(e) {\n            if (_this.thumbTotalWidth > _this.thumbOuterWidth) {\n                e.preventDefault();\n                endCoords = e.originalEvent.targetTouches[0].pageX;\n                isMoved = true;\n\n                _this.$thumbOuter.addClass('lg-dragging');\n\n                tempLeft = _this.left;\n\n                tempLeft = tempLeft - (endCoords - startCoords);\n\n                if (tempLeft > (_this.thumbTotalWidth - _this.thumbOuterWidth)) {\n                    tempLeft = _this.thumbTotalWidth - _this.thumbOuterWidth;\n                }\n\n                if (tempLeft < 0) {\n                    tempLeft = 0;\n                }\n\n                // move current slide\n                _this.setTranslate(tempLeft);\n\n            }\n        });\n\n        _this.core.$outer.find('.lg-thumb').on('touchend.lg', function() {\n            if (_this.thumbTotalWidth > _this.thumbOuterWidth) {\n\n                if (isMoved) {\n                    isMoved = false;\n                    _this.$thumbOuter.removeClass('lg-dragging');\n                    if (Math.abs(endCoords - startCoords) < _this.core.s.swipeThreshold) {\n                        _this.thumbClickable = true;\n                    }\n\n                    _this.left = tempLeft;\n                } else {\n                    _this.thumbClickable = true;\n                }\n            } else {\n                _this.thumbClickable = true;\n            }\n        });\n\n    };\n\n    Thumbnail.prototype.toogle = function() {\n        var _this = this;\n        if (_this.core.s.toogleThumb) {\n            _this.core.$outer.addClass('lg-can-toggle');\n            _this.$thumbOuter.append('<span class=\"lg-toogle-thumb lg-icon\"></span>');\n            _this.core.$outer.find('.lg-toogle-thumb').on('click.lg', function() {\n                _this.core.$outer.toggleClass('lg-thumb-open');\n            });\n        }\n    };\n\n    Thumbnail.prototype.thumbkeyPress = function() {\n        var _this = this;\n        $(window).on('keydown.lg.thumb', function(e) {\n            if (e.keyCode === 38) {\n                e.preventDefault();\n                _this.core.$outer.addClass('lg-thumb-open');\n            } else if (e.keyCode === 40) {\n                e.preventDefault();\n                _this.core.$outer.removeClass('lg-thumb-open');\n            }\n        });\n    };\n\n    Thumbnail.prototype.destroy = function() {\n        if (this.core.s.thumbnail && this.core.$items.length > 1) {\n            $(window).off('resize.lg.thumb orientationchange.lg.thumb keydown.lg.thumb');\n            this.$thumbOuter.remove();\n            this.core.$outer.removeClass('lg-has-thumb');\n        }\n    };\n\n    $.fn.lightGallery.modules.Thumbnail = Thumbnail;\n\n})();\n\n}));\n\n/*! lg-video - v1.1.0 - 2017-08-08\n* http://sachinchoolur.github.io/lightGallery\n* Copyright (c) 2017 Sachin N; Licensed GPLv3 */\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module unless amdModuleId is set\n    define(['jquery'], function (a0) {\n      return (factory(a0));\n    });\n  } else if (typeof exports === 'object') {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like environments that support module.exports,\n    // like Node.\n    module.exports = factory(require('jquery'));\n  } else {\n    factory(jQuery);\n  }\n}(this, function ($) {\n\n(function() {\n\n    'use strict';\n\n    var defaults = {\n        videoMaxWidth: '855px',\n        youtubePlayerParams: false,\n        vimeoPlayerParams: false,\n        dailymotionPlayerParams: false,\n        vkPlayerParams: false,\n        videojs: false,\n        videojsOptions: {}\n    };\n\n    var Video = function(element) {\n\n        this.core = $(element).data('lightGallery');\n\n        this.$el = $(element);\n        this.core.s = $.extend({}, defaults, this.core.s);\n        this.videoLoaded = false;\n\n        this.init();\n\n        return this;\n    };\n\n    Video.prototype.init = function() {\n        var _this = this;\n\n        // Event triggered when video url found without poster\n        _this.core.$el.on('hasVideo.lg.tm', function(event, index, src, html) {\n            _this.core.$slide.eq(index).find('.lg-video').append(_this.loadVideo(src, 'lg-object', true, index, html));\n            if (html) {\n                if (_this.core.s.videojs) {\n                    try {\n                        videojs(_this.core.$slide.eq(index).find('.lg-html5').get(0), _this.core.s.videojsOptions, function() {\n                            if (!_this.videoLoaded) {\n                                this.play();\n                            }\n                        });\n                    } catch (e) {\n                        console.error('Make sure you have included videojs');\n                    }\n                } else {\n                    if(!_this.videoLoaded) {\n                        _this.core.$slide.eq(index).find('.lg-html5').get(0).play();\n                    }\n                }\n            }\n        });\n\n        // Set max width for video\n        _this.core.$el.on('onAferAppendSlide.lg.tm', function(event, index) {\n            var $videoCont = _this.core.$slide.eq(index).find('.lg-video-cont');\n            if (!$videoCont.hasClass('lg-has-iframe')) {\n                $videoCont.css('max-width', _this.core.s.videoMaxWidth);\n                _this.videoLoaded = true;\n            }\n        });\n\n        var loadOnClick = function($el) {\n            // check slide has poster\n            if ($el.find('.lg-object').hasClass('lg-has-poster') && $el.find('.lg-object').is(':visible')) {\n\n                // check already video element present\n                if (!$el.hasClass('lg-has-video')) {\n\n                    $el.addClass('lg-video-playing lg-has-video');\n\n                    var _src;\n                    var _html;\n                    var _loadVideo = function(_src, _html) {\n\n                        $el.find('.lg-video').append(_this.loadVideo(_src, '', false, _this.core.index, _html));\n\n                        if (_html) {\n                            if (_this.core.s.videojs) {\n                                try {\n                                    videojs(_this.core.$slide.eq(_this.core.index).find('.lg-html5').get(0), _this.core.s.videojsOptions, function() {\n                                        this.play();\n                                    });\n                                } catch (e) {\n                                    console.error('Make sure you have included videojs');\n                                }\n                            } else {\n                                _this.core.$slide.eq(_this.core.index).find('.lg-html5').get(0).play();\n                            }\n                        }\n\n                    };\n\n                    if (_this.core.s.dynamic) {\n\n                        _src = _this.core.s.dynamicEl[_this.core.index].src;\n                        _html = _this.core.s.dynamicEl[_this.core.index].html;\n\n                        _loadVideo(_src, _html);\n\n                    } else {\n\n                        _src = _this.core.$items.eq(_this.core.index).attr('href') || _this.core.$items.eq(_this.core.index).attr('data-src');\n                        _html = _this.core.$items.eq(_this.core.index).attr('data-html');\n\n                        _loadVideo(_src, _html);\n\n                    }\n\n                    var $tempImg = $el.find('.lg-object');\n                    $el.find('.lg-video').append($tempImg);\n\n                    // @todo loading icon for html5 videos also\n                    // for showing the loading indicator while loading video\n                    if (!$el.find('.lg-video-object').hasClass('lg-html5')) {\n                        $el.removeClass('lg-complete');\n                        $el.find('.lg-video-object').on('load.lg error.lg', function() {\n                            $el.addClass('lg-complete');\n                        });\n                    }\n\n                } else {\n\n                    var youtubePlayer = $el.find('.lg-youtube').get(0);\n                    var vimeoPlayer = $el.find('.lg-vimeo').get(0);\n                    var dailymotionPlayer = $el.find('.lg-dailymotion').get(0);\n                    var html5Player = $el.find('.lg-html5').get(0);\n                    if (youtubePlayer) {\n                        youtubePlayer.contentWindow.postMessage('{\"event\":\"command\",\"func\":\"playVideo\",\"args\":\"\"}', '*');\n                    } else if (vimeoPlayer) {\n                        try {\n                            $f(vimeoPlayer).api('play');\n                        } catch (e) {\n                            console.error('Make sure you have included froogaloop2 js');\n                        }\n                    } else if (dailymotionPlayer) {\n                        dailymotionPlayer.contentWindow.postMessage('play', '*');\n\n                    } else if (html5Player) {\n                        if (_this.core.s.videojs) {\n                            try {\n                                videojs(html5Player).play();\n                            } catch (e) {\n                                console.error('Make sure you have included videojs');\n                            }\n                        } else {\n                            html5Player.play();\n                        }\n                    }\n\n                    $el.addClass('lg-video-playing');\n\n                }\n            }\n        };\n\n        if (_this.core.doCss() && (_this.core.$items.length > 1) && (_this.core.s.enableSwipe || _this.core.s.enableDrag)) {\n            _this.core.$el.on('onSlideClick.lg.tm', function() {\n                var $el = _this.core.$slide.eq(_this.core.index);\n                loadOnClick($el);\n            });\n        } else {\n\n            // For IE 9 and bellow\n            _this.core.$slide.on('click.lg', function() {\n                loadOnClick($(this));\n            });\n        }\n\n        _this.core.$el.on('onBeforeSlide.lg.tm', function(event, prevIndex, index) {\n\n            var $videoSlide = _this.core.$slide.eq(prevIndex);\n            var youtubePlayer = $videoSlide.find('.lg-youtube').get(0);\n            var vimeoPlayer = $videoSlide.find('.lg-vimeo').get(0);\n            var dailymotionPlayer = $videoSlide.find('.lg-dailymotion').get(0);\n            var vkPlayer = $videoSlide.find('.lg-vk').get(0);\n            var html5Player = $videoSlide.find('.lg-html5').get(0);\n            if (youtubePlayer) {\n                youtubePlayer.contentWindow.postMessage('{\"event\":\"command\",\"func\":\"pauseVideo\",\"args\":\"\"}', '*');\n            } else if (vimeoPlayer) {\n                try {\n                    $f(vimeoPlayer).api('pause');\n                } catch (e) {\n                    console.error('Make sure you have included froogaloop2 js');\n                }\n            } else if (dailymotionPlayer) {\n                dailymotionPlayer.contentWindow.postMessage('pause', '*');\n\n            } else if (html5Player) {\n                if (_this.core.s.videojs) {\n                    try {\n                        videojs(html5Player).pause();\n                    } catch (e) {\n                        console.error('Make sure you have included videojs');\n                    }\n                } else {\n                    html5Player.pause();\n                }\n            } if (vkPlayer) {\n                $(vkPlayer).attr('src', $(vkPlayer).attr('src').replace('&autoplay', '&noplay'));\n            }\n\n            var _src;\n            if (_this.core.s.dynamic) {\n                _src = _this.core.s.dynamicEl[index].src;\n            } else {\n                _src = _this.core.$items.eq(index).attr('href') || _this.core.$items.eq(index).attr('data-src');\n\n            }\n\n            var _isVideo = _this.core.isVideo(_src, index) || {};\n            if (_isVideo.youtube || _isVideo.vimeo || _isVideo.dailymotion || _isVideo.vk) {\n                _this.core.$outer.addClass('lg-hide-download');\n            }\n\n            //$videoSlide.addClass('lg-complete');\n\n        });\n\n        _this.core.$el.on('onAfterSlide.lg.tm', function(event, prevIndex) {\n            _this.core.$slide.eq(prevIndex).removeClass('lg-video-playing');\n        });\n    };\n\n    Video.prototype.loadVideo = function(src, addClass, noposter, index, html) {\n        var video = '';\n        var autoplay = 1;\n        var a = '';\n        var isVideo = this.core.isVideo(src, index) || {};\n\n        // Enable autoplay for first video if poster doesn't exist\n        if (noposter) {\n            if (this.videoLoaded) {\n                autoplay = 0;\n            } else {\n                autoplay = 1;\n            }\n        }\n\n        if (isVideo.youtube) {\n\n            a = '?wmode=opaque&autoplay=' + autoplay + '&enablejsapi=1';\n            if (this.core.s.youtubePlayerParams) {\n                a = a + '&' + $.param(this.core.s.youtubePlayerParams);\n            }\n\n            video = '<iframe class=\"lg-video-object lg-youtube ' + addClass + '\" width=\"560\" height=\"315\" src=\"//www.youtube.com/embed/' + isVideo.youtube[1] + a + '\" frameborder=\"0\" allowfullscreen></iframe>';\n\n        } else if (isVideo.vimeo) {\n\n            a = '?autoplay=' + autoplay + '&api=1';\n            if (this.core.s.vimeoPlayerParams) {\n                a = a + '&' + $.param(this.core.s.vimeoPlayerParams);\n            }\n\n            video = '<iframe class=\"lg-video-object lg-vimeo ' + addClass + '\" width=\"560\" height=\"315\"  src=\"//player.vimeo.com/video/' + isVideo.vimeo[1] + a + '\" frameborder=\"0\" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>';\n\n        } else if (isVideo.dailymotion) {\n\n            a = '?wmode=opaque&autoplay=' + autoplay + '&api=postMessage';\n            if (this.core.s.dailymotionPlayerParams) {\n                a = a + '&' + $.param(this.core.s.dailymotionPlayerParams);\n            }\n\n            video = '<iframe class=\"lg-video-object lg-dailymotion ' + addClass + '\" width=\"560\" height=\"315\" src=\"//www.dailymotion.com/embed/video/' + isVideo.dailymotion[1] + a + '\" frameborder=\"0\" allowfullscreen></iframe>';\n\n        } else if (isVideo.html5) {\n            var fL = html.substring(0, 1);\n            if (fL === '.' || fL === '#') {\n                html = $(html).html();\n            }\n\n            video = html;\n\n        } else if (isVideo.vk) {\n\n            a = '&autoplay=' + autoplay;\n            if (this.core.s.vkPlayerParams) {\n                a = a + '&' + $.param(this.core.s.vkPlayerParams);\n            }\n\n            video = '<iframe class=\"lg-video-object lg-vk ' + addClass + '\" width=\"560\" height=\"315\" src=\"http://vk.com/video_ext.php?' + isVideo.vk[1] + a + '\" frameborder=\"0\" allowfullscreen></iframe>';\n\n        }\n\n        return video;\n    };\n\n    Video.prototype.destroy = function() {\n        this.videoLoaded = false;\n    };\n\n    $.fn.lightGallery.modules.video = Video;\n\n})();\n\n\n}));\n\n/*! lg-zoom - v1.1.0 - 2017-08-08\n* http://sachinchoolur.github.io/lightGallery\n* Copyright (c) 2017 Sachin N; Licensed GPLv3 */\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module unless amdModuleId is set\n    define(['jquery'], function (a0) {\n      return (factory(a0));\n    });\n  } else if (typeof exports === 'object') {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like environments that support module.exports,\n    // like Node.\n    module.exports = factory(require('jquery'));\n  } else {\n    factory(jQuery);\n  }\n}(this, function ($) {\n\n(function() {\n\n    'use strict';\n\n    var getUseLeft = function() {\n        var useLeft = false;\n        var isChrome = navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./);\n        if (isChrome && parseInt(isChrome[2], 10) < 54) {\n            useLeft = true;\n        }\n\n        return useLeft;\n    };\n\n    var defaults = {\n        scale: 1,\n        zoom: true,\n        actualSize: true,\n        enableZoomAfter: 300,\n        useLeftForZoom: getUseLeft()\n    };\n\n    var Zoom = function(element) {\n\n        this.core = $(element).data('lightGallery');\n\n        this.core.s = $.extend({}, defaults, this.core.s);\n\n        if (this.core.s.zoom && this.core.doCss()) {\n            this.init();\n\n            // Store the zoomable timeout value just to clear it while closing\n            this.zoomabletimeout = false;\n\n            // Set the initial value center\n            this.pageX = $(window).width() / 2;\n            this.pageY = ($(window).height() / 2) + $(window).scrollTop();\n        }\n\n        return this;\n    };\n\n    Zoom.prototype.init = function() {\n\n        var _this = this;\n        var zoomIcons = '<span id=\"lg-zoom-in\" class=\"lg-icon\"></span><span id=\"lg-zoom-out\" class=\"lg-icon\"></span>';\n\n        if (_this.core.s.actualSize) {\n            zoomIcons += '<span id=\"lg-actual-size\" class=\"lg-icon\"></span>';\n        }\n\n        if (_this.core.s.useLeftForZoom) {\n            _this.core.$outer.addClass('lg-use-left-for-zoom');\n        } else {\n            _this.core.$outer.addClass('lg-use-transition-for-zoom');\n        }\n\n        this.core.$outer.find('.lg-toolbar').append(zoomIcons);\n\n        // Add zoomable class\n        _this.core.$el.on('onSlideItemLoad.lg.tm.zoom', function(event, index, delay) {\n\n            // delay will be 0 except first time\n            var _speed = _this.core.s.enableZoomAfter + delay;\n\n            // set _speed value 0 if gallery opened from direct url and if it is first slide\n            if ($('body').hasClass('lg-from-hash') && delay) {\n\n                // will execute only once\n                _speed = 0;\n            } else {\n\n                // Remove lg-from-hash to enable starting animation.\n                $('body').removeClass('lg-from-hash');\n            }\n\n            _this.zoomabletimeout = setTimeout(function() {\n                _this.core.$slide.eq(index).addClass('lg-zoomable');\n            }, _speed + 30);\n        });\n\n        var scale = 1;\n        /**\n         * @desc Image zoom\n         * Translate the wrap and scale the image to get better user experience\n         *\n         * @param {String} scaleVal - Zoom decrement/increment value\n         */\n        var zoom = function(scaleVal) {\n\n            var $image = _this.core.$outer.find('.lg-current .lg-image');\n            var _x;\n            var _y;\n\n            // Find offset manually to avoid issue after zoom\n            var offsetX = ($(window).width() - $image.prop('offsetWidth')) / 2;\n            var offsetY = (($(window).height() - $image.prop('offsetHeight')) / 2) + $(window).scrollTop();\n\n            _x = _this.pageX - offsetX;\n            _y = _this.pageY - offsetY;\n\n            var x = (scaleVal - 1) * (_x);\n            var y = (scaleVal - 1) * (_y);\n\n            $image.css('transform', 'scale3d(' + scaleVal + ', ' + scaleVal + ', 1)').attr('data-scale', scaleVal);\n\n            if (_this.core.s.useLeftForZoom) {\n                $image.parent().css({\n                    left: -x + 'px',\n                    top: -y + 'px'\n                }).attr('data-x', x).attr('data-y', y);\n            } else {\n                $image.parent().css('transform', 'translate3d(-' + x + 'px, -' + y + 'px, 0)').attr('data-x', x).attr('data-y', y);\n            }\n        };\n\n        var callScale = function() {\n            if (scale > 1) {\n                _this.core.$outer.addClass('lg-zoomed');\n            } else {\n                _this.resetZoom();\n            }\n\n            if (scale < 1) {\n                scale = 1;\n            }\n\n            zoom(scale);\n        };\n\n        var actualSize = function(event, $image, index, fromIcon) {\n            var w = $image.prop('offsetWidth');\n            var nw;\n            if (_this.core.s.dynamic) {\n                nw = _this.core.s.dynamicEl[index].width || $image[0].naturalWidth || w;\n            } else {\n                nw = _this.core.$items.eq(index).attr('data-width') || $image[0].naturalWidth || w;\n            }\n\n            var _scale;\n\n            if (_this.core.$outer.hasClass('lg-zoomed')) {\n                scale = 1;\n            } else {\n                if (nw > w) {\n                    _scale = nw / w;\n                    scale = _scale || 2;\n                }\n            }\n\n            if (fromIcon) {\n                _this.pageX = $(window).width() / 2;\n                _this.pageY = ($(window).height() / 2) + $(window).scrollTop();\n            } else {\n                _this.pageX = event.pageX || event.originalEvent.targetTouches[0].pageX;\n                _this.pageY = event.pageY || event.originalEvent.targetTouches[0].pageY;\n            }\n\n            callScale();\n            setTimeout(function() {\n                _this.core.$outer.removeClass('lg-grabbing').addClass('lg-grab');\n            }, 10);\n        };\n\n        var tapped = false;\n\n        // event triggered after appending slide content\n        _this.core.$el.on('onAferAppendSlide.lg.tm.zoom', function(event, index) {\n\n            // Get the current element\n            var $image = _this.core.$slide.eq(index).find('.lg-image');\n\n            $image.on('dblclick', function(event) {\n                actualSize(event, $image, index);\n            });\n\n            $image.on('touchstart', function(event) {\n                if (!tapped) {\n                    tapped = setTimeout(function() {\n                        tapped = null;\n                    }, 300);\n                } else {\n                    clearTimeout(tapped);\n                    tapped = null;\n                    actualSize(event, $image, index);\n                }\n\n                event.preventDefault();\n            });\n\n        });\n\n        // Update zoom on resize and orientationchange\n        $(window).on('resize.lg.zoom scroll.lg.zoom orientationchange.lg.zoom', function() {\n            _this.pageX = $(window).width() / 2;\n            _this.pageY = ($(window).height() / 2) + $(window).scrollTop();\n            zoom(scale);\n        });\n\n        $('#lg-zoom-out').on('click.lg', function() {\n            if (_this.core.$outer.find('.lg-current .lg-image').length) {\n                scale -= _this.core.s.scale;\n                callScale();\n            }\n        });\n\n        $('#lg-zoom-in').on('click.lg', function() {\n            if (_this.core.$outer.find('.lg-current .lg-image').length) {\n                scale += _this.core.s.scale;\n                callScale();\n            }\n        });\n\n        $('#lg-actual-size').on('click.lg', function(event) {\n            actualSize(event, _this.core.$slide.eq(_this.core.index).find('.lg-image'), _this.core.index, true);\n        });\n\n        // Reset zoom on slide change\n        _this.core.$el.on('onBeforeSlide.lg.tm', function() {\n            scale = 1;\n            _this.resetZoom();\n        });\n\n        // Drag option after zoom\n        _this.zoomDrag();\n\n        _this.zoomSwipe();\n\n    };\n\n    // Reset zoom effect\n    Zoom.prototype.resetZoom = function() {\n        this.core.$outer.removeClass('lg-zoomed');\n        this.core.$slide.find('.lg-img-wrap').removeAttr('style data-x data-y');\n        this.core.$slide.find('.lg-image').removeAttr('style data-scale');\n\n        // Reset pagx pagy values to center\n        this.pageX = $(window).width() / 2;\n        this.pageY = ($(window).height() / 2) + $(window).scrollTop();\n    };\n\n    Zoom.prototype.zoomSwipe = function() {\n        var _this = this;\n        var startCoords = {};\n        var endCoords = {};\n        var isMoved = false;\n\n        // Allow x direction drag\n        var allowX = false;\n\n        // Allow Y direction drag\n        var allowY = false;\n\n        _this.core.$slide.on('touchstart.lg', function(e) {\n\n            if (_this.core.$outer.hasClass('lg-zoomed')) {\n                var $image = _this.core.$slide.eq(_this.core.index).find('.lg-object');\n\n                allowY = $image.prop('offsetHeight') * $image.attr('data-scale') > _this.core.$outer.find('.lg').height();\n                allowX = $image.prop('offsetWidth') * $image.attr('data-scale') > _this.core.$outer.find('.lg').width();\n                if ((allowX || allowY)) {\n                    e.preventDefault();\n                    startCoords = {\n                        x: e.originalEvent.targetTouches[0].pageX,\n                        y: e.originalEvent.targetTouches[0].pageY\n                    };\n                }\n            }\n\n        });\n\n        _this.core.$slide.on('touchmove.lg', function(e) {\n\n            if (_this.core.$outer.hasClass('lg-zoomed')) {\n\n                var _$el = _this.core.$slide.eq(_this.core.index).find('.lg-img-wrap');\n                var distanceX;\n                var distanceY;\n\n                e.preventDefault();\n                isMoved = true;\n\n                endCoords = {\n                    x: e.originalEvent.targetTouches[0].pageX,\n                    y: e.originalEvent.targetTouches[0].pageY\n                };\n\n                // reset opacity and transition duration\n                _this.core.$outer.addClass('lg-zoom-dragging');\n\n                if (allowY) {\n                    distanceY = (-Math.abs(_$el.attr('data-y'))) + (endCoords.y - startCoords.y);\n                } else {\n                    distanceY = -Math.abs(_$el.attr('data-y'));\n                }\n\n                if (allowX) {\n                    distanceX = (-Math.abs(_$el.attr('data-x'))) + (endCoords.x - startCoords.x);\n                } else {\n                    distanceX = -Math.abs(_$el.attr('data-x'));\n                }\n\n                if ((Math.abs(endCoords.x - startCoords.x) > 15) || (Math.abs(endCoords.y - startCoords.y) > 15)) {\n\n                    if (_this.core.s.useLeftForZoom) {\n                        _$el.css({\n                            left: distanceX + 'px',\n                            top: distanceY + 'px'\n                        });\n                    } else {\n                        _$el.css('transform', 'translate3d(' + distanceX + 'px, ' + distanceY + 'px, 0)');\n                    }\n                }\n\n            }\n\n        });\n\n        _this.core.$slide.on('touchend.lg', function() {\n            if (_this.core.$outer.hasClass('lg-zoomed')) {\n                if (isMoved) {\n                    isMoved = false;\n                    _this.core.$outer.removeClass('lg-zoom-dragging');\n                    _this.touchendZoom(startCoords, endCoords, allowX, allowY);\n\n                }\n            }\n        });\n\n    };\n\n    Zoom.prototype.zoomDrag = function() {\n\n        var _this = this;\n        var startCoords = {};\n        var endCoords = {};\n        var isDraging = false;\n        var isMoved = false;\n\n        // Allow x direction drag\n        var allowX = false;\n\n        // Allow Y direction drag\n        var allowY = false;\n\n        _this.core.$slide.on('mousedown.lg.zoom', function(e) {\n\n            // execute only on .lg-object\n            var $image = _this.core.$slide.eq(_this.core.index).find('.lg-object');\n\n            allowY = $image.prop('offsetHeight') * $image.attr('data-scale') > _this.core.$outer.find('.lg').height();\n            allowX = $image.prop('offsetWidth') * $image.attr('data-scale') > _this.core.$outer.find('.lg').width();\n\n            if (_this.core.$outer.hasClass('lg-zoomed')) {\n                if ($(e.target).hasClass('lg-object') && (allowX || allowY)) {\n                    e.preventDefault();\n                    startCoords = {\n                        x: e.pageX,\n                        y: e.pageY\n                    };\n\n                    isDraging = true;\n\n                    // ** Fix for webkit cursor issue https://code.google.com/p/chromium/issues/detail?id=26723\n                    _this.core.$outer.scrollLeft += 1;\n                    _this.core.$outer.scrollLeft -= 1;\n\n                    _this.core.$outer.removeClass('lg-grab').addClass('lg-grabbing');\n                }\n            }\n        });\n\n        $(window).on('mousemove.lg.zoom', function(e) {\n            if (isDraging) {\n                var _$el = _this.core.$slide.eq(_this.core.index).find('.lg-img-wrap');\n                var distanceX;\n                var distanceY;\n\n                isMoved = true;\n                endCoords = {\n                    x: e.pageX,\n                    y: e.pageY\n                };\n\n                // reset opacity and transition duration\n                _this.core.$outer.addClass('lg-zoom-dragging');\n\n                if (allowY) {\n                    distanceY = (-Math.abs(_$el.attr('data-y'))) + (endCoords.y - startCoords.y);\n                } else {\n                    distanceY = -Math.abs(_$el.attr('data-y'));\n                }\n\n                if (allowX) {\n                    distanceX = (-Math.abs(_$el.attr('data-x'))) + (endCoords.x - startCoords.x);\n                } else {\n                    distanceX = -Math.abs(_$el.attr('data-x'));\n                }\n\n                if (_this.core.s.useLeftForZoom) {\n                    _$el.css({\n                        left: distanceX + 'px',\n                        top: distanceY + 'px'\n                    });\n                } else {\n                    _$el.css('transform', 'translate3d(' + distanceX + 'px, ' + distanceY + 'px, 0)');\n                }\n            }\n        });\n\n        $(window).on('mouseup.lg.zoom', function(e) {\n\n            if (isDraging) {\n                isDraging = false;\n                _this.core.$outer.removeClass('lg-zoom-dragging');\n\n                // Fix for chrome mouse move on click\n                if (isMoved && ((startCoords.x !== endCoords.x) || (startCoords.y !== endCoords.y))) {\n                    endCoords = {\n                        x: e.pageX,\n                        y: e.pageY\n                    };\n                    _this.touchendZoom(startCoords, endCoords, allowX, allowY);\n\n                }\n\n                isMoved = false;\n            }\n\n            _this.core.$outer.removeClass('lg-grabbing').addClass('lg-grab');\n\n        });\n    };\n\n    Zoom.prototype.touchendZoom = function(startCoords, endCoords, allowX, allowY) {\n\n        var _this = this;\n        var _$el = _this.core.$slide.eq(_this.core.index).find('.lg-img-wrap');\n        var $image = _this.core.$slide.eq(_this.core.index).find('.lg-object');\n        var distanceX = (-Math.abs(_$el.attr('data-x'))) + (endCoords.x - startCoords.x);\n        var distanceY = (-Math.abs(_$el.attr('data-y'))) + (endCoords.y - startCoords.y);\n        var minY = (_this.core.$outer.find('.lg').height() - $image.prop('offsetHeight')) / 2;\n        var maxY = Math.abs(($image.prop('offsetHeight') * Math.abs($image.attr('data-scale'))) - _this.core.$outer.find('.lg').height() + minY);\n        var minX = (_this.core.$outer.find('.lg').width() - $image.prop('offsetWidth')) / 2;\n        var maxX = Math.abs(($image.prop('offsetWidth') * Math.abs($image.attr('data-scale'))) - _this.core.$outer.find('.lg').width() + minX);\n\n        if ((Math.abs(endCoords.x - startCoords.x) > 15) || (Math.abs(endCoords.y - startCoords.y) > 15)) {\n            if (allowY) {\n                if (distanceY <= -maxY) {\n                    distanceY = -maxY;\n                } else if (distanceY >= -minY) {\n                    distanceY = -minY;\n                }\n            }\n\n            if (allowX) {\n                if (distanceX <= -maxX) {\n                    distanceX = -maxX;\n                } else if (distanceX >= -minX) {\n                    distanceX = -minX;\n                }\n            }\n\n            if (allowY) {\n                _$el.attr('data-y', Math.abs(distanceY));\n            } else {\n                distanceY = -Math.abs(_$el.attr('data-y'));\n            }\n\n            if (allowX) {\n                _$el.attr('data-x', Math.abs(distanceX));\n            } else {\n                distanceX = -Math.abs(_$el.attr('data-x'));\n            }\n\n            if (_this.core.s.useLeftForZoom) {\n                _$el.css({\n                    left: distanceX + 'px',\n                    top: distanceY + 'px'\n                });\n            } else {\n                _$el.css('transform', 'translate3d(' + distanceX + 'px, ' + distanceY + 'px, 0)');\n            }\n\n        }\n    };\n\n    Zoom.prototype.destroy = function() {\n\n        var _this = this;\n\n        // Unbind all events added by lightGallery zoom plugin\n        _this.core.$el.off('.lg.zoom');\n        $(window).off('.lg.zoom');\n        _this.core.$slide.off('.lg.zoom');\n        _this.core.$el.off('.lg.tm.zoom');\n        _this.resetZoom();\n        clearTimeout(_this.zoomabletimeout);\n        _this.zoomabletimeout = false;\n    };\n\n    $.fn.lightGallery.modules.zoom = Zoom;\n\n})();\n\n\n}));\n\n/*! lg-hash - v1.0.2 - 2017-06-03\n* http://sachinchoolur.github.io/lightGallery\n* Copyright (c) 2017 Sachin N; Licensed GPLv3 */\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module unless amdModuleId is set\n    define(['jquery'], function (a0) {\n      return (factory(a0));\n    });\n  } else if (typeof exports === 'object') {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like environments that support module.exports,\n    // like Node.\n    module.exports = factory(require('jquery'));\n  } else {\n    factory(jQuery);\n  }\n}(this, function ($) {\n\n(function() {\n\n    'use strict';\n\n    var defaults = {\n        hash: true\n    };\n\n    var Hash = function(element) {\n\n        this.core = $(element).data('lightGallery');\n\n        this.core.s = $.extend({}, defaults, this.core.s);\n\n        if (this.core.s.hash) {\n            this.oldHash = window.location.hash;\n            this.init();\n        }\n\n        return this;\n    };\n\n    Hash.prototype.init = function() {\n        var _this = this;\n        var _hash;\n\n        // Change hash value on after each slide transition\n        _this.core.$el.on('onAfterSlide.lg.tm', function(event, prevIndex, index) {\n            if (history.replaceState) {\n                history.replaceState(null, null, '#lg=' + _this.core.s.galleryId + '&slide=' + index);\n            } else {\n                window.location.hash = 'lg=' + _this.core.s.galleryId + '&slide=' + index;\n            }\n        });\n\n        // Listen hash change and change the slide according to slide value\n        $(window).on('hashchange.lg.hash', function() {\n            _hash = window.location.hash;\n            var _idx = parseInt(_hash.split('&slide=')[1], 10);\n\n            // it galleryId doesn't exist in the url close the gallery\n            if ((_hash.indexOf('lg=' + _this.core.s.galleryId) > -1)) {\n                _this.core.slide(_idx, false, false);\n            } else if (_this.core.lGalleryOn) {\n                _this.core.destroy();\n            }\n\n        });\n    };\n\n    Hash.prototype.destroy = function() {\n\n        if (!this.core.s.hash) {\n            return;\n        }\n\n        // Reset to old hash value\n        if (this.oldHash && this.oldHash.indexOf('lg=' + this.core.s.galleryId) < 0) {\n            if (history.replaceState) {\n                history.replaceState(null, null, this.oldHash);\n            } else {\n                window.location.hash = this.oldHash;\n            }\n        } else {\n            if (history.replaceState) {\n                history.replaceState(null, document.title, window.location.pathname + window.location.search);\n            } else {\n                window.location.hash = '';\n            }\n        }\n\n        this.core.$el.off('.lg.hash');\n\n    };\n\n    $.fn.lightGallery.modules.hash = Hash;\n\n})();\n\n}));\n\n/*! lg-share - v1.0.2 - 2016-11-26\n* http://sachinchoolur.github.io/lightGallery\n* Copyright (c) 2016 Sachin N; Licensed GPLv3 */\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module unless amdModuleId is set\n    define(['jquery'], function (a0) {\n      return (factory(a0));\n    });\n  } else if (typeof exports === 'object') {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like environments that support module.exports,\n    // like Node.\n    module.exports = factory(require('jquery'));\n  } else {\n    factory(jQuery);\n  }\n}(this, function ($) {\n\n(function() {\n\n    'use strict';\n\n    var defaults = {\n        share: true,\n        facebook: true,\n        facebookDropdownText: 'Facebook',\n        twitter: true,\n        twitterDropdownText: 'Twitter',\n        googlePlus: true,\n        googlePlusDropdownText: 'GooglePlus',\n        pinterest: true,\n        pinterestDropdownText: 'Pinterest'\n    };\n\n    var Share = function(element) {\n\n        this.core = $(element).data('lightGallery');\n\n        this.core.s = $.extend({}, defaults, this.core.s);\n        if (this.core.s.share) {\n            this.init();\n        }\n\n        return this;\n    };\n\n    Share.prototype.init = function() {\n        var _this = this;\n        var shareHtml = '<span id=\"lg-share\" class=\"lg-icon\">' +\n            '<ul class=\"lg-dropdown\" style=\"position: absolute;\">';\n        shareHtml += _this.core.s.facebook ? '<li><a id=\"lg-share-facebook\" target=\"_blank\"><span class=\"lg-icon\"></span><span class=\"lg-dropdown-text\">' + this.core.s.facebookDropdownText + '</span></a></li>' : '';\n        shareHtml += _this.core.s.twitter ? '<li><a id=\"lg-share-twitter\" target=\"_blank\"><span class=\"lg-icon\"></span><span class=\"lg-dropdown-text\">' + this.core.s.twitterDropdownText + '</span></a></li>' : '';\n        shareHtml += _this.core.s.googlePlus ? '<li><a id=\"lg-share-googleplus\" target=\"_blank\"><span class=\"lg-icon\"></span><span class=\"lg-dropdown-text\">' + this.core.s.googlePlusDropdownText + '</span></a></li>' : '';\n        shareHtml += _this.core.s.pinterest ? '<li><a id=\"lg-share-pinterest\" target=\"_blank\"><span class=\"lg-icon\"></span><span class=\"lg-dropdown-text\">' + this.core.s.pinterestDropdownText + '</span></a></li>' : '';\n        shareHtml += '</ul></span>';\n\n        this.core.$outer.find('.lg-toolbar').append(shareHtml);\n        this.core.$outer.find('.lg').append('<div id=\"lg-dropdown-overlay\"></div>');\n        $('#lg-share').on('click.lg', function(){\n            _this.core.$outer.toggleClass('lg-dropdown-active');\n        });\n\n        $('#lg-dropdown-overlay').on('click.lg', function(){\n            _this.core.$outer.removeClass('lg-dropdown-active');\n        });\n\n        _this.core.$el.on('onAfterSlide.lg.tm', function(event, prevIndex, index) {\n\n            setTimeout(function() { \n                $('#lg-share-facebook').attr('href', 'https://www.facebook.com/sharer/sharer.php?u=' + (encodeURIComponent(_this.core.$items.eq(index).attr('data-facebook-share-url') || window.location.href)));\n\n                $('#lg-share-twitter').attr('href', 'https://twitter.com/intent/tweet?text=' + _this.core.$items.eq(index).attr('data-tweet-text') + '&url=' + (encodeURIComponent(_this.core.$items.eq(index).attr('data-twitter-share-url') || window.location.href)));\n\n                $('#lg-share-googleplus').attr('href', 'https://plus.google.com/share?url=' + (encodeURIComponent(_this.core.$items.eq(index).attr('data-googleplus-share-url') || window.location.href)));\n\n                $('#lg-share-pinterest').attr('href', 'http://www.pinterest.com/pin/create/button/?url=' + (encodeURIComponent(_this.core.$items.eq(index).attr('data-pinterest-share-url') || window.location.href)) + '&media=' + encodeURIComponent(_this.core.$items.eq(index).attr('href') || _this.core.$items.eq(index).attr('data-src')) + '&description=' + _this.core.$items.eq(index).attr('data-pinterest-text'));\n\n            }, 100);\n        });\n    };\n\n    Share.prototype.destroy = function() {\n\n    };\n\n    $.fn.lightGallery.modules.share = Share;\n\n})();\n\n\n\n}));\n"]}