{"version":3,"sources":["../../../../../../../../resources/assets/plugins/backend/dropzone-master/website/js/app.js"],"names":["init","FastClick","attach","document","body","allSections","sections","navElement","querySelector","mainElement","headerElement","windowHeight","getWindowHeight","buffer","callBack","timeoutId","lastCall","bufferSpan","bufferedFunction","Date","now","setTimeout","getBoundingClientRect","height","Section","element","isCurrent","parent","subSections","name","innerHTML","id","level","parseInt","tagName","substr","updatePosition","prototype","getSubSectionsHeight","i","length","addSubSection","subSection","push","top","obj","offsetTop","offsetParent","getHtml","createElement","classList","add","link","href","appendChild","subSectionsElement","linkElement","highlight","notCurrentSection","downlight","style","remove","parseSections","headlines","querySelectorAll","lastSection","headline","section","updateSectionPositions","setHeaderSize","window","addEventListener","handleResize","handleScroll","fixed","disableScrollEvents","translate","Math","round","pageYOffset","WebkitTransform","transform","opacity","max","highlightCurrentSection","scrollTop","scrollBottom","scrollMiddle","highlightedSection","smoothStep","start","end","point","x","smoothScrollToStart","target","duration","start_time","end_time","start_top","distance","previous_top","done","scroll_frame","frameTop","scrollTo","e","preventDefault","dropzone","Dropzone","previewTemplate","parallelUploads","thumbnailHeight","thumbnailWidth","maxFilesize","filesizeBase","thumbnail","file","dataUrl","previewElement","images","thumbnailElement","alt","src","minSteps","maxSteps","timeBetweenSteps","bytesPerStep","uploadFiles","files","self","totalSteps","min","size","step","upload","progress","total","bytesSent","emit","status","SUCCESS","processQueue"],"mappings":"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","file":"app.js","sourcesContent":["\nfunction init() {\n  FastClick.attach(document.body);\n\n  var allSections = [],\n      sections = [],\n      navElement = document.querySelector('main > nav'),\n      mainElement = document.querySelector('main'),\n      headerElement = document.querySelector('body > header'),\n      windowHeight = getWindowHeight();\n\n\n  // Makes sure a function isn't called too often.\n  function buffer(callBack) {\n    var timeoutId, lastCall = 0, bufferSpan = 200;\n\n    var bufferedFunction = function() {\n      // Already buffered\n      if (timeoutId) return;\n\n      // Last call has been long ago enough\n      if (Date.now() - lastCall > bufferSpan) {\n        callBack();\n        lastCall = Date.now();\n      }\n      else {\n        timeoutId = setTimeout(function() {\n          timeoutId = null;\n          callBack();\n          lastCall = Date.now();\n        }, bufferSpan);        \n      }\n\n    }\n\n    return bufferedFunction;\n  }\n\n\n  function getWindowHeight() { return document.body.getBoundingClientRect().height; }\n\n  function Section(element) {\n    this.element = element;\n    this.isCurrent = false;\n    this.navElement = null;\n    this.parent = null;\n    this.subSections = [];\n    this.name = element.innerHTML;\n    this.id = element.id;\n    this.level = parseInt(element.tagName.substr(1)) - 1;\n    this.updatePosition();\n  }\n  Section.prototype.getSubSectionsHeight = function() {\n    var height = 0;\n    for (var i = 0; i < this.subSections.length; i++) {\n      height += this.subSections[i].navElement.getBoundingClientRect().height;\n    }\n    return height;\n  }\n  Section.prototype.addSubSection = function(subSection) {\n    this.subSections.push(subSection);\n    subSection.parent = this;\n  }\n  Section.prototype.updatePosition = function() {\n    var top = 0,\n        obj = this.element;\n\n\n    do {\n      top += obj.offsetTop;\n    } while (obj = obj.offsetParent);\n\n    this.top = top;\n  }\n  Section.prototype.getHtml = function() {\n    var element = document.createElement('div');\n    element.classList.add('level-' + this.level);\n\n    var link = document.createElement('a');\n    link.href = '#' + this.id;\n    link.innerHTML = this.name;\n\n    element.appendChild(link);\n\n    if (this.subSections.length > 0) {\n      var subSectionsElement = document.createElement('div');\n      subSectionsElement.classList.add('sub-sections');\n\n      for (var i = 0; i < this.subSections.length; i++) {\n        subSectionsElement.appendChild(this.subSections[i].getHtml());\n      }\n\n      element.appendChild(subSectionsElement);\n      this.subSectionsElement = subSectionsElement;\n    }\n\n    this.navElement = element;\n    this.linkElement = link;\n    return element;\n  }\n  Section.prototype.highlight = function(notCurrentSection) {\n    if (!notCurrentSection) {\n      if (this.isCurrent) return;\n      this.isCurrent = true;\n      for (var i = 0; i < allSections.length; i ++) {\n        if (allSections[i] !== this) {\n          allSections[i].downlight();\n        }\n      }\n      this.linkElement.classList.add('current');\n    }\n    this.navElement.classList.add('visible');\n    if (this.parent) this.parent.highlight(true);\n\n    if (this.level == 0 && this.subSectionsElement) {\n      var height = this.getSubSectionsHeight();\n      this.subSectionsElement.style.height = height + 'px';\n    }\n  }\n  // He he, funny name\n  Section.prototype.downlight = function() {\n    this.isCurrent = false;\n    this.navElement.classList.remove('visible');\n    this.linkElement.classList.remove('current');\n\n    if (this.level == 0 && this.subSectionsElement) {\n      this.subSectionsElement.style.height = '0px';\n    }\n\n  }\n\n\n  function parseSections() {\n    var headlines = document.querySelectorAll('main > section > h1, main > section > h2');\n    var lastSection;\n\n    for (var i = 0; i < headlines.length; i++) {\n      var headline = headlines[i];\n      var section = new Section(headline);\n      if (section.id == 'try-it-out' || section.id == 'news') continue;\n      if (section.level == 0) {\n        lastSection = section;\n        sections.push(section);\n      }\n      else {\n        lastSection.addSubSection(section);\n      }\n\n      allSections.push(section);\n    }\n  }\n\n  function updateSectionPositions() {\n    for (var i = 0; i < allSections.length; i++) {\n      allSections[i].updatePosition();\n    }\n  }\n\n\n  parseSections();\n\n  for (var i = 0; i < sections.length; i++) {\n    navElement.appendChild(sections[i].getHtml());\n  }\n\n\n  function setHeaderSize() {\n    // headerElement.style.height = mainElement.style.marginTop = windowHeight + 'px';\n  }\n  window.addEventListener('resize', buffer(handleResize));\n  \n  function handleResize() {\n    windowHeight = getWindowHeight();\n    handleScroll();\n    updateSectionPositions();\n  }\n\n\n  var fixed = false;\n  window.addEventListener('scroll', buffer(handleScroll));\n  window.addEventListener('scroll', function() {\n\n    if (disableScrollEvents) return true;\n\n    // Parallax header... can't be buffered\n    var translate = 'translateY(' + Math.round(window.pageYOffset / 2) + 'px)';\n    headerElement.style.WebkitTransform = translate;\n    headerElement.style.transform = translate;\n\n    headerElement.style.opacity = Math.max(0, windowHeight - window.pageYOffset) / windowHeight;\n\n\n\n    if (window.pageYOffset >= windowHeight) {\n      if (!fixed) {\n        fixed = true;\n        navElement.classList.add('fixed');\n      }\n    }\n    else {\n      if (fixed) {\n        fixed = false;\n        navElement.classList.remove('fixed');\n      }\n    }\n\n\n  });\n\n\n\n  var disableScrollEvents = false;\n\n  function handleScroll() {\n    if (disableScrollEvents) return true;\n    updateSectionPositions();\n    highlightCurrentSection();\n  }\n\n  function highlightCurrentSection() {\n    var scrollTop = window.pageYOffset,\n        scrollBottom = scrollTop + windowHeight,\n        scrollMiddle = scrollTop + windowHeight / 3;\n\n    var highlightedSection = allSections[0];\n\n    if (highlightedSection.top > scrollMiddle) {\n      // The page is scrolled to the top, so the first section is not visible\n      for (var i = 0; i < allSections.length; i++) {\n        allSections[i].downlight();\n      }\n      \n    }\n    else {\n      for (var i = 0; i < allSections.length; i++) {\n        var section = allSections[i];\n        if (section.top < scrollMiddle) {\n          highlightedSection = section;\n        }\n        else {\n          break;\n        }\n      }\n\n      highlightedSection.highlight();\n    }\n\n  }\n\n\n\n\n\n  // Smoothscroll\n\n\n  // based on http://en.wikipedia.org/wiki/Smoothstep\n  var smoothStep = function(start, end, point) {\n      if(point <= start) { return 0; }\n      if(point >= end) { return 1; }\n      var x = (point - start) / (end - start); // interpolation\n      return x*x*(3 - 2*x);\n  }\n\n  // Mostly taken from: https://coderwall.com/p/hujlhg/smooth-scrolling-without-jquery\n  var smoothScrollToStart = function() {\n\n    var target = windowHeight;\n    var duration = 600;\n\n    var start_time = Date.now();\n    var end_time = start_time + duration;\n\n    var start_top = window.pageYOffset;\n    var distance = target - start_top;\n\n    // This is to keep track of where the scrollTop is\n    // supposed to be, based on what we're doing\n    var previous_top = window.pageYOffset;\n\n    var done = function() {\n      // Setting the menu to fixed right away\n      fixed = true;\n      navElement.classList.add('fixed');\n\n      disableScrollEvents = false;\n\n    }\n\n    // This is like a think function from a game loop\n    var scroll_frame = function() {\n      // if (window.pageYOffset != previous_top) {\n      //   disableScrollEvents = false;\n      //   return;\n      // }\n\n      // set the scrollTop for this frame\n      var now = Date.now();\n      var point = smoothStep(start_time, end_time, now);\n      var frameTop = Math.round(start_top + (distance * point));\n      window.scrollTo(0, frameTop);\n\n      // check if we're done!\n      if(now >= end_time) {\n        done();\n        return;\n      }\n\n      // If we were supposed to scroll but didn't, then we\n      // probably hit the limit, so consider it done; not\n      // interrupted.\n      if(window.pageYOffset === previous_top\n        && window.pageYOffset !== frameTop) {\n        done();\n        return;\n      }\n      previous_top = window.pageYOffset;\n\n      // schedule next frame for execution\n      setTimeout(scroll_frame, 0);\n    }\n\n    // Making sure it goes smoothly\n    disableScrollEvents = true;\n    // boostrap the animation process\n    setTimeout(scroll_frame, 0);\n  }\n\n  document.querySelector('.scroll-invitation a').addEventListener('click', function(e) {\n    e.preventDefault();\n    smoothScrollToStart();\n  });\n\n\n\n\n\n\n\n\n\n\n\n\n  // Dropzone\n\n\n  var dropzone = new Dropzone('#demo-upload', {\n    previewTemplate: document.querySelector('#preview-template').innerHTML,\n    parallelUploads: 2,\n    thumbnailHeight: 120,\n    thumbnailWidth: 120,\n    maxFilesize: 3,\n    filesizeBase: 1000,\n    thumbnail: function(file, dataUrl) {\n      if (file.previewElement) {\n        file.previewElement.classList.remove(\"dz-file-preview\");\n        var images = file.previewElement.querySelectorAll(\"[data-dz-thumbnail]\");\n        for (var i = 0; i < images.length; i++) {\n          var thumbnailElement = images[i];\n          thumbnailElement.alt = file.name;\n          thumbnailElement.src = dataUrl;\n        }\n        setTimeout(function() { file.previewElement.classList.add(\"dz-image-preview\"); }, 1);\n      }\n    }\n\n  });\n\n\n  // Now fake the file upload, since GitHub does not handle file uploads\n  // and returns a 404\n\n  var minSteps = 6,\n      maxSteps = 60,\n      timeBetweenSteps = 100,\n      bytesPerStep = 100000;\n\n  dropzone.uploadFiles = function(files) {\n    var self = this;\n\n    for (var i = 0; i < files.length; i++) {\n\n      var file = files[i];\n          totalSteps = Math.round(Math.min(maxSteps, Math.max(minSteps, file.size / bytesPerStep)));\n\n      for (var step = 0; step < totalSteps; step++) {\n        var duration = timeBetweenSteps * (step + 1);\n        setTimeout(function(file, totalSteps, step) {\n          return function() {\n            file.upload = {\n              progress: 100 * (step + 1) / totalSteps,\n              total: file.size,\n              bytesSent: (step + 1) * file.size / totalSteps\n            };\n\n            self.emit('uploadprogress', file, file.upload.progress, file.upload.bytesSent);\n            if (file.upload.progress == 100) {\n              file.status = Dropzone.SUCCESS;\n              self.emit(\"success\", file, 'success', null);\n              self.emit(\"complete\", file);\n              self.processQueue();\n            }\n          };\n        }(file, totalSteps, step), duration);\n      }\n    }\n  }\n\n}\n\n\n\n\ndocument.addEventListener(\"DOMContentLoaded\", init);\n"]}