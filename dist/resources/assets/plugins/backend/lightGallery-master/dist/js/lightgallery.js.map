{"version":3,"sources":["../../../../../../../../resources/assets/plugins/backend/lightGallery-master/dist/js/lightgallery.js"],"names":["root","factory","define","amd","a0","exports","module","require","$","defaults","mode","cssEasing","easing","speed","height","width","addClass","startClass","backdropDuration","hideBarsDelay","useLeft","closable","loop","escKey","keyPress","controls","slideEndAnimatoin","hideControlOnEnd","mousewheel","getCaptionFromTitleOrAlt","appendSubHtmlTo","subHtmlSelectorRelative","preload","showAfterLoad","selector","selectWithin","nextHtml","prevHtml","index","iframeMaxWidth","download","counter","appendCounterTo","swipeThreshold","enableSwipe","enableDrag","dynamic","dynamicEl","galleryId","Plugin","element","options","el","$el","s","extend","constructor","Array","length","modules","lGalleryOn","lgBusy","hideBartimeout","isTouch","document","documentElement","$items","find","children","$slide","$outer","init","prototype","_this","_hash","window","location","hash","indexOf","parseInt","split","hasClass","setTimeout","build","trigger","on","event","preventDefault","er","returnValue","structure","each","fn","lightGallery","key","slide","arrow","closeGallery","removeClass","clearTimeout","list","i","subHtmlCont","template","append","css","setTop","eq","doCss","$inner","prevScrollTop","scrollTop","wH","top","$lGallery","support","transition","style","isVideo","src","html","attr","html5","console","error","youtube","match","vimeo","dailymotion","vk","addHtml","subHtml","subHtmlUrl","$currentEle","first","fL","substring","load","j","loadContent","rec","delay","_hasPoster","_$img","_src","_poster","_srcset","_sizes","_html","getResponsiveSrc","srcItms","rsWidth","rsSrc","__src","splice","push","wWidth","poster","responsive","srcDyItms","srcset","sizes","iframe","_isVideo","prepend","videoClass","picturefill","elements","e","warn","_speed","fromTouch","fromThumb","direction","_prevIndex","_length","_time","downloadUrl","arrowDisable","touchPrev","touchNext","text","goToNextSlide","_loop","goToPrevSlide","keyCode","destroy","removeAttr","setTranslate","xValue","yValue","transform","touchMove","startCoords","endCoords","distance","Math","abs","touchEnd","not","isMoved","manageSwipeClass","originalEvent","targetTouches","pageX","isDraging","target","scrollLeft","_touchNext","_touchPrev","deltaY","mousedown","is","d","off","removeData","remove","data","err"],"mappings":"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","file":"lightgallery.js","sourcesContent":["/*! lightgallery - v1.6.0 - 2017-08-08\n* http://sachinchoolur.github.io/lightGallery/\n* Copyright (c) 2017 Sachin N; Licensed GPLv3 */\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module unless amdModuleId is set\n    define(['jquery'], function (a0) {\n      return (factory(a0));\n    });\n  } else if (typeof exports === 'object') {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like environments that support module.exports,\n    // like Node.\n    module.exports = factory(require('jquery'));\n  } else {\n    factory(root[\"jQuery\"]);\n  }\n}(this, function ($) {\n\n(function() {\n    'use strict';\n\n    var defaults = {\n\n        mode: 'lg-slide',\n\n        // Ex : 'ease'\n        cssEasing: 'ease',\n\n        //'for jquery animation'\n        easing: 'linear',\n        speed: 600,\n        height: '100%',\n        width: '100%',\n        addClass: '',\n        startClass: 'lg-start-zoom',\n        backdropDuration: 150,\n        hideBarsDelay: 6000,\n\n        useLeft: false,\n\n        closable: true,\n        loop: true,\n        escKey: true,\n        keyPress: true,\n        controls: true,\n        slideEndAnimatoin: true,\n        hideControlOnEnd: false,\n        mousewheel: true,\n\n        getCaptionFromTitleOrAlt: true,\n\n        // .lg-item || '.lg-sub-html'\n        appendSubHtmlTo: '.lg-sub-html',\n\n        subHtmlSelectorRelative: false,\n\n        /**\n         * @desc number of preload slides\n         * will exicute only after the current slide is fully loaded.\n         *\n         * @ex you clicked on 4th image and if preload = 1 then 3rd slide and 5th\n         * slide will be loaded in the background after the 4th slide is fully loaded..\n         * if preload is 2 then 2nd 3rd 5th 6th slides will be preloaded.. ... ...\n         *\n         */\n        preload: 1,\n        showAfterLoad: true,\n        selector: '',\n        selectWithin: '',\n        nextHtml: '',\n        prevHtml: '',\n\n        // 0, 1\n        index: false,\n\n        iframeMaxWidth: '100%',\n\n        download: true,\n        counter: true,\n        appendCounterTo: '.lg-toolbar',\n\n        swipeThreshold: 50,\n        enableSwipe: true,\n        enableDrag: true,\n\n        dynamic: false,\n        dynamicEl: [],\n        galleryId: 1\n    };\n\n    function Plugin(element, options) {\n\n        // Current lightGallery element\n        this.el = element;\n\n        // Current jquery element\n        this.$el = $(element);\n\n        // lightGallery settings\n        this.s = $.extend({}, defaults, options);\n\n        // When using dynamic mode, ensure dynamicEl is an array\n        if (this.s.dynamic && this.s.dynamicEl !== 'undefined' && this.s.dynamicEl.constructor === Array && !this.s.dynamicEl.length) {\n            throw ('When using dynamic mode, you must also define dynamicEl as an Array.');\n        }\n\n        // lightGallery modules\n        this.modules = {};\n\n        // false when lightgallery complete first slide;\n        this.lGalleryOn = false;\n\n        this.lgBusy = false;\n\n        // Timeout function for hiding controls;\n        this.hideBartimeout = false;\n\n        // To determine browser supports for touch events;\n        this.isTouch = ('ontouchstart' in document.documentElement);\n\n        // Disable hideControlOnEnd if sildeEndAnimation is true\n        if (this.s.slideEndAnimatoin) {\n            this.s.hideControlOnEnd = false;\n        }\n\n        // Gallery items\n        if (this.s.dynamic) {\n            this.$items = this.s.dynamicEl;\n        } else {\n            if (this.s.selector === 'this') {\n                this.$items = this.$el;\n            } else if (this.s.selector !== '') {\n                if (this.s.selectWithin) {\n                    this.$items = $(this.s.selectWithin).find(this.s.selector);\n                } else {\n                    this.$items = this.$el.find($(this.s.selector));\n                }\n            } else {\n                this.$items = this.$el.children();\n            }\n        }\n\n        // .lg-item\n        this.$slide = '';\n\n        // .lg-outer\n        this.$outer = '';\n\n        this.init();\n\n        return this;\n    }\n\n    Plugin.prototype.init = function() {\n\n        var _this = this;\n\n        // s.preload should not be more than $item.length\n        if (_this.s.preload > _this.$items.length) {\n            _this.s.preload = _this.$items.length;\n        }\n\n        // if dynamic option is enabled execute immediately\n        var _hash = window.location.hash;\n        if (_hash.indexOf('lg=' + this.s.galleryId) > 0) {\n\n            _this.index = parseInt(_hash.split('&slide=')[1], 10);\n\n            $('body').addClass('lg-from-hash');\n            if (!$('body').hasClass('lg-on')) {\n                setTimeout(function() {\n                    _this.build(_this.index);\n                });\n\n                $('body').addClass('lg-on');\n            }\n        }\n\n        if (_this.s.dynamic) {\n\n            _this.$el.trigger('onBeforeOpen.lg');\n\n            _this.index = _this.s.index || 0;\n\n            // prevent accidental double execution\n            if (!$('body').hasClass('lg-on')) {\n                setTimeout(function() {\n                    _this.build(_this.index);\n                    $('body').addClass('lg-on');\n                });\n            }\n        } else {\n\n            // Using different namespace for click because click event should not unbind if selector is same object('this')\n            _this.$items.on('click.lgcustom', function(event) {\n\n                // For IE8\n                try {\n                    event.preventDefault();\n                    event.preventDefault();\n                } catch (er) {\n                    event.returnValue = false;\n                }\n\n                _this.$el.trigger('onBeforeOpen.lg');\n\n                _this.index = _this.s.index || _this.$items.index(this);\n\n                // prevent accidental double execution\n                if (!$('body').hasClass('lg-on')) {\n                    _this.build(_this.index);\n                    $('body').addClass('lg-on');\n                }\n            });\n        }\n\n    };\n\n    Plugin.prototype.build = function(index) {\n\n        var _this = this;\n\n        _this.structure();\n\n        // module constructor\n        $.each($.fn.lightGallery.modules, function(key) {\n            _this.modules[key] = new $.fn.lightGallery.modules[key](_this.el);\n        });\n\n        // initiate slide function\n        _this.slide(index, false, false, false);\n\n        if (_this.s.keyPress) {\n            _this.keyPress();\n        }\n\n        if (_this.$items.length > 1) {\n\n            _this.arrow();\n\n            setTimeout(function() {\n                _this.enableDrag();\n                _this.enableSwipe();\n            }, 50);\n\n            if (_this.s.mousewheel) {\n                _this.mousewheel();\n            }\n        } else {\n            _this.$slide.on('click.lg', function() {\n                _this.$el.trigger('onSlideClick.lg');\n            });\n        }\n\n        _this.counter();\n\n        _this.closeGallery();\n\n        _this.$el.trigger('onAfterOpen.lg');\n\n        // Hide controllers if mouse doesn't move for some period\n        _this.$outer.on('mousemove.lg click.lg touchstart.lg', function() {\n\n            _this.$outer.removeClass('lg-hide-items');\n\n            clearTimeout(_this.hideBartimeout);\n\n            // Timeout will be cleared on each slide movement also\n            _this.hideBartimeout = setTimeout(function() {\n                _this.$outer.addClass('lg-hide-items');\n            }, _this.s.hideBarsDelay);\n\n        });\n\n        _this.$outer.trigger('mousemove.lg');\n\n    };\n\n    Plugin.prototype.structure = function() {\n        var list = '';\n        var controls = '';\n        var i = 0;\n        var subHtmlCont = '';\n        var template;\n        var _this = this;\n\n        $('body').append('<div class=\"lg-backdrop\"></div>');\n        $('.lg-backdrop').css('transition-duration', this.s.backdropDuration + 'ms');\n\n        // Create gallery items\n        for (i = 0; i < this.$items.length; i++) {\n            list += '<div class=\"lg-item\"></div>';\n        }\n\n        // Create controlls\n        if (this.s.controls && this.$items.length > 1) {\n            controls = '<div class=\"lg-actions\">' +\n                '<button class=\"lg-prev lg-icon\">' + this.s.prevHtml + '</button>' +\n                '<button class=\"lg-next lg-icon\">' + this.s.nextHtml + '</button>' +\n                '</div>';\n        }\n\n        if (this.s.appendSubHtmlTo === '.lg-sub-html') {\n            subHtmlCont = '<div class=\"lg-sub-html\"></div>';\n        }\n\n        template = '<div class=\"lg-outer ' + this.s.addClass + ' ' + this.s.startClass + '\">' +\n            '<div class=\"lg\" style=\"width:' + this.s.width + '; height:' + this.s.height + '\">' +\n            '<div class=\"lg-inner\">' + list + '</div>' +\n            '<div class=\"lg-toolbar lg-group\">' +\n            '<span class=\"lg-close lg-icon\"></span>' +\n            '</div>' +\n            controls +\n            subHtmlCont +\n            '</div>' +\n            '</div>';\n\n        $('body').append(template);\n        this.$outer = $('.lg-outer');\n        this.$slide = this.$outer.find('.lg-item');\n\n        if (this.s.useLeft) {\n            this.$outer.addClass('lg-use-left');\n\n            // Set mode lg-slide if use left is true;\n            this.s.mode = 'lg-slide';\n        } else {\n            this.$outer.addClass('lg-use-css3');\n        }\n\n        // For fixed height gallery\n        _this.setTop();\n        $(window).on('resize.lg orientationchange.lg', function() {\n            setTimeout(function() {\n                _this.setTop();\n            }, 100);\n        });\n\n        // add class lg-current to remove initial transition\n        this.$slide.eq(this.index).addClass('lg-current');\n\n        // add Class for css support and transition mode\n        if (this.doCss()) {\n            this.$outer.addClass('lg-css3');\n        } else {\n            this.$outer.addClass('lg-css');\n\n            // Set speed 0 because no animation will happen if browser doesn't support css3\n            this.s.speed = 0;\n        }\n\n        this.$outer.addClass(this.s.mode);\n\n        if (this.s.enableDrag && this.$items.length > 1) {\n            this.$outer.addClass('lg-grab');\n        }\n\n        if (this.s.showAfterLoad) {\n            this.$outer.addClass('lg-show-after-load');\n        }\n\n        if (this.doCss()) {\n            var $inner = this.$outer.find('.lg-inner');\n            $inner.css('transition-timing-function', this.s.cssEasing);\n            $inner.css('transition-duration', this.s.speed + 'ms');\n        }\n\n        setTimeout(function() {\n            $('.lg-backdrop').addClass('in');\n        });\n\n        setTimeout(function() {\n            _this.$outer.addClass('lg-visible');\n        }, this.s.backdropDuration);\n\n        if (this.s.download) {\n            this.$outer.find('.lg-toolbar').append('<a id=\"lg-download\" target=\"_blank\" download class=\"lg-download lg-icon\"></a>');\n        }\n\n        // Store the current scroll top value to scroll back after closing the gallery..\n        this.prevScrollTop = $(window).scrollTop();\n\n    };\n\n    // For fixed height gallery\n    Plugin.prototype.setTop = function() {\n        if (this.s.height !== '100%') {\n            var wH = $(window).height();\n            var top = (wH - parseInt(this.s.height, 10)) / 2;\n            var $lGallery = this.$outer.find('.lg');\n            if (wH >= parseInt(this.s.height, 10)) {\n                $lGallery.css('top', top + 'px');\n            } else {\n                $lGallery.css('top', '0px');\n            }\n        }\n    };\n\n    // Find css3 support\n    Plugin.prototype.doCss = function() {\n        // check for css animation support\n        var support = function() {\n            var transition = ['transition', 'MozTransition', 'WebkitTransition', 'OTransition', 'msTransition', 'KhtmlTransition'];\n            var root = document.documentElement;\n            var i = 0;\n            for (i = 0; i < transition.length; i++) {\n                if (transition[i] in root.style) {\n                    return true;\n                }\n            }\n        };\n\n        if (support()) {\n            return true;\n        }\n\n        return false;\n    };\n\n    /**\n     *  @desc Check the given src is video\n     *  @param {String} src\n     *  @return {Object} video type\n     *  Ex:{ youtube  :  [\"//www.youtube.com/watch?v=c0asJgSyxcY\", \"c0asJgSyxcY\"] }\n     */\n    Plugin.prototype.isVideo = function(src, index) {\n\n        var html;\n        if (this.s.dynamic) {\n            html = this.s.dynamicEl[index].html;\n        } else {\n            html = this.$items.eq(index).attr('data-html');\n        }\n\n        if (!src) {\n            if(html) {\n                return {\n                    html5: true\n                };\n            } else {\n                console.error('lightGallery :- data-src is not pvovided on slide item ' + (index + 1) + '. Please make sure the selector property is properly configured. More info - http://sachinchoolur.github.io/lightGallery/demos/html-markup.html');\n                return false;\n            }\n        }\n\n        var youtube = src.match(/\\/\\/(?:www\\.)?youtu(?:\\.be|be\\.com)\\/(?:watch\\?v=|embed\\/)?([a-z0-9\\-\\_\\%]+)/i);\n        var vimeo = src.match(/\\/\\/(?:www\\.)?vimeo.com\\/([0-9a-z\\-_]+)/i);\n        var dailymotion = src.match(/\\/\\/(?:www\\.)?dai.ly\\/([0-9a-z\\-_]+)/i);\n        var vk = src.match(/\\/\\/(?:www\\.)?(?:vk\\.com|vkontakte\\.ru)\\/(?:video_ext\\.php\\?)(.*)/i);\n\n        if (youtube) {\n            return {\n                youtube: youtube\n            };\n        } else if (vimeo) {\n            return {\n                vimeo: vimeo\n            };\n        } else if (dailymotion) {\n            return {\n                dailymotion: dailymotion\n            };\n        } else if (vk) {\n            return {\n                vk: vk\n            };\n        }\n    };\n\n    /**\n     *  @desc Create image counter\n     *  Ex: 1/10\n     */\n    Plugin.prototype.counter = function() {\n        if (this.s.counter) {\n            $(this.s.appendCounterTo).append('<div id=\"lg-counter\"><span id=\"lg-counter-current\">' + (parseInt(this.index, 10) + 1) + '</span> / <span id=\"lg-counter-all\">' + this.$items.length + '</span></div>');\n        }\n    };\n\n    /**\n     *  @desc add sub-html into the slide\n     *  @param {Number} index - index of the slide\n     */\n    Plugin.prototype.addHtml = function(index) {\n        var subHtml = null;\n        var subHtmlUrl;\n        var $currentEle;\n        if (this.s.dynamic) {\n            if (this.s.dynamicEl[index].subHtmlUrl) {\n                subHtmlUrl = this.s.dynamicEl[index].subHtmlUrl;\n            } else {\n                subHtml = this.s.dynamicEl[index].subHtml;\n            }\n        } else {\n            $currentEle = this.$items.eq(index);\n            if ($currentEle.attr('data-sub-html-url')) {\n                subHtmlUrl = $currentEle.attr('data-sub-html-url');\n            } else {\n                subHtml = $currentEle.attr('data-sub-html');\n                if (this.s.getCaptionFromTitleOrAlt && !subHtml) {\n                    subHtml = $currentEle.attr('title') || $currentEle.find('img').first().attr('alt');\n                }\n            }\n        }\n\n        if (!subHtmlUrl) {\n            if (typeof subHtml !== 'undefined' && subHtml !== null) {\n\n                // get first letter of subhtml\n                // if first letter starts with . or # get the html form the jQuery object\n                var fL = subHtml.substring(0, 1);\n                if (fL === '.' || fL === '#') {\n                    if (this.s.subHtmlSelectorRelative && !this.s.dynamic) {\n                        subHtml = $currentEle.find(subHtml).html();\n                    } else {\n                        subHtml = $(subHtml).html();\n                    }\n                }\n            } else {\n                subHtml = '';\n            }\n        }\n\n        if (this.s.appendSubHtmlTo === '.lg-sub-html') {\n\n            if (subHtmlUrl) {\n                this.$outer.find(this.s.appendSubHtmlTo).load(subHtmlUrl);\n            } else {\n                this.$outer.find(this.s.appendSubHtmlTo).html(subHtml);\n            }\n\n        } else {\n\n            if (subHtmlUrl) {\n                this.$slide.eq(index).load(subHtmlUrl);\n            } else {\n                this.$slide.eq(index).append(subHtml);\n            }\n        }\n\n        // Add lg-empty-html class if title doesn't exist\n        if (typeof subHtml !== 'undefined' && subHtml !== null) {\n            if (subHtml === '') {\n                this.$outer.find(this.s.appendSubHtmlTo).addClass('lg-empty-html');\n            } else {\n                this.$outer.find(this.s.appendSubHtmlTo).removeClass('lg-empty-html');\n            }\n        }\n\n        this.$el.trigger('onAfterAppendSubHtml.lg', [index]);\n    };\n\n    /**\n     *  @desc Preload slides\n     *  @param {Number} index - index of the slide\n     */\n    Plugin.prototype.preload = function(index) {\n        var i = 1;\n        var j = 1;\n        for (i = 1; i <= this.s.preload; i++) {\n            if (i >= this.$items.length - index) {\n                break;\n            }\n\n            this.loadContent(index + i, false, 0);\n        }\n\n        for (j = 1; j <= this.s.preload; j++) {\n            if (index - j < 0) {\n                break;\n            }\n\n            this.loadContent(index - j, false, 0);\n        }\n    };\n\n    /**\n     *  @desc Load slide content into slide.\n     *  @param {Number} index - index of the slide.\n     *  @param {Boolean} rec - if true call loadcontent() function again.\n     *  @param {Boolean} delay - delay for adding complete class. it is 0 except first time.\n     */\n    Plugin.prototype.loadContent = function(index, rec, delay) {\n\n        var _this = this;\n        var _hasPoster = false;\n        var _$img;\n        var _src;\n        var _poster;\n        var _srcset;\n        var _sizes;\n        var _html;\n        var getResponsiveSrc = function(srcItms) {\n            var rsWidth = [];\n            var rsSrc = [];\n            for (var i = 0; i < srcItms.length; i++) {\n                var __src = srcItms[i].split(' ');\n\n                // Manage empty space\n                if (__src[0] === '') {\n                    __src.splice(0, 1);\n                }\n\n                rsSrc.push(__src[0]);\n                rsWidth.push(__src[1]);\n            }\n\n            var wWidth = $(window).width();\n            for (var j = 0; j < rsWidth.length; j++) {\n                if (parseInt(rsWidth[j], 10) > wWidth) {\n                    _src = rsSrc[j];\n                    break;\n                }\n            }\n        };\n\n        if (_this.s.dynamic) {\n\n            if (_this.s.dynamicEl[index].poster) {\n                _hasPoster = true;\n                _poster = _this.s.dynamicEl[index].poster;\n            }\n\n            _html = _this.s.dynamicEl[index].html;\n            _src = _this.s.dynamicEl[index].src;\n\n            if (_this.s.dynamicEl[index].responsive) {\n                var srcDyItms = _this.s.dynamicEl[index].responsive.split(',');\n                getResponsiveSrc(srcDyItms);\n            }\n\n            _srcset = _this.s.dynamicEl[index].srcset;\n            _sizes = _this.s.dynamicEl[index].sizes;\n\n        } else {\n\n            if (_this.$items.eq(index).attr('data-poster')) {\n                _hasPoster = true;\n                _poster = _this.$items.eq(index).attr('data-poster');\n            }\n\n            _html = _this.$items.eq(index).attr('data-html');\n            _src = _this.$items.eq(index).attr('href') || _this.$items.eq(index).attr('data-src');\n\n            if (_this.$items.eq(index).attr('data-responsive')) {\n                var srcItms = _this.$items.eq(index).attr('data-responsive').split(',');\n                getResponsiveSrc(srcItms);\n            }\n\n            _srcset = _this.$items.eq(index).attr('data-srcset');\n            _sizes = _this.$items.eq(index).attr('data-sizes');\n\n        }\n\n        //if (_src || _srcset || _sizes || _poster) {\n\n        var iframe = false;\n        if (_this.s.dynamic) {\n            if (_this.s.dynamicEl[index].iframe) {\n                iframe = true;\n            }\n        } else {\n            if (_this.$items.eq(index).attr('data-iframe') === 'true') {\n                iframe = true;\n            }\n        }\n\n        var _isVideo = _this.isVideo(_src, index);\n        if (!_this.$slide.eq(index).hasClass('lg-loaded')) {\n            if (iframe) {\n                _this.$slide.eq(index).prepend('<div class=\"lg-video-cont lg-has-iframe\" style=\"max-width:' + _this.s.iframeMaxWidth + '\"><div class=\"lg-video\"><iframe class=\"lg-object\" frameborder=\"0\" src=\"' + _src + '\"  allowfullscreen=\"true\"></iframe></div></div>');\n            } else if (_hasPoster) {\n                var videoClass = '';\n                if (_isVideo && _isVideo.youtube) {\n                    videoClass = 'lg-has-youtube';\n                } else if (_isVideo && _isVideo.vimeo) {\n                    videoClass = 'lg-has-vimeo';\n                } else {\n                    videoClass = 'lg-has-html5';\n                }\n\n                _this.$slide.eq(index).prepend('<div class=\"lg-video-cont ' + videoClass + ' \"><div class=\"lg-video\"><span class=\"lg-video-play\"></span><img class=\"lg-object lg-has-poster\" src=\"' + _poster + '\" /></div></div>');\n\n            } else if (_isVideo) {\n                _this.$slide.eq(index).prepend('<div class=\"lg-video-cont \"><div class=\"lg-video\"></div></div>');\n                _this.$el.trigger('hasVideo.lg', [index, _src, _html]);\n            } else {\n                _this.$slide.eq(index).prepend('<div class=\"lg-img-wrap\"><img class=\"lg-object lg-image\" src=\"' + _src + '\" /></div>');\n            }\n\n            _this.$el.trigger('onAferAppendSlide.lg', [index]);\n\n            _$img = _this.$slide.eq(index).find('.lg-object');\n            if (_sizes) {\n                _$img.attr('sizes', _sizes);\n            }\n\n            if (_srcset) {\n                _$img.attr('srcset', _srcset);\n                try {\n                    picturefill({\n                        elements: [_$img[0]]\n                    });\n                } catch (e) {\n                    console.warn('lightGallery :- If you want srcset to be supported for older browser please include picturefil version 2 javascript library in your document.');\n                }\n            }\n\n            if (this.s.appendSubHtmlTo !== '.lg-sub-html') {\n                _this.addHtml(index);\n            }\n\n            _this.$slide.eq(index).addClass('lg-loaded');\n        }\n\n        _this.$slide.eq(index).find('.lg-object').on('load.lg error.lg', function() {\n\n            // For first time add some delay for displaying the start animation.\n            var _speed = 0;\n\n            // Do not change the delay value because it is required for zoom plugin.\n            // If gallery opened from direct url (hash) speed value should be 0\n            if (delay && !$('body').hasClass('lg-from-hash')) {\n                _speed = delay;\n            }\n\n            setTimeout(function() {\n                _this.$slide.eq(index).addClass('lg-complete');\n                _this.$el.trigger('onSlideItemLoad.lg', [index, delay || 0]);\n            }, _speed);\n\n        });\n\n        // @todo check load state for html5 videos\n        if (_isVideo && _isVideo.html5 && !_hasPoster) {\n            _this.$slide.eq(index).addClass('lg-complete');\n        }\n\n        if (rec === true) {\n            if (!_this.$slide.eq(index).hasClass('lg-complete')) {\n                _this.$slide.eq(index).find('.lg-object').on('load.lg error.lg', function() {\n                    _this.preload(index);\n                });\n            } else {\n                _this.preload(index);\n            }\n        }\n\n        //}\n    };\n\n    /**\n    *   @desc slide function for lightgallery\n        ** Slide() gets call on start\n        ** ** Set lg.on true once slide() function gets called.\n        ** Call loadContent() on slide() function inside setTimeout\n        ** ** On first slide we do not want any animation like slide of fade\n        ** ** So on first slide( if lg.on if false that is first slide) loadContent() should start loading immediately\n        ** ** Else loadContent() should wait for the transition to complete.\n        ** ** So set timeout s.speed + 50\n    <=> ** loadContent() will load slide content in to the particular slide\n        ** ** It has recursion (rec) parameter. if rec === true loadContent() will call preload() function.\n        ** ** preload will execute only when the previous slide is fully loaded (images iframe)\n        ** ** avoid simultaneous image load\n    <=> ** Preload() will check for s.preload value and call loadContent() again accoring to preload value\n        ** loadContent()  <====> Preload();\n\n    *   @param {Number} index - index of the slide\n    *   @param {Boolean} fromTouch - true if slide function called via touch event or mouse drag\n    *   @param {Boolean} fromThumb - true if slide function called via thumbnail click\n    *   @param {String} direction - Direction of the slide(next/prev)\n    */\n    Plugin.prototype.slide = function(index, fromTouch, fromThumb, direction) {\n\n        var _prevIndex = this.$outer.find('.lg-current').index();\n        var _this = this;\n\n        // Prevent if multiple call\n        // Required for hsh plugin\n        if (_this.lGalleryOn && (_prevIndex === index)) {\n            return;\n        }\n\n        var _length = this.$slide.length;\n        var _time = _this.lGalleryOn ? this.s.speed : 0;\n\n        if (!_this.lgBusy) {\n\n            if (this.s.download) {\n                var _src;\n                if (_this.s.dynamic) {\n                    _src = _this.s.dynamicEl[index].downloadUrl !== false && (_this.s.dynamicEl[index].downloadUrl || _this.s.dynamicEl[index].src);\n                } else {\n                    _src = _this.$items.eq(index).attr('data-download-url') !== 'false' && (_this.$items.eq(index).attr('data-download-url') || _this.$items.eq(index).attr('href') || _this.$items.eq(index).attr('data-src'));\n\n                }\n\n                if (_src) {\n                    $('#lg-download').attr('href', _src);\n                    _this.$outer.removeClass('lg-hide-download');\n                } else {\n                    _this.$outer.addClass('lg-hide-download');\n                }\n            }\n\n            this.$el.trigger('onBeforeSlide.lg', [_prevIndex, index, fromTouch, fromThumb]);\n\n            _this.lgBusy = true;\n\n            clearTimeout(_this.hideBartimeout);\n\n            // Add title if this.s.appendSubHtmlTo === lg-sub-html\n            if (this.s.appendSubHtmlTo === '.lg-sub-html') {\n\n                // wait for slide animation to complete\n                setTimeout(function() {\n                    _this.addHtml(index);\n                }, _time);\n            }\n\n            this.arrowDisable(index);\n\n            if (!direction) {\n                if (index < _prevIndex) {\n                    direction = 'prev';\n                } else if (index > _prevIndex) {\n                    direction = 'next';\n                }\n            }\n\n            if (!fromTouch) {\n\n                // remove all transitions\n                _this.$outer.addClass('lg-no-trans');\n\n                this.$slide.removeClass('lg-prev-slide lg-next-slide');\n\n                if (direction === 'prev') {\n\n                    //prevslide\n                    this.$slide.eq(index).addClass('lg-prev-slide');\n                    this.$slide.eq(_prevIndex).addClass('lg-next-slide');\n                } else {\n\n                    // next slide\n                    this.$slide.eq(index).addClass('lg-next-slide');\n                    this.$slide.eq(_prevIndex).addClass('lg-prev-slide');\n                }\n\n                // give 50 ms for browser to add/remove class\n                setTimeout(function() {\n                    _this.$slide.removeClass('lg-current');\n\n                    //_this.$slide.eq(_prevIndex).removeClass('lg-current');\n                    _this.$slide.eq(index).addClass('lg-current');\n\n                    // reset all transitions\n                    _this.$outer.removeClass('lg-no-trans');\n                }, 50);\n            } else {\n\n                this.$slide.removeClass('lg-prev-slide lg-current lg-next-slide');\n                var touchPrev;\n                var touchNext;\n                if (_length > 2) {\n                    touchPrev = index - 1;\n                    touchNext = index + 1;\n\n                    if ((index === 0) && (_prevIndex === _length - 1)) {\n\n                        // next slide\n                        touchNext = 0;\n                        touchPrev = _length - 1;\n                    } else if ((index === _length - 1) && (_prevIndex === 0)) {\n\n                        // prev slide\n                        touchNext = 0;\n                        touchPrev = _length - 1;\n                    }\n\n                } else {\n                    touchPrev = 0;\n                    touchNext = 1;\n                }\n\n                if (direction === 'prev') {\n                    _this.$slide.eq(touchNext).addClass('lg-next-slide');\n                } else {\n                    _this.$slide.eq(touchPrev).addClass('lg-prev-slide');\n                }\n\n                _this.$slide.eq(index).addClass('lg-current');\n            }\n\n            if (_this.lGalleryOn) {\n                setTimeout(function() {\n                    _this.loadContent(index, true, 0);\n                }, this.s.speed + 50);\n\n                setTimeout(function() {\n                    _this.lgBusy = false;\n                    _this.$el.trigger('onAfterSlide.lg', [_prevIndex, index, fromTouch, fromThumb]);\n                }, this.s.speed);\n\n            } else {\n                _this.loadContent(index, true, _this.s.backdropDuration);\n\n                _this.lgBusy = false;\n                _this.$el.trigger('onAfterSlide.lg', [_prevIndex, index, fromTouch, fromThumb]);\n            }\n\n            _this.lGalleryOn = true;\n\n            if (this.s.counter) {\n                $('#lg-counter-current').text(index + 1);\n            }\n\n        }\n\n    };\n\n    /**\n     *  @desc Go to next slide\n     *  @param {Boolean} fromTouch - true if slide function called via touch event\n     */\n    Plugin.prototype.goToNextSlide = function(fromTouch) {\n        var _this = this;\n        var _loop = _this.s.loop;\n        if (fromTouch && _this.$slide.length < 3) {\n            _loop = false;\n        }\n\n        if (!_this.lgBusy) {\n            if ((_this.index + 1) < _this.$slide.length) {\n                _this.index++;\n                _this.$el.trigger('onBeforeNextSlide.lg', [_this.index]);\n                _this.slide(_this.index, fromTouch, false, 'next');\n            } else {\n                if (_loop) {\n                    _this.index = 0;\n                    _this.$el.trigger('onBeforeNextSlide.lg', [_this.index]);\n                    _this.slide(_this.index, fromTouch, false, 'next');\n                } else if (_this.s.slideEndAnimatoin && !fromTouch) {\n                    _this.$outer.addClass('lg-right-end');\n                    setTimeout(function() {\n                        _this.$outer.removeClass('lg-right-end');\n                    }, 400);\n                }\n            }\n        }\n    };\n\n    /**\n     *  @desc Go to previous slide\n     *  @param {Boolean} fromTouch - true if slide function called via touch event\n     */\n    Plugin.prototype.goToPrevSlide = function(fromTouch) {\n        var _this = this;\n        var _loop = _this.s.loop;\n        if (fromTouch && _this.$slide.length < 3) {\n            _loop = false;\n        }\n\n        if (!_this.lgBusy) {\n            if (_this.index > 0) {\n                _this.index--;\n                _this.$el.trigger('onBeforePrevSlide.lg', [_this.index, fromTouch]);\n                _this.slide(_this.index, fromTouch, false, 'prev');\n            } else {\n                if (_loop) {\n                    _this.index = _this.$items.length - 1;\n                    _this.$el.trigger('onBeforePrevSlide.lg', [_this.index, fromTouch]);\n                    _this.slide(_this.index, fromTouch, false, 'prev');\n                } else if (_this.s.slideEndAnimatoin && !fromTouch) {\n                    _this.$outer.addClass('lg-left-end');\n                    setTimeout(function() {\n                        _this.$outer.removeClass('lg-left-end');\n                    }, 400);\n                }\n            }\n        }\n    };\n\n    Plugin.prototype.keyPress = function() {\n        var _this = this;\n        if (this.$items.length > 1) {\n            $(window).on('keyup.lg', function(e) {\n                if (_this.$items.length > 1) {\n                    if (e.keyCode === 37) {\n                        e.preventDefault();\n                        _this.goToPrevSlide();\n                    }\n\n                    if (e.keyCode === 39) {\n                        e.preventDefault();\n                        _this.goToNextSlide();\n                    }\n                }\n            });\n        }\n\n        $(window).on('keydown.lg', function(e) {\n            if (_this.s.escKey === true && e.keyCode === 27) {\n                e.preventDefault();\n                if (!_this.$outer.hasClass('lg-thumb-open')) {\n                    _this.destroy();\n                } else {\n                    _this.$outer.removeClass('lg-thumb-open');\n                }\n            }\n        });\n    };\n\n    Plugin.prototype.arrow = function() {\n        var _this = this;\n        this.$outer.find('.lg-prev').on('click.lg', function() {\n            _this.goToPrevSlide();\n        });\n\n        this.$outer.find('.lg-next').on('click.lg', function() {\n            _this.goToNextSlide();\n        });\n    };\n\n    Plugin.prototype.arrowDisable = function(index) {\n\n        // Disable arrows if s.hideControlOnEnd is true\n        if (!this.s.loop && this.s.hideControlOnEnd) {\n            if ((index + 1) < this.$slide.length) {\n                this.$outer.find('.lg-next').removeAttr('disabled').removeClass('disabled');\n            } else {\n                this.$outer.find('.lg-next').attr('disabled', 'disabled').addClass('disabled');\n            }\n\n            if (index > 0) {\n                this.$outer.find('.lg-prev').removeAttr('disabled').removeClass('disabled');\n            } else {\n                this.$outer.find('.lg-prev').attr('disabled', 'disabled').addClass('disabled');\n            }\n        }\n    };\n\n    Plugin.prototype.setTranslate = function($el, xValue, yValue) {\n        // jQuery supports Automatic CSS prefixing since jQuery 1.8.0\n        if (this.s.useLeft) {\n            $el.css('left', xValue);\n        } else {\n            $el.css({\n                transform: 'translate3d(' + (xValue) + 'px, ' + yValue + 'px, 0px)'\n            });\n        }\n    };\n\n    Plugin.prototype.touchMove = function(startCoords, endCoords) {\n\n        var distance = endCoords - startCoords;\n\n        if (Math.abs(distance) > 15) {\n            // reset opacity and transition duration\n            this.$outer.addClass('lg-dragging');\n\n            // move current slide\n            this.setTranslate(this.$slide.eq(this.index), distance, 0);\n\n            // move next and prev slide with current slide\n            this.setTranslate($('.lg-prev-slide'), -this.$slide.eq(this.index).width() + distance, 0);\n            this.setTranslate($('.lg-next-slide'), this.$slide.eq(this.index).width() + distance, 0);\n        }\n    };\n\n    Plugin.prototype.touchEnd = function(distance) {\n        var _this = this;\n\n        // keep slide animation for any mode while dragg/swipe\n        if (_this.s.mode !== 'lg-slide') {\n            _this.$outer.addClass('lg-slide');\n        }\n\n        this.$slide.not('.lg-current, .lg-prev-slide, .lg-next-slide').css('opacity', '0');\n\n        // set transition duration\n        setTimeout(function() {\n            _this.$outer.removeClass('lg-dragging');\n            if ((distance < 0) && (Math.abs(distance) > _this.s.swipeThreshold)) {\n                _this.goToNextSlide(true);\n            } else if ((distance > 0) && (Math.abs(distance) > _this.s.swipeThreshold)) {\n                _this.goToPrevSlide(true);\n            } else if (Math.abs(distance) < 5) {\n\n                // Trigger click if distance is less than 5 pix\n                _this.$el.trigger('onSlideClick.lg');\n            }\n\n            _this.$slide.removeAttr('style');\n        });\n\n        // remove slide class once drag/swipe is completed if mode is not slide\n        setTimeout(function() {\n            if (!_this.$outer.hasClass('lg-dragging') && _this.s.mode !== 'lg-slide') {\n                _this.$outer.removeClass('lg-slide');\n            }\n        }, _this.s.speed + 100);\n\n    };\n\n    Plugin.prototype.enableSwipe = function() {\n        var _this = this;\n        var startCoords = 0;\n        var endCoords = 0;\n        var isMoved = false;\n\n        if (_this.s.enableSwipe && _this.doCss()) {\n\n            _this.$slide.on('touchstart.lg', function(e) {\n                if (!_this.$outer.hasClass('lg-zoomed') && !_this.lgBusy) {\n                    e.preventDefault();\n                    _this.manageSwipeClass();\n                    startCoords = e.originalEvent.targetTouches[0].pageX;\n                }\n            });\n\n            _this.$slide.on('touchmove.lg', function(e) {\n                if (!_this.$outer.hasClass('lg-zoomed')) {\n                    e.preventDefault();\n                    endCoords = e.originalEvent.targetTouches[0].pageX;\n                    _this.touchMove(startCoords, endCoords);\n                    isMoved = true;\n                }\n            });\n\n            _this.$slide.on('touchend.lg', function() {\n                if (!_this.$outer.hasClass('lg-zoomed')) {\n                    if (isMoved) {\n                        isMoved = false;\n                        _this.touchEnd(endCoords - startCoords);\n                    } else {\n                        _this.$el.trigger('onSlideClick.lg');\n                    }\n                }\n            });\n        }\n\n    };\n\n    Plugin.prototype.enableDrag = function() {\n        var _this = this;\n        var startCoords = 0;\n        var endCoords = 0;\n        var isDraging = false;\n        var isMoved = false;\n        if (_this.s.enableDrag && _this.doCss()) {\n            _this.$slide.on('mousedown.lg', function(e) {\n                // execute only on .lg-object\n                if (!_this.$outer.hasClass('lg-zoomed')) {\n                    if ($(e.target).hasClass('lg-object') || $(e.target).hasClass('lg-video-play')) {\n                        e.preventDefault();\n\n                        if (!_this.lgBusy) {\n                            _this.manageSwipeClass();\n                            startCoords = e.pageX;\n                            isDraging = true;\n\n                            // ** Fix for webkit cursor issue https://code.google.com/p/chromium/issues/detail?id=26723\n                            _this.$outer.scrollLeft += 1;\n                            _this.$outer.scrollLeft -= 1;\n\n                            // *\n\n                            _this.$outer.removeClass('lg-grab').addClass('lg-grabbing');\n\n                            _this.$el.trigger('onDragstart.lg');\n                        }\n\n                    }\n                }\n            });\n\n            $(window).on('mousemove.lg', function(e) {\n                if (isDraging) {\n                    isMoved = true;\n                    endCoords = e.pageX;\n                    _this.touchMove(startCoords, endCoords);\n                    _this.$el.trigger('onDragmove.lg');\n                }\n            });\n\n            $(window).on('mouseup.lg', function(e) {\n                if (isMoved) {\n                    isMoved = false;\n                    _this.touchEnd(endCoords - startCoords);\n                    _this.$el.trigger('onDragend.lg');\n                } else if ($(e.target).hasClass('lg-object') || $(e.target).hasClass('lg-video-play')) {\n                    _this.$el.trigger('onSlideClick.lg');\n                }\n\n                // Prevent execution on click\n                if (isDraging) {\n                    isDraging = false;\n                    _this.$outer.removeClass('lg-grabbing').addClass('lg-grab');\n                }\n            });\n\n        }\n    };\n\n    Plugin.prototype.manageSwipeClass = function() {\n        var _touchNext = this.index + 1;\n        var _touchPrev = this.index - 1;\n        if (this.s.loop && this.$slide.length > 2) {\n            if (this.index === 0) {\n                _touchPrev = this.$slide.length - 1;\n            } else if (this.index === this.$slide.length - 1) {\n                _touchNext = 0;\n            }\n        }\n\n        this.$slide.removeClass('lg-next-slide lg-prev-slide');\n        if (_touchPrev > -1) {\n            this.$slide.eq(_touchPrev).addClass('lg-prev-slide');\n        }\n\n        this.$slide.eq(_touchNext).addClass('lg-next-slide');\n    };\n\n    Plugin.prototype.mousewheel = function() {\n        var _this = this;\n        _this.$outer.on('mousewheel.lg', function(e) {\n\n            if (!e.deltaY) {\n                return;\n            }\n\n            if (e.deltaY > 0) {\n                _this.goToPrevSlide();\n            } else {\n                _this.goToNextSlide();\n            }\n\n            e.preventDefault();\n        });\n\n    };\n\n    Plugin.prototype.closeGallery = function() {\n\n        var _this = this;\n        var mousedown = false;\n        this.$outer.find('.lg-close').on('click.lg', function() {\n            _this.destroy();\n        });\n\n        if (_this.s.closable) {\n\n            // If you drag the slide and release outside gallery gets close on chrome\n            // for preventing this check mousedown and mouseup happened on .lg-item or lg-outer\n            _this.$outer.on('mousedown.lg', function(e) {\n\n                if ($(e.target).is('.lg-outer') || $(e.target).is('.lg-item ') || $(e.target).is('.lg-img-wrap')) {\n                    mousedown = true;\n                } else {\n                    mousedown = false;\n                }\n\n            });\n\n            _this.$outer.on('mouseup.lg', function(e) {\n\n                if ($(e.target).is('.lg-outer') || $(e.target).is('.lg-item ') || $(e.target).is('.lg-img-wrap') && mousedown) {\n                    if (!_this.$outer.hasClass('lg-dragging')) {\n                        _this.destroy();\n                    }\n                }\n\n            });\n\n        }\n\n    };\n\n    Plugin.prototype.destroy = function(d) {\n\n        var _this = this;\n\n        if (!d) {\n            _this.$el.trigger('onBeforeClose.lg');\n            $(window).scrollTop(_this.prevScrollTop);\n        }\n\n\n        /**\n         * if d is false or undefined destroy will only close the gallery\n         * plugins instance remains with the element\n         *\n         * if d is true destroy will completely remove the plugin\n         */\n\n        if (d) {\n            if (!_this.s.dynamic) {\n                // only when not using dynamic mode is $items a jquery collection\n                this.$items.off('click.lg click.lgcustom');\n            }\n\n            $.removeData(_this.el, 'lightGallery');\n        }\n\n        // Unbind all events added by lightGallery\n        this.$el.off('.lg.tm');\n\n        // Distroy all lightGallery modules\n        $.each($.fn.lightGallery.modules, function(key) {\n            if (_this.modules[key]) {\n                _this.modules[key].destroy();\n            }\n        });\n\n        this.lGalleryOn = false;\n\n        clearTimeout(_this.hideBartimeout);\n        this.hideBartimeout = false;\n        $(window).off('.lg');\n        $('body').removeClass('lg-on lg-from-hash');\n\n        if (_this.$outer) {\n            _this.$outer.removeClass('lg-visible');\n        }\n\n        $('.lg-backdrop').removeClass('in');\n\n        setTimeout(function() {\n            if (_this.$outer) {\n                _this.$outer.remove();\n            }\n\n            $('.lg-backdrop').remove();\n\n            if (!d) {\n                _this.$el.trigger('onCloseAfter.lg');\n            }\n\n        }, _this.s.backdropDuration + 50);\n    };\n\n    $.fn.lightGallery = function(options) {\n        return this.each(function() {\n            if (!$.data(this, 'lightGallery')) {\n                $.data(this, 'lightGallery', new Plugin(this, options));\n            } else {\n                try {\n                    $(this).data('lightGallery').init();\n                } catch (err) {\n                    console.error('lightGallery has not initiated properly');\n                }\n            }\n        });\n    };\n\n    $.fn.lightGallery.modules = {};\n\n})();\n\n\n}));\n"]}