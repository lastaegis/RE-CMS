{"version":3,"sources":["../../../../../../../../../../resources/assets/plugins/backend/select2-4.0.3/src/js/select2/dropdown/search.js"],"names":["define","$","Utils","Search","prototype","render","decorated","$rendered","call","$search","$searchContainer","find","prepend","bind","container","$container","self","on","evt","trigger","_keyUpPrevented","isDefaultPrevented","off","handleSearch","attr","focus","window","setTimeout","val","isOpen","params","query","term","showSearch","removeClass","addClass","input","_"],"mappings":"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","file":"search.js","sourcesContent":["define([\n  'jquery',\n  '../utils'\n], function ($, Utils) {\n  function Search () { }\n\n  Search.prototype.render = function (decorated) {\n    var $rendered = decorated.call(this);\n\n    var $search = $(\n      '<span class=\"select2-search select2-search--dropdown\">' +\n        '<input class=\"select2-search__field\" type=\"search\" tabindex=\"-1\"' +\n        ' autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\"' +\n        ' spellcheck=\"false\" role=\"textbox\" />' +\n      '</span>'\n    );\n\n    this.$searchContainer = $search;\n    this.$search = $search.find('input');\n\n    $rendered.prepend($search);\n\n    return $rendered;\n  };\n\n  Search.prototype.bind = function (decorated, container, $container) {\n    var self = this;\n\n    decorated.call(this, container, $container);\n\n    this.$search.on('keydown', function (evt) {\n      self.trigger('keypress', evt);\n\n      self._keyUpPrevented = evt.isDefaultPrevented();\n    });\n\n    // Workaround for browsers which do not support the `input` event\n    // This will prevent double-triggering of events for browsers which support\n    // both the `keyup` and `input` events.\n    this.$search.on('input', function (evt) {\n      // Unbind the duplicated `keyup` event\n      $(this).off('keyup');\n    });\n\n    this.$search.on('keyup input', function (evt) {\n      self.handleSearch(evt);\n    });\n\n    container.on('open', function () {\n      self.$search.attr('tabindex', 0);\n\n      self.$search.focus();\n\n      window.setTimeout(function () {\n        self.$search.focus();\n      }, 0);\n    });\n\n    container.on('close', function () {\n      self.$search.attr('tabindex', -1);\n\n      self.$search.val('');\n    });\n\n    container.on('focus', function () {\n      if (container.isOpen()) {\n        self.$search.focus();\n      }\n    });\n\n    container.on('results:all', function (params) {\n      if (params.query.term == null || params.query.term === '') {\n        var showSearch = self.showSearch(params);\n\n        if (showSearch) {\n          self.$searchContainer.removeClass('select2-search--hide');\n        } else {\n          self.$searchContainer.addClass('select2-search--hide');\n        }\n      }\n    });\n  };\n\n  Search.prototype.handleSearch = function (evt) {\n    if (!this._keyUpPrevented) {\n      var input = this.$search.val();\n\n      this.trigger('query', {\n        term: input\n      });\n    }\n\n    this._keyUpPrevented = false;\n  };\n\n  Search.prototype.showSearch = function (_, params) {\n    return true;\n  };\n\n  return Search;\n});\n"]}