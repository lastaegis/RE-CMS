{"version":3,"sources":["../../../../../../../../../../resources/assets/plugins/backend/select2-4.0.3/src/js/select2/data/tags.js"],"names":["define","$","Tags","decorated","$element","options","tags","get","createTag","undefined","insertTag","call","isArray","t","length","tag","item","_normalizeItem","$option","option","append","prototype","query","params","callback","self","_removeOldTags","term","page","wrapper","obj","child","data","results","i","checkChildren","children","checkText","text","attr","addOptions","trim","id","_","unshift","_lastTag","$options","find","each","selected","remove"],"mappings":";;AAAAA,OAAO,CACL,QADK,CAAP,EAEG,UAAUC,CAAV,EAAa;AACd,WAASC,IAAT,CAAeC,SAAf,EAA0BC,QAA1B,EAAoCC,OAApC,EAA6C;AAC3C,QAAIC,OAAOD,QAAQE,GAAR,CAAY,MAAZ,CAAX;;AAEA,QAAIC,YAAYH,QAAQE,GAAR,CAAY,WAAZ,CAAhB;;AAEA,QAAIC,cAAcC,SAAlB,EAA6B;AAC3B,WAAKD,SAAL,GAAiBA,SAAjB;AACD;;AAED,QAAIE,YAAYL,QAAQE,GAAR,CAAY,WAAZ,CAAhB;;AAEA,QAAIG,cAAcD,SAAlB,EAA6B;AACzB,WAAKC,SAAL,GAAiBA,SAAjB;AACH;;AAEDP,cAAUQ,IAAV,CAAe,IAAf,EAAqBP,QAArB,EAA+BC,OAA/B;;AAEA,QAAIJ,EAAEW,OAAF,CAAUN,IAAV,CAAJ,EAAqB;AACnB,WAAK,IAAIO,IAAI,CAAb,EAAgBA,IAAIP,KAAKQ,MAAzB,EAAiCD,GAAjC,EAAsC;AACpC,YAAIE,MAAMT,KAAKO,CAAL,CAAV;AACA,YAAIG,OAAO,KAAKC,cAAL,CAAoBF,GAApB,CAAX;;AAEA,YAAIG,UAAU,KAAKC,MAAL,CAAYH,IAAZ,CAAd;;AAEA,aAAKZ,QAAL,CAAcgB,MAAd,CAAqBF,OAArB;AACD;AACF;AACF;;AAEDhB,OAAKmB,SAAL,CAAeC,KAAf,GAAuB,UAAUnB,SAAV,EAAqBoB,MAArB,EAA6BC,QAA7B,EAAuC;AAC5D,QAAIC,OAAO,IAAX;;AAEA,SAAKC,cAAL;;AAEA,QAAIH,OAAOI,IAAP,IAAe,IAAf,IAAuBJ,OAAOK,IAAP,IAAe,IAA1C,EAAgD;AAC9CzB,gBAAUQ,IAAV,CAAe,IAAf,EAAqBY,MAArB,EAA6BC,QAA7B;AACA;AACD;;AAED,aAASK,OAAT,CAAkBC,GAAlB,EAAuBC,KAAvB,EAA8B;AAC5B,UAAIC,OAAOF,IAAIG,OAAf;;AAEA,WAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIF,KAAKlB,MAAzB,EAAiCoB,GAAjC,EAAsC;AACpC,YAAIf,SAASa,KAAKE,CAAL,CAAb;;AAEA,YAAIC,gBACFhB,OAAOiB,QAAP,IAAmB,IAAnB,IACA,CAACP,QAAQ;AACPI,mBAASd,OAAOiB;AADT,SAAR,EAEE,IAFF,CAFH;;AAOA,YAAIC,YAAYlB,OAAOmB,IAAP,KAAgBf,OAAOI,IAAvC;;AAEA,YAAIU,aAAaF,aAAjB,EAAgC;AAC9B,cAAIJ,KAAJ,EAAW;AACT,mBAAO,KAAP;AACD;;AAEDD,cAAIE,IAAJ,GAAWA,IAAX;AACAR,mBAASM,GAAT;;AAEA;AACD;AACF;;AAED,UAAIC,KAAJ,EAAW;AACT,eAAO,IAAP;AACD;;AAED,UAAIhB,MAAMU,KAAKjB,SAAL,CAAee,MAAf,CAAV;;AAEA,UAAIR,OAAO,IAAX,EAAiB;AACf,YAAIG,UAAUO,KAAKN,MAAL,CAAYJ,GAAZ,CAAd;AACAG,gBAAQqB,IAAR,CAAa,kBAAb,EAAiC,IAAjC;;AAEAd,aAAKe,UAAL,CAAgB,CAACtB,OAAD,CAAhB;;AAEAO,aAAKf,SAAL,CAAesB,IAAf,EAAqBjB,GAArB;AACD;;AAEDe,UAAIG,OAAJ,GAAcD,IAAd;;AAEAR,eAASM,GAAT;AACD;;AAED3B,cAAUQ,IAAV,CAAe,IAAf,EAAqBY,MAArB,EAA6BM,OAA7B;AACD,GA1DD;;AA4DA3B,OAAKmB,SAAL,CAAeb,SAAf,GAA2B,UAAUL,SAAV,EAAqBoB,MAArB,EAA6B;AACtD,QAAII,OAAO1B,EAAEwC,IAAF,CAAOlB,OAAOI,IAAd,CAAX;;AAEA,QAAIA,SAAS,EAAb,EAAiB;AACf,aAAO,IAAP;AACD;;AAED,WAAO;AACLe,UAAIf,IADC;AAELW,YAAMX;AAFD,KAAP;AAID,GAXD;;AAaAzB,OAAKmB,SAAL,CAAeX,SAAf,GAA2B,UAAUiC,CAAV,EAAaX,IAAb,EAAmBjB,GAAnB,EAAwB;AACjDiB,SAAKY,OAAL,CAAa7B,GAAb;AACD,GAFD;;AAIAb,OAAKmB,SAAL,CAAeK,cAAf,GAAgC,UAAUiB,CAAV,EAAa;AAC3C,QAAI5B,MAAM,KAAK8B,QAAf;;AAEA,QAAIC,WAAW,KAAK1C,QAAL,CAAc2C,IAAd,CAAmB,0BAAnB,CAAf;;AAEAD,aAASE,IAAT,CAAc,YAAY;AACxB,UAAI,KAAKC,QAAT,EAAmB;AACjB;AACD;;AAEDhD,QAAE,IAAF,EAAQiD,MAAR;AACD,KAND;AAOD,GAZD;;AAcA,SAAOhD,IAAP;AACD,CA5HD","file":"tags.js","sourcesContent":["define([\n  'jquery'\n], function ($) {\n  function Tags (decorated, $element, options) {\n    var tags = options.get('tags');\n\n    var createTag = options.get('createTag');\n\n    if (createTag !== undefined) {\n      this.createTag = createTag;\n    }\n\n    var insertTag = options.get('insertTag');\n\n    if (insertTag !== undefined) {\n        this.insertTag = insertTag;\n    }\n\n    decorated.call(this, $element, options);\n\n    if ($.isArray(tags)) {\n      for (var t = 0; t < tags.length; t++) {\n        var tag = tags[t];\n        var item = this._normalizeItem(tag);\n\n        var $option = this.option(item);\n\n        this.$element.append($option);\n      }\n    }\n  }\n\n  Tags.prototype.query = function (decorated, params, callback) {\n    var self = this;\n\n    this._removeOldTags();\n\n    if (params.term == null || params.page != null) {\n      decorated.call(this, params, callback);\n      return;\n    }\n\n    function wrapper (obj, child) {\n      var data = obj.results;\n\n      for (var i = 0; i < data.length; i++) {\n        var option = data[i];\n\n        var checkChildren = (\n          option.children != null &&\n          !wrapper({\n            results: option.children\n          }, true)\n        );\n\n        var checkText = option.text === params.term;\n\n        if (checkText || checkChildren) {\n          if (child) {\n            return false;\n          }\n\n          obj.data = data;\n          callback(obj);\n\n          return;\n        }\n      }\n\n      if (child) {\n        return true;\n      }\n\n      var tag = self.createTag(params);\n\n      if (tag != null) {\n        var $option = self.option(tag);\n        $option.attr('data-select2-tag', true);\n\n        self.addOptions([$option]);\n\n        self.insertTag(data, tag);\n      }\n\n      obj.results = data;\n\n      callback(obj);\n    }\n\n    decorated.call(this, params, wrapper);\n  };\n\n  Tags.prototype.createTag = function (decorated, params) {\n    var term = $.trim(params.term);\n\n    if (term === '') {\n      return null;\n    }\n\n    return {\n      id: term,\n      text: term\n    };\n  };\n\n  Tags.prototype.insertTag = function (_, data, tag) {\n    data.unshift(tag);\n  };\n\n  Tags.prototype._removeOldTags = function (_) {\n    var tag = this._lastTag;\n\n    var $options = this.$element.find('option[data-select2-tag]');\n\n    $options.each(function () {\n      if (this.selected) {\n        return;\n      }\n\n      $(this).remove();\n    });\n  };\n\n  return Tags;\n});\n"]}