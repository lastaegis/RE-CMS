{"version":3,"sources":["../../../../../../../../../resources/assets/plugins/backend/select2-4.0.3/src/js/select2/results.js"],"names":["define","$","Utils","Results","$element","options","dataAdapter","data","__super__","constructor","call","Extend","Observable","prototype","render","$results","get","attr","clear","empty","displayMessage","params","escapeMarkup","hideLoading","$message","message","append","args","className","hideMessages","find","remove","$options","results","length","children","trigger","sort","d","item","$option","option","push","position","$dropdown","$resultsContainer","sorter","highlightFirstItem","$selected","filter","first","ensureHighlightVisible","setClasses","self","current","selected","selectedIds","map","s","id","toString","each","element","inArray","showLoading","loadingMore","loading","disabled","text","$loading","prepend","document","createElement","attrs","_resultId","title","role","val","setAttribute","label","$label","template","$children","c","child","$child","$childrenContainer","bind","container","$container","on","isOpen","removeAttr","$highlighted","getHighlightedResults","currentIndex","index","nextIndex","$next","eq","currentOffset","offset","top","nextTop","nextOffset","scrollTop","outerHeight","nextBottom","addClass","fn","mousewheel","e","bottom","scrollHeight","deltaY","isAtTop","isAtBottom","height","preventDefault","stopPropagation","evt","$this","originalEvent","removeClass","destroy","offsetDelta","result","content","style","display","innerHTML"],"mappings":"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","file":"results.js","sourcesContent":["define([\n  'jquery',\n  './utils'\n], function ($, Utils) {\n  function Results ($element, options, dataAdapter) {\n    this.$element = $element;\n    this.data = dataAdapter;\n    this.options = options;\n\n    Results.__super__.constructor.call(this);\n  }\n\n  Utils.Extend(Results, Utils.Observable);\n\n  Results.prototype.render = function () {\n    var $results = $(\n      '<ul class=\"select2-results__options\" role=\"tree\"></ul>'\n    );\n\n    if (this.options.get('multiple')) {\n      $results.attr('aria-multiselectable', 'true');\n    }\n\n    this.$results = $results;\n\n    return $results;\n  };\n\n  Results.prototype.clear = function () {\n    this.$results.empty();\n  };\n\n  Results.prototype.displayMessage = function (params) {\n    var escapeMarkup = this.options.get('escapeMarkup');\n\n    this.clear();\n    this.hideLoading();\n\n    var $message = $(\n      '<li role=\"treeitem\" aria-live=\"assertive\"' +\n      ' class=\"select2-results__option\"></li>'\n    );\n\n    var message = this.options.get('translations').get(params.message);\n\n    $message.append(\n      escapeMarkup(\n        message(params.args)\n      )\n    );\n\n    $message[0].className += ' select2-results__message';\n\n    this.$results.append($message);\n  };\n\n  Results.prototype.hideMessages = function () {\n    this.$results.find('.select2-results__message').remove();\n  };\n\n  Results.prototype.append = function (data) {\n    this.hideLoading();\n\n    var $options = [];\n\n    if (data.results == null || data.results.length === 0) {\n      if (this.$results.children().length === 0) {\n        this.trigger('results:message', {\n          message: 'noResults'\n        });\n      }\n\n      return;\n    }\n\n    data.results = this.sort(data.results);\n\n    for (var d = 0; d < data.results.length; d++) {\n      var item = data.results[d];\n\n      var $option = this.option(item);\n\n      $options.push($option);\n    }\n\n    this.$results.append($options);\n  };\n\n  Results.prototype.position = function ($results, $dropdown) {\n    var $resultsContainer = $dropdown.find('.select2-results');\n    $resultsContainer.append($results);\n  };\n\n  Results.prototype.sort = function (data) {\n    var sorter = this.options.get('sorter');\n\n    return sorter(data);\n  };\n\n  Results.prototype.highlightFirstItem = function () {\n    var $options = this.$results\n      .find('.select2-results__option[aria-selected]');\n\n    var $selected = $options.filter('[aria-selected=true]');\n\n    // Check if there are any selected options\n    if ($selected.length > 0) {\n      // If there are selected options, highlight the first\n      $selected.first().trigger('mouseenter');\n    } else {\n      // If there are no selected options, highlight the first option\n      // in the dropdown\n      $options.first().trigger('mouseenter');\n    }\n\n    this.ensureHighlightVisible();\n  };\n\n  Results.prototype.setClasses = function () {\n    var self = this;\n\n    this.data.current(function (selected) {\n      var selectedIds = $.map(selected, function (s) {\n        return s.id.toString();\n      });\n\n      var $options = self.$results\n        .find('.select2-results__option[aria-selected]');\n\n      $options.each(function () {\n        var $option = $(this);\n\n        var item = $.data(this, 'data');\n\n        // id needs to be converted to a string when comparing\n        var id = '' + item.id;\n\n        if ((item.element != null && item.element.selected) ||\n            (item.element == null && $.inArray(id, selectedIds) > -1)) {\n          $option.attr('aria-selected', 'true');\n        } else {\n          $option.attr('aria-selected', 'false');\n        }\n      });\n\n    });\n  };\n\n  Results.prototype.showLoading = function (params) {\n    this.hideLoading();\n\n    var loadingMore = this.options.get('translations').get('searching');\n\n    var loading = {\n      disabled: true,\n      loading: true,\n      text: loadingMore(params)\n    };\n    var $loading = this.option(loading);\n    $loading.className += ' loading-results';\n\n    this.$results.prepend($loading);\n  };\n\n  Results.prototype.hideLoading = function () {\n    this.$results.find('.loading-results').remove();\n  };\n\n  Results.prototype.option = function (data) {\n    var option = document.createElement('li');\n    option.className = 'select2-results__option';\n\n    var attrs = {\n      'role': 'treeitem',\n      'aria-selected': 'false'\n    };\n\n    if (data.disabled) {\n      delete attrs['aria-selected'];\n      attrs['aria-disabled'] = 'true';\n    }\n\n    if (data.id == null) {\n      delete attrs['aria-selected'];\n    }\n\n    if (data._resultId != null) {\n      option.id = data._resultId;\n    }\n\n    if (data.title) {\n      option.title = data.title;\n    }\n\n    if (data.children) {\n      attrs.role = 'group';\n      attrs['aria-label'] = data.text;\n      delete attrs['aria-selected'];\n    }\n\n    for (var attr in attrs) {\n      var val = attrs[attr];\n\n      option.setAttribute(attr, val);\n    }\n\n    if (data.children) {\n      var $option = $(option);\n\n      var label = document.createElement('strong');\n      label.className = 'select2-results__group';\n\n      var $label = $(label);\n      this.template(data, label);\n\n      var $children = [];\n\n      for (var c = 0; c < data.children.length; c++) {\n        var child = data.children[c];\n\n        var $child = this.option(child);\n\n        $children.push($child);\n      }\n\n      var $childrenContainer = $('<ul></ul>', {\n        'class': 'select2-results__options select2-results__options--nested'\n      });\n\n      $childrenContainer.append($children);\n\n      $option.append(label);\n      $option.append($childrenContainer);\n    } else {\n      this.template(data, option);\n    }\n\n    $.data(option, 'data', data);\n\n    return option;\n  };\n\n  Results.prototype.bind = function (container, $container) {\n    var self = this;\n\n    var id = container.id + '-results';\n\n    this.$results.attr('id', id);\n\n    container.on('results:all', function (params) {\n      self.clear();\n      self.append(params.data);\n\n      if (container.isOpen()) {\n        self.setClasses();\n        self.highlightFirstItem();\n      }\n    });\n\n    container.on('results:append', function (params) {\n      self.append(params.data);\n\n      if (container.isOpen()) {\n        self.setClasses();\n      }\n    });\n\n    container.on('query', function (params) {\n      self.hideMessages();\n      self.showLoading(params);\n    });\n\n    container.on('select', function () {\n      if (!container.isOpen()) {\n        return;\n      }\n\n      self.setClasses();\n      self.highlightFirstItem();\n    });\n\n    container.on('unselect', function () {\n      if (!container.isOpen()) {\n        return;\n      }\n\n      self.setClasses();\n      self.highlightFirstItem();\n    });\n\n    container.on('open', function () {\n      // When the dropdown is open, aria-expended=\"true\"\n      self.$results.attr('aria-expanded', 'true');\n      self.$results.attr('aria-hidden', 'false');\n\n      self.setClasses();\n      self.ensureHighlightVisible();\n    });\n\n    container.on('close', function () {\n      // When the dropdown is closed, aria-expended=\"false\"\n      self.$results.attr('aria-expanded', 'false');\n      self.$results.attr('aria-hidden', 'true');\n      self.$results.removeAttr('aria-activedescendant');\n    });\n\n    container.on('results:toggle', function () {\n      var $highlighted = self.getHighlightedResults();\n\n      if ($highlighted.length === 0) {\n        return;\n      }\n\n      $highlighted.trigger('mouseup');\n    });\n\n    container.on('results:select', function () {\n      var $highlighted = self.getHighlightedResults();\n\n      if ($highlighted.length === 0) {\n        return;\n      }\n\n      var data = $highlighted.data('data');\n\n      if ($highlighted.attr('aria-selected') == 'true') {\n        self.trigger('close', {});\n      } else {\n        self.trigger('select', {\n          data: data\n        });\n      }\n    });\n\n    container.on('results:previous', function () {\n      var $highlighted = self.getHighlightedResults();\n\n      var $options = self.$results.find('[aria-selected]');\n\n      var currentIndex = $options.index($highlighted);\n\n      // If we are already at te top, don't move further\n      if (currentIndex === 0) {\n        return;\n      }\n\n      var nextIndex = currentIndex - 1;\n\n      // If none are highlighted, highlight the first\n      if ($highlighted.length === 0) {\n        nextIndex = 0;\n      }\n\n      var $next = $options.eq(nextIndex);\n\n      $next.trigger('mouseenter');\n\n      var currentOffset = self.$results.offset().top;\n      var nextTop = $next.offset().top;\n      var nextOffset = self.$results.scrollTop() + (nextTop - currentOffset);\n\n      if (nextIndex === 0) {\n        self.$results.scrollTop(0);\n      } else if (nextTop - currentOffset < 0) {\n        self.$results.scrollTop(nextOffset);\n      }\n    });\n\n    container.on('results:next', function () {\n      var $highlighted = self.getHighlightedResults();\n\n      var $options = self.$results.find('[aria-selected]');\n\n      var currentIndex = $options.index($highlighted);\n\n      var nextIndex = currentIndex + 1;\n\n      // If we are at the last option, stay there\n      if (nextIndex >= $options.length) {\n        return;\n      }\n\n      var $next = $options.eq(nextIndex);\n\n      $next.trigger('mouseenter');\n\n      var currentOffset = self.$results.offset().top +\n        self.$results.outerHeight(false);\n      var nextBottom = $next.offset().top + $next.outerHeight(false);\n      var nextOffset = self.$results.scrollTop() + nextBottom - currentOffset;\n\n      if (nextIndex === 0) {\n        self.$results.scrollTop(0);\n      } else if (nextBottom > currentOffset) {\n        self.$results.scrollTop(nextOffset);\n      }\n    });\n\n    container.on('results:focus', function (params) {\n      params.element.addClass('select2-results__option--highlighted');\n    });\n\n    container.on('results:message', function (params) {\n      self.displayMessage(params);\n    });\n\n    if ($.fn.mousewheel) {\n      this.$results.on('mousewheel', function (e) {\n        var top = self.$results.scrollTop();\n\n        var bottom = self.$results.get(0).scrollHeight - top + e.deltaY;\n\n        var isAtTop = e.deltaY > 0 && top - e.deltaY <= 0;\n        var isAtBottom = e.deltaY < 0 && bottom <= self.$results.height();\n\n        if (isAtTop) {\n          self.$results.scrollTop(0);\n\n          e.preventDefault();\n          e.stopPropagation();\n        } else if (isAtBottom) {\n          self.$results.scrollTop(\n            self.$results.get(0).scrollHeight - self.$results.height()\n          );\n\n          e.preventDefault();\n          e.stopPropagation();\n        }\n      });\n    }\n\n    this.$results.on('mouseup', '.select2-results__option[aria-selected]',\n      function (evt) {\n      var $this = $(this);\n\n      var data = $this.data('data');\n\n      if ($this.attr('aria-selected') === 'true') {\n        if (self.options.get('multiple')) {\n          self.trigger('unselect', {\n            originalEvent: evt,\n            data: data\n          });\n        } else {\n          self.trigger('close', {});\n        }\n\n        return;\n      }\n\n      self.trigger('select', {\n        originalEvent: evt,\n        data: data\n      });\n    });\n\n    this.$results.on('mouseenter', '.select2-results__option[aria-selected]',\n      function (evt) {\n      var data = $(this).data('data');\n\n      self.getHighlightedResults()\n          .removeClass('select2-results__option--highlighted');\n\n      self.trigger('results:focus', {\n        data: data,\n        element: $(this)\n      });\n    });\n  };\n\n  Results.prototype.getHighlightedResults = function () {\n    var $highlighted = this.$results\n    .find('.select2-results__option--highlighted');\n\n    return $highlighted;\n  };\n\n  Results.prototype.destroy = function () {\n    this.$results.remove();\n  };\n\n  Results.prototype.ensureHighlightVisible = function () {\n    var $highlighted = this.getHighlightedResults();\n\n    if ($highlighted.length === 0) {\n      return;\n    }\n\n    var $options = this.$results.find('[aria-selected]');\n\n    var currentIndex = $options.index($highlighted);\n\n    var currentOffset = this.$results.offset().top;\n    var nextTop = $highlighted.offset().top;\n    var nextOffset = this.$results.scrollTop() + (nextTop - currentOffset);\n\n    var offsetDelta = nextTop - currentOffset;\n    nextOffset -= $highlighted.outerHeight(false) * 2;\n\n    if (currentIndex <= 2) {\n      this.$results.scrollTop(0);\n    } else if (offsetDelta > this.$results.outerHeight() || offsetDelta < 0) {\n      this.$results.scrollTop(nextOffset);\n    }\n  };\n\n  Results.prototype.template = function (result, container) {\n    var template = this.options.get('templateResult');\n    var escapeMarkup = this.options.get('escapeMarkup');\n\n    var content = template(result, container);\n\n    if (content == null) {\n      container.style.display = 'none';\n    } else if (typeof content === 'string') {\n      container.innerHTML = escapeMarkup(content);\n    } else {\n      $(container).append(content);\n    }\n  };\n\n  return Results;\n});\n"]}