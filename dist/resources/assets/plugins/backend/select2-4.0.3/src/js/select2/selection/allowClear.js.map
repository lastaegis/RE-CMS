{"version":3,"sources":["../../../../../../../../../../resources/assets/plugins/backend/select2-4.0.3/src/js/select2/selection/allowClear.js"],"names":["define","$","KEYS","AllowClear","prototype","bind","decorated","container","$container","self","call","placeholder","options","get","window","console","error","$selection","on","evt","_handleClear","_handleKeyboardClear","_","$clear","find","length","stopPropagation","data","d","unselectData","trigger","prevented","$element","val","id","isOpen","which","DELETE","BACKSPACE","update","$remove","prepend"],"mappings":"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","file":"allowClear.js","sourcesContent":["define([\n  'jquery',\n  '../keys'\n], function ($, KEYS) {\n  function AllowClear () { }\n\n  AllowClear.prototype.bind = function (decorated, container, $container) {\n    var self = this;\n\n    decorated.call(this, container, $container);\n\n    if (this.placeholder == null) {\n      if (this.options.get('debug') && window.console && console.error) {\n        console.error(\n          'Select2: The `allowClear` option should be used in combination ' +\n          'with the `placeholder` option.'\n        );\n      }\n    }\n\n    this.$selection.on('mousedown', '.select2-selection__clear',\n      function (evt) {\n        self._handleClear(evt);\n    });\n\n    container.on('keypress', function (evt) {\n      self._handleKeyboardClear(evt, container);\n    });\n  };\n\n  AllowClear.prototype._handleClear = function (_, evt) {\n    // Ignore the event if it is disabled\n    if (this.options.get('disabled')) {\n      return;\n    }\n\n    var $clear = this.$selection.find('.select2-selection__clear');\n\n    // Ignore the event if nothing has been selected\n    if ($clear.length === 0) {\n      return;\n    }\n\n    evt.stopPropagation();\n\n    var data = $clear.data('data');\n\n    for (var d = 0; d < data.length; d++) {\n      var unselectData = {\n        data: data[d]\n      };\n\n      // Trigger the `unselect` event, so people can prevent it from being\n      // cleared.\n      this.trigger('unselect', unselectData);\n\n      // If the event was prevented, don't clear it out.\n      if (unselectData.prevented) {\n        return;\n      }\n    }\n\n    this.$element.val(this.placeholder.id).trigger('change');\n\n    this.trigger('toggle', {});\n  };\n\n  AllowClear.prototype._handleKeyboardClear = function (_, evt, container) {\n    if (container.isOpen()) {\n      return;\n    }\n\n    if (evt.which == KEYS.DELETE || evt.which == KEYS.BACKSPACE) {\n      this._handleClear(evt);\n    }\n  };\n\n  AllowClear.prototype.update = function (decorated, data) {\n    decorated.call(this, data);\n\n    if (this.$selection.find('.select2-selection__placeholder').length > 0 ||\n        data.length === 0) {\n      return;\n    }\n\n    var $remove = $(\n      '<span class=\"select2-selection__clear\">' +\n        '&times;' +\n      '</span>'\n    );\n    $remove.data('data', data);\n\n    this.$selection.find('.select2-selection__rendered').prepend($remove);\n  };\n\n  return AllowClear;\n});\n"]}