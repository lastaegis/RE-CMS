{"version":3,"sources":["../../../../../../../../../../resources/assets/plugins/backend/select2-4.0.3/src/js/select2/compat/inputData.js"],"names":["define","$","InputData","decorated","$element","options","_currentData","_valueSeparator","get","prop","console","warn","call","prototype","current","_","callback","getSelected","data","selectedIds","selected","inArray","id","push","children","apply","d","length","val","split","select","allData","map","trigger","value","unselect","self","values","item","join","query","params","results","matches","addOptions","$options","$option"],"mappings":"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","file":"inputData.js","sourcesContent":["define([\n  'jquery'\n], function ($) {\n  function InputData (decorated, $element, options) {\n    this._currentData = [];\n    this._valueSeparator = options.get('valueSeparator') || ',';\n\n    if ($element.prop('type') === 'hidden') {\n      if (options.get('debug') && console && console.warn) {\n        console.warn(\n          'Select2: Using a hidden input with Select2 is no longer ' +\n          'supported and may stop working in the future. It is recommended ' +\n          'to use a `<select>` element instead.'\n        );\n      }\n    }\n\n    decorated.call(this, $element, options);\n  }\n\n  InputData.prototype.current = function (_, callback) {\n    function getSelected (data, selectedIds) {\n      var selected = [];\n\n      if (data.selected || $.inArray(data.id, selectedIds) !== -1) {\n        data.selected = true;\n        selected.push(data);\n      } else {\n        data.selected = false;\n      }\n\n      if (data.children) {\n        selected.push.apply(selected, getSelected(data.children, selectedIds));\n      }\n\n      return selected;\n    }\n\n    var selected = [];\n\n    for (var d = 0; d < this._currentData.length; d++) {\n      var data = this._currentData[d];\n\n      selected.push.apply(\n        selected,\n        getSelected(\n          data,\n          this.$element.val().split(\n            this._valueSeparator\n          )\n        )\n      );\n    }\n\n    callback(selected);\n  };\n\n  InputData.prototype.select = function (_, data) {\n    if (!this.options.get('multiple')) {\n      this.current(function (allData) {\n        $.map(allData, function (data) {\n          data.selected = false;\n        });\n      });\n\n      this.$element.val(data.id);\n      this.$element.trigger('change');\n    } else {\n      var value = this.$element.val();\n      value += this._valueSeparator + data.id;\n\n      this.$element.val(value);\n      this.$element.trigger('change');\n    }\n  };\n\n  InputData.prototype.unselect = function (_, data) {\n    var self = this;\n\n    data.selected = false;\n\n    this.current(function (allData) {\n      var values = [];\n\n      for (var d = 0; d < allData.length; d++) {\n        var item = allData[d];\n\n        if (data.id == item.id) {\n          continue;\n        }\n\n        values.push(item.id);\n      }\n\n      self.$element.val(values.join(self._valueSeparator));\n      self.$element.trigger('change');\n    });\n  };\n\n  InputData.prototype.query = function (_, params, callback) {\n    var results = [];\n\n    for (var d = 0; d < this._currentData.length; d++) {\n      var data = this._currentData[d];\n\n      var matches = this.matches(params, data);\n\n      if (matches !== null) {\n        results.push(matches);\n      }\n    }\n\n    callback({\n      results: results\n    });\n  };\n\n  InputData.prototype.addOptions = function (_, $options) {\n    var options = $.map($options, function ($option) {\n      return $.data($option[0], 'data');\n    });\n\n    this._currentData.push.apply(this._currentData, options);\n  };\n\n  return InputData;\n});\n"]}