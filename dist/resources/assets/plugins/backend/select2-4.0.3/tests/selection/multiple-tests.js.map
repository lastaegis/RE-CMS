{"version":3,"sources":["../../../../../../../../resources/assets/plugins/backend/select2-4.0.3/tests/selection/multiple-tests.js"],"names":["module","MultipleSelection","require","$","Options","Utils","options","test","assert","called","templateOptions","templateSelection","data","text","selection","out","display","ok","equal","container","addClass","$container","selectionContainer","hasClass","$selection","render","$rendered","find","update","unescapedText","substr","disabled","$select","MockContainer","append","bind","$pill","length","$remove","on","params","trigger"],"mappings":"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","file":"multiple-tests.js","sourcesContent":["module('Selection containers - Multiple');\n\nvar MultipleSelection = require('select2/selection/multiple');\n\nvar $ = require('jquery');\nvar Options = require('select2/options');\nvar Utils = require('select2/utils');\n\nvar options = new Options({});\n\ntest('display uses templateSelection', function (assert) {\n  var called = false;\n\n  var templateOptions = new Options({\n    templateSelection: function (data) {\n      called = true;\n\n      return data.text;\n    }\n  });\n\n  var selection = new MultipleSelection(\n    $('#qunit-fixture .multiple'),\n    templateOptions\n  );\n\n  var out = selection.display({\n    text: 'test'\n  });\n\n  assert.ok(called);\n\n  assert.equal(out, 'test');\n});\n\ntest('templateSelection can addClass', function (assert) {\n  var called = false;\n\n  var templateOptions = new Options({\n    templateSelection: function (data, container) {\n      called = true;\n      container.addClass('testclass');\n      return data.text;\n    }\n  });\n\n  var selection = new MultipleSelection(\n    $('#qunit-fixture .multiple'),\n    templateOptions\n  );\n\n  var $container = selection.selectionContainer();\n\n  var out = selection.display({\n    text: 'test'\n  }, $container);\n\n  assert.ok(called);\n\n  assert.equal(out, 'test');\n\n  assert.ok($container.hasClass('testclass'));\n});\n\ntest('empty update clears the selection', function (assert) {\n  var selection = new MultipleSelection(\n    $('#qunit-fixture .multiple'),\n    options\n  );\n\n  var $selection = selection.render();\n  var $rendered = $selection.find('.select2-selection__rendered');\n\n  $rendered.text('testing');\n\n  selection.update([]);\n\n  assert.equal($rendered.text(), '');\n});\n\ntest('escapeMarkup is being used', function (assert) {\n  var selection = new MultipleSelection(\n    $('#qunit-fixture .multiple'),\n    options\n  );\n\n  var $selection = selection.render();\n  var $rendered = $selection.find('.select2-selection__rendered');\n\n  var unescapedText = '<script>bad(\"stuff\");</script>';\n\n  selection.update([{\n    text: unescapedText\n  }]);\n\n  assert.equal(\n    $rendered.text().substr(1),\n    unescapedText,\n    'The text should be escaped by default to prevent injection'\n  );\n});\n\ntest('clear button respects the disabled state', function (assert) {\n  var options = new Options({\n    disabled: true\n  });\n\n  var $select = $('#qunit-fixture .multiple');\n\n  var container = new MockContainer();\n  var $container = $('<div></div>');\n\n  var selection = new MultipleSelection(\n    $select,\n    options\n  );\n\n  var $selection = selection.render();\n  $container.append($selection);\n\n  selection.bind(container, $container);\n\n  // Select an option\n  selection.update([{\n    text: 'Test'\n  }]);\n\n  var $rendered = $selection.find('.select2-selection__rendered');\n\n  var $pill = $rendered.find('.select2-selection__choice');\n\n  assert.equal($pill.length, 1, 'There should only be one selection');\n\n  var $remove = $pill.find('.select2-selection__choice__remove');\n\n  assert.equal(\n    $remove.length,\n    1,\n    'The remove icon is displayed for the selection'\n  );\n\n  // Set up the unselect handler\n  selection.on('unselect', function (params) {\n    assert.ok(false, 'The unselect handler should not be triggered');\n  });\n\n  // Trigger the handler for the remove icon\n  $remove.trigger('click');\n});\n"]}