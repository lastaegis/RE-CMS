{"version":3,"sources":["../../../../../../resources/assets/js/backend/file/modal-file.js"],"names":["axios","require","file","document","getElementsByClassName","fileName","getElementById","fileDownload","fileImage","changeFile","totalFile","length","getDetailFile","fileId","URLSearchParam","URLSearchParams","append","url","window","baseUrl","method","headers","data","updateFileName","localStorage","getItem","value","then","response","status_code","$","modal","alert","status_message","catch","error","Error","modalFile","fileData","setItem","id","setAttribute","path","mime","i","addEventListener","getAttribute","detailFile"],"mappings":"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","file":"modal-file.js","sourcesContent":["\"use strict\";\nconst axios         = require(\"axios\");\nconst file          = document.getElementsByClassName(\"modal-file\");\nconst fileName      = document.getElementById(\"file-name\");\nconst fileDownload  = document.getElementById(\"file-download\");\nconst fileImage     = document.getElementById(\"image-source\");\nconst changeFile    = document.getElementById(\"change-file\");\nconst totalFile     = file.length;\n\n/**\n * Use to get detail file base by file id\n * @param fileId\n */\nconst getDetailFile = (fileId) =>{\n    let URLSearchParam = new URLSearchParams();\n    URLSearchParam.append(\"id\", fileId);\n\n    return axios({\n        url: window.baseUrl+\"admin/helper/ajax/detail-file\",\n        method: \"POST\",\n        headers:{\n            \"X-Requested-With\": \"XMLHttpRequest\"\n        },\n        data: URLSearchParam\n    });\n};\n\n/**\n * Use to update file name via ajax promise\n */\nconst updateFileName = () =>{\n    let fileId = localStorage.getItem(\"fileId\");\n    let URLSearchParam = new URLSearchParams();\n    URLSearchParam.append(\"id\", fileId);\n    URLSearchParam.append(\"title\", fileName.value);\n\n    axios({\n        url: window.baseUrl+\"admin/helper/ajax/update-file\",\n        method: \"POST\",\n        headers:{\n            \"X-Requested-With\": \"XMLHttpRequest\"\n        },\n        data: URLSearchParam\n    }).then((response)=>{\n        if((response.data.status_code) === 200)\n        {\n            $(\"#modal-file\").modal(\"hide\");\n            alert(response.data.status_message);\n        }\n    }).catch((error)=>{\n        throw new Error(\"Exceptions: \"+error);\n    })\n};\n\n/**\n * Use to show modal and append all field with file data\n * @param fileData\n */\nconst modalFile = (fileData) =>{\n    $(\"#modal-file\").modal(\"show\");\n    localStorage.setItem(\"fileId\", fileData.id);\n    fileName.value  = fileData.file;\n    fileDownload.setAttribute(\"href\", window.baseUrl+\"storage/app/\"+fileData.path);\n    if(fileData.mime === \"image/png\" || fileData.mime === \"image/jpeg\")\n    {\n        fileImage.setAttribute(\"src\", window.baseUrl+\"storage/app/\"+fileData.path);\n    }\n    if(fileData.mime === \"application/pdf\")\n    {\n        fileImage.setAttribute(\"src\", window.baseUrl+\"public/assets/images/pdf-logo.png\");\n    }\n    if(fileData.mime === \"application/msword\" || fileData.mime === \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\")\n    {\n        fileImage.setAttribute(\"src\", window.baseUrl+\"public/assets/images/word-logo.png\");\n    }\n    if(fileData.mime === \"application/vnd.ms-powerpoint\" || fileData.mime === \"application/vnd.openxmlformats-officedocument.presentationml.presentation\")\n    {\n        fileImage.setAttribute(\"src\", window.baseUrl+\"public/assets/images/ppt-logo.png\");\n    }\n    if(fileData.mime === \"application/vnd.ms-excel\" || fileData.mime === \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\")\n    {\n        fileImage.setAttribute(\"src\", window.baseUrl+\"public/assets/images/excel-logo.png\");\n    }\n};\n\n/**\n * Use to add event listener each image\n */\nfor (let i = 0; i < totalFile; i++)\n{\n    file[i].addEventListener('click', ()=>{\n        let fileId = file[i].getAttribute(\"data-file-id\");\n        let detailFile = getDetailFile(fileId);\n        detailFile.then((response)=>{\n            modalFile(response.data);\n        }).catch((error)=>{\n            throw new Error(\"Error: \"+error);\n        });\n    });\n}\n\nif(!!changeFile)\n{\n    changeFile.addEventListener(\"click\", ()=>{\n        updateFileName();\n    });\n}"]}